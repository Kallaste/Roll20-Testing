		<input type="text" style="display:none" value="1" name="attr_version" />
		<input type="text" style="display:none" value="0" name="attr_SetupDone2" />
		<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab1" value="1" title="Front" checked="checked" /><span title="Front"></span>
		<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab2" value="2" title="Back" /><span title="Back"></span>
		<div class="sheet-tab-content sheet-tab1"><!--- Tab 1 start -->
			 <div class="sheet-cdiv">
				<input class="sheet-HideConfig" type="checkbox" checked="checked" name="attr_is_config"><span class="sheet-is-config"><span style="font-family: &quot;pictos&quot;">y</span></span>
				<div class="sheet-config" style="border-style: dotted ; border-color: gray ; padding: 5px ; background-color: white ; background-image: none">

				</div>
			</div>	
			<br />
			<div class='sheet-2colrow' style="margin-bottom:19px;">
				<div class='sheet-col' style="margin-right:1px">
					<div class="sheet-info">
						<div class="sheet-input_label">Name</div><input type="text" style="width:131px;" class="sheet-text_input" name="attr_character_name" />
						<div class="sheet-input_label">Birth Year</div><input type="text" style="width:56px;" class="sheet-text_input" name="attr_birth_year" />
						<div class="sheet-input_label">Age</div><input type="text" style="width:35px;" class="sheet-text_input" name="attr_age" />
					</div>
					<div class="sheet-info">
						<div class="sheet-input_label">Gender</div><input type="text" style="width:99px;" class="sheet-text_input" name="attr_gender" />
						<div class="sheet-input_label">Homeland</div><input type="text" style="width:145px;" class="sheet-text_input" name="attr_homeland" />
					</div>				
					<div class="sheet-info">
						<div class="sheet-input_label">Tribe</div><input type="text" style="width:159px;" class="sheet-text_input" name="attr_tribe" />
						<div class="sheet-input_label">Clan</div><input type="text" style="width:143px;" class="sheet-text_input" name="attr_clan" />
					</div>					
					
				</div>
				<div class='sheet-col' style="margin-right:1px">
					<div class="sheet-info">
						<div class="sheet-input_label">Occupation</div><input type="text" style="width:159px;" class="sheet-text_input" name="attr_occupation" />
						<div class="sheet-input_label">Ransom</div><input type="text" style="width:56px;" class="sheet-text_input" name="attr_ransom" />(L)
						
					</div>
					<div class="sheet-info">
						<div class="sheet-input_label">Reputation</div><input type="text" value="0" class="sheet-text_input sheet-percentiles" name="attr_reputation" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{reputation}]]}} {{fumble=[[ceil(95+([[(@{reputation})]])/20))]]}} {{crit=[[round(([[(@{reputation})]])/20)+1]]}}  {{special=[[round(([[(@{reputation})]])/5)+1]]}}    {{success=[[(@{reputation})]]}} {{roll=[[1d100]]}} {{skillname=Reputation}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{reputation}]]}} {{fumble=[[ceil(95+(@{reputation}+?{Mods|0})/20)]]}} {{crit=[[round((@{reputation}+?{Mods|0})/20)+1]]}}  {{special=[[round((@{reputation}+?{Mods|0})/5)+1]]}}    {{success=[[@{reputation}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Reputation}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
						<div class="sheet-input_label">Standard of Living</div><input type="text" style="width:75px;" class="sheet-text_input" name="attr_living_standard" />
					
					</div>				
					<div class="sheet-info">
						<div class="sheet-input_label">Base Income</div><input type="text" style="width:95px;" class="sheet-text_input" name="attr_base_income" />(L)					
						<div class="sheet-input_label">Campaign</div><input type="text" style="width:100px;" class="sheet-text_input" name="attr_campaign" />
					</div>			
				
				</div>			
			</div>
			<hr class="sheet-hr" />

			<div class='sheet-3colrow'><!-- Runes and Hit locations -->
				<div class='sheet-col' style="position: relative;margin-right:1px"><!--Hit Location-->

					<div class="sheet-hit-box sheet-hit-head" style="font-size:x-small" >
						<label>Head 19-20</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorHd" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusHd" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalHd" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;"  readonly value="0" name="attr_hd_max_hp" />
							<input type="text" style="display:inline-block;;" readonly value="0" name="attr_hd_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_hd_damage" />
						</div>										
						
					</div>	

					
					<div class="sheet-hit-box sheet-hit-larm" style="font-size:x-small" >
						<label>L Arm 16-18</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorLA" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusLA" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalLA" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;" value="0" readonly name="attr_l_arm_max_hp" />
							<input type="text" style="display:inline-block;;" value="0"  readonly name="attr_l_arm_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_l_arm_damage" />
						</div>										
						
					</div>					
					
					
					<div class="sheet-hit-box sheet-hit-rarm" style="font-size:x-small" >
						<label>R Arm 13-15</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorRA" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusRA" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalRA" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;"  readonly  value="0" name="attr_r_arm_max_hp" />
							<input type="text" style="display:inline-block;;"  readonly  value="0" name="attr_r_arm_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_r_arm_damage" />
						</div>										
						
					</div>	
				
					<div class="sheet-hit-box sheet-hit-chest" style="font-size:x-small" >
						<label>Chest 12</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorCh" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusCh" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalCh" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;" value="0"  readonly  name="attr_chst_max_hp" />
							<input type="text" style="display:inline-block;;" value="0"  readonly  name="attr_chst_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_chst_damage" />
						</div>										
						
					</div>	
					
					<div class="sheet-hit-box sheet-hit-abd" style="font-size:x-small" >
						<label>Abd 9-11</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorAb" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusAb" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalAb" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;" value="0"  readonly name="attr_abd_max_hp" />
							<input type="text" style="display:inline-block;;" value="0"  readonly name="attr_abd_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_abd_damage" />
						</div>										
						
					</div>					
					
					
					
					<div class="sheet-hit-box sheet-hit-lleg" style="font-size:x-small" >
						<label>L Leg 5-8</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorLL" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusLL" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalLL" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;" value="0"  readonly  name="attr_l_leg_max_hp" />
							<input type="text" style="display:inline-block;;" value="0"  readonly  name="attr_l_leg_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_l_leg_damage" />
						</div>										
						
					</div>					
					
					
					<div class="sheet-hit-box sheet-hit-rleg" style="font-size:x-small" >
						<label>R leg 1-4</label>
						<div>
							<span>AP</span>
							<input type="text" style="display:inline-block;" value="0" name="attr_EqpArmorRL" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpBonusRL" />
							<input type="text" style="display:inline-block;;" value="0" name="attr_EqpTotalRL" />
						</div>
						<div>
							<span>HP</span>
							<input type="text" style="display:inline-block;;" value="0"  readonly  name="attr_r_leg_max_hp" />
							<input type="text" style="display:inline-block;;" value="0"  readonly  name="attr_r_leg_cur_hp" />
						</div>
						<div>
							<span>Wnds.</span>
							<input type="text" class="sheet-wnds"  value="0+0" name="attr_r_leg_damage" />
						</div>										
						
					</div>					
					
					
					
					
					
					<img class="sheet-man-image" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/man.png" />			
				
				</div><!--Hit Location-->
				<div class='sheet-col' style="position: relative;"><!--Elemental Runes-->
					<img class="sheet-elemental-image" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/Elemental.png" />

					<div class="sheet-air-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{air_rune}]]}} {{fumble=[[ceil(95+(@{air_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{air_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{air_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{air_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Air Rune}}  " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/air rune.jpg"></button>
					</div>
					
					<div class="sheet-fire-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{fire_rune}]]}} {{fumble=[[ceil(95+(@{fire_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{fire_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{fire_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{fire_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Fire Rune}}  "  class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/fire rune.png"></button>
					</div>
									
					<div class="sheet-dark-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{dark_rune}]]}} {{fumble=[[ceil(95+(@{dark_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{dark_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{dark_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{dark_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Dark Rune}}  " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/darkness rune.png"></button>
					</div>				

					<div class="sheet-water-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{water_rune}]]}} {{fumble=[[ceil(95+(@{water_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{water_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{water_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{water_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Water Rune}}  " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/water rune.png"></button>
					</div>	

					<div class="sheet-earth-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{earth_rune}]]}} {{fumble=[[ceil(95+(@{earth_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{earth_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{earth_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{earth_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Earth Rune}}  " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/earth rune.png"></button>
					</div>	


					<div class="sheet-moon-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{moon_rune}]]}} {{fumble=[[ceil(95+(@{moon_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{moon_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{moon_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{moon-rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Moon Rune}}  " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/moon rune.png"></button>
					</div>					
					
					<input type="text" class="sheet-rune_input sheet-dark-value" value="0" name="attr_dark_rune" />
					<input type="checkbox" class="sheet-dark-check"  value="1" name="attr_dark-runeExp" />		

					
					<input type="text" class="sheet-rune_input sheet-air-value" value="0" name="attr_air_rune" />
					<input type="checkbox" class="sheet-air-check"  value="1" name="attr_air-runeExp" />
					
					<input type="text" class="sheet-rune_input sheet-moon-value" value="0" name="attr_moon_rune" />
					<input type="checkbox" class="sheet-moon-check"  value="1" name="attr_moon-runeExp" />				
						
					<input type="text" class="sheet-rune_input sheet-fire-value" value="0" name="attr_fire_rune" />
					<input type="checkbox" class="sheet-fire-check"  value="1" name="attr_fire-runeExp" />				
					
					<input type="text" class="sheet-rune_input sheet-water-value" value="0" name="attr_water_rune" />
					<input type="checkbox" class="sheet-water-check"  value="1" name="attr_water-runeExp" />				
									
					<input type="text" class="sheet-rune_input sheet-earth-value" value="0" name="attr_earth_rune" />
					<input type="checkbox" class="sheet-earth-check"  value="1" name="attr_earth-runeExp" />				
					
				</div><!--Elemental RuneS-->			
				<div class='sheet-col'style="position: relative;"><!--Power Runes-->
				

					<img class="sheet-power-image" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/power.png" />	


					<div class="sheet-manR-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{man_rune}]]}} {{fumble=[[ceil(95+(@{man_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{man_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{man_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{man_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Man Rune}}" class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/man rune.png"></button>
					</div>
					
					<div class="sheet-fertility-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{fertility_rune}]]}} {{fumble=[[ceil(95+(@{fertility_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{fertility_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{fertility_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{fertility_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Fertility Rune}}" class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/fertility rune.png"></button>
					</div>
									

					<div class="sheet-harmony-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{harmony_rune}]]}} {{fumble=[[ceil(95+(@{harmony_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{harmony_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{harmony_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{harmony_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Harmony Rune}}" class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/harmony rune.png"></button>
					</div>								
									
					<div class="sheet-truth-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{truth_rune}]]}} {{fumble=[[ceil(95+(@{truth_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{truth_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{truth_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{truth_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Truth Rune}}" class="sheet-rune_roll" class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/truth rune.png"></button>
					</div>								
									
					<div class="sheet-stasis-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{stasis_rune}]]}} {{fumble=[[ceil(95+(@{stasis_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{stasis_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{stasis_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{stasis_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Stasis Rune}}" class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/stasis rune.png"></button>
					</div>								
									
					<div class="sheet-death-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{death_rune}]]}} {{fumble=[[ceil(95+(@{death_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{death_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{death_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{death_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Death Rune}} " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/death rune.png"></button>
					</div>																
									
					<div class="sheet-disorder-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{disorder_rune}]]}} {{fumble=[[ceil(95+(@{disorder_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{disorder_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{disorder_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{disorder_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Disorder Rune}} " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/disorder rune.png"></button>
					</div>																
									
					<div class="sheet-illusion-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{illusion_rune}]]}} {{fumble=[[ceil(95+(@{illusion_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{illusion_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{illusion_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{illusion_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Illusion Rune}} " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/illusion rune.png"></button>
					</div>								

					<div class="sheet-movement-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{movement_rune}]]}} {{fumble=[[ceil(95+(@{movement_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{movement_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{movement_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{movement_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Move Rune}} " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/movement rune.png"></button>
					</div>												
					
					
					<div class="sheet-beast-image">
						<button type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{beast_rune}]]}} {{fumble=[[ceil(95+(@{beast_rune}+?{Mods|0})/20))]]}} {{crit=[[round((@{beast_rune}+?{Mods|0})/20)+1]]}} {{special=[[round((@{beast_rune}+?{Mods|0})/5)+1]]}}         {{success=[[@{beast_rune}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Beast Rune}} " class="sheet-rune_roll"><img src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/beast rune.png"></button>
					</div>												
											
									
					<input type="text" class="sheet-rune_input sheet-man-value" value="0" name="attr_man_rune" />
					<input type="checkbox" class="sheet-man-check"  value="1" name="attr_man-runeExp" />	
					
					<input type="text" class="sheet-rune_input sheet-fertility-value" value="0" name="attr_fertility_rune" />
					<input type="checkbox" class="sheet-fertility-check"  value="1" name="attr_fertility-runeExp" />		
					
					<input type="text" class="sheet-rune_input sheet-harmony-value" value="0" name="attr_harmony_rune" />
					<input type="checkbox" class="sheet-harmony-check"  value="1" name="attr_harmony-runeExp" />		
					
					<input type="text" class="sheet-rune_input sheet-truth-value" value="0" name="attr_truth_rune" />
					<input type="checkbox" class="sheet-truth-check"  value="1" name="attr_truth-runeExp" />		
				
					<input type="text" class="sheet-rune_input sheet-stasis-value" value="0" name="attr_stasis_rune" />
					<input type="checkbox" class="sheet-stasis-check"  value="1" name="attr_stasis-runeExp" />		
					
					<input type="text" class="sheet-rune_input sheet-death-value" value="0" name="attr_death_rune" />
					<input type="checkbox" class="sheet-death-check"  value="1" name="attr_death-runeExp" />		
					
					<input type="text" class="sheet-rune_input sheet-disorder-value" value="0" name="attr_disorder_rune" />
					<input type="checkbox" class="sheet-disorder-check"  value="1" name="attr_disorder-runeExp" />		
					
					<input type="text" class="sheet-rune_input sheet-illusion-value" value="0" name="attr_illusion_rune" />
					<input type="checkbox" class="sheet-illusion-check"  value="1" name="attr_illusion-runeExp" />		

					<input type="text" class="sheet-rune_input sheet-movement-value" value="0" name="attr_movement_rune" />
					<input type="checkbox" class="sheet-movement-check"  value="1" name="attr_movement-runeExp" />	

					<input type="text" class="sheet-rune_input sheet-movement-value" value="0" name="attr_death_rune" />
					<input type="checkbox" class="sheet-movement-check"  value="1" name="attr_movement-runeExp" />	

					<input type="text" class="sheet-rune_input sheet-movement-value" value="0" name="attr_movement_rune" />
					<input type="checkbox" class="sheet-movement-check"  value="1" name="attr_movement-runeExp" />	
					
					
					<input type="text" class="sheet-rune_input sheet-beast-value" value="0" name="attr_beast_rune" />
					<input type="checkbox" class="sheet-beast-check"  value="1" name="attr_beast-runeExp" />	
					
				
				</div><!--Power Runes-->	


			</div>
				<hr class="sheet-hr" />


				<div class='sheet-2colrow'>
					<div class='sheet-col' style="margin-right:30px;width:50%">
						<div class="sheet-header">Characteristics</div>
						<div class='sheet-2colrow'>
							<div>
								<label style="margin-left:56px;display:inline;font-size:0.6em">Orig.</label>
								<label style="margin-left:5px;display:inline;font-size:0.6em">Mod.</label>
								<label style="margin-left:5px;display:inline;font-size:0.6em">Cur.</label>							
							</div>						
						<div class='sheet-col' style="width:64%;margin-right:1px">
							<div>
								<div class="sheet-char-label">STR</div>
								<input type="text" class="sheet-char_values" name="attr_basestr" value="0"/>
								<input type="text" class="sheet-char_values" name="attr_modstr" value="0"/>
								<input type="text" class="sheet-char_values" readonly name="attr_curstr" value="0"/>
								
								<button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curstr}*5)]]}} {{fumble=[[ceil(95+([[(@{curstr}*5)]])/20))]]}} {{crit=[[round(([[(@{curstr}*5)]])/20)+1]]}}  {{special=[[round(([[(@{curcon}*5)]])/5)+1]]}}    {{success=[[(@{curstr}*5)]]}} {{roll=[[1d100]]}} {{skillname=STR Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curstr}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curstr}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curstr}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curstr}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curstr}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=STR Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>	
							</div>	
							
							<div>
								<div class="sheet-char-label">CON</div>

								<input type="text" class="sheet-char_values" name="attr_basecon" value="0"/>
								<input type="text" class="sheet-char_values" name="attr_modcon" value="0"/>
								<input type="text" class="sheet-char_values" readonly name="attr_curcon" value="0"/>
								<button type="roll" class="sheet-d100_roll"   value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curcon}*5)]]}} {{fumble=[[ceil(95+([[(@{curcon}*5)]])/20))]]}} {{crit=[[round(([[(@{curcon}*5)]])/20)+1]]}} {{special=[[round(([[(@{curcon}*5)]])/5)+1]]}}         {{success=[[(@{curcon}*5)]]}} {{roll=[[1d100]]}} {{skillname=CON Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curcon}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curcon}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curcon}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curcon}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curcon}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=CON Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>	
							</div>	

							<div>
								<div class="sheet-char-label">SIZ</div>
								<input type="text" class="sheet-char_values" name="attr_basesiz" value="0" />
								<input type="text" class="sheet-char_values" name="attr_modsiz" value="0"/>									
								<input type="text" class="sheet-char_values" readonly name="attr_cursiz" value="0"/>
								<button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{cursiz}*5)]]}} {{fumble=[[ceil(95+([[(@{cursiz}*5)]])/20))]]}} {{crit=[[round(([[(@{cursiz}*5)]])/20)+1]]}} {{special=[[round(([[(@{cursiz}*5)]])/5)+1]]}}         {{success=[[(@{cursiz}*5)]]}} {{roll=[[1d100]]}} {{skillname=SIZ Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{cursiz}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{cursiz}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{cursiz}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{cursiz}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{cursiz}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=SIZ Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>	
							</div>	
							
							<div>
								<div class="sheet-char-label">INT</div>

								<input type="text" class="sheet-char_values" name="attr_baseint" value="0"/>	
								<input type="text" class="sheet-char_values" name="attr_modint" value="0"/>									
								<input type="text" class="sheet-char_values" readonly name="attr_curint" value="0"/>
								<button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curint}*5)]]}} {{fumble=[[ceil(95+([[(@{curint}*5)]])/20))]]}} {{crit=[[round(([[(@{curint}*5)]])/20)+1]]}} {{special=[[round(([[(@{curint}*5)]])/5)+1]]}}         {{success=[[(@{curint}*5)]]}} {{roll=[[1d100]]}} {{skillname=INT Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curint}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curint}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curint}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curint}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curint}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=INT Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>	
							</div>
							
							<div>
								<div class="sheet-char-label">POW</div>						

								<input type="text" class="sheet-char_values" name="attr_basepow" value="0"/>
								<input type="text" class="sheet-char_values" name="attr_modpow" value="0"/>									
								<input type="text" class="sheet-char_values" readonly name="attr_curpow" value="0"/>
								<button type="roll"  class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curpow}*5)]]}} {{fumble=[[ceil(95+([[(@{curpow}*5)]])/20))]]}} {{crit=[[round(([[(@{curpow}*5)]])/20)+1]]}} {{special=[[round(([[(@{curpow}*5)]])/5)+1]]}}         {{success=[[(@{curpow}*5)]]}} {{roll=[[1d100]]}} {{skillname=POW Roll}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curpow}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curpow}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curpow}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curpow}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curpow}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=POW Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								<input type="checkbox"  name="attr_pow_check"/>								
							</div>

							<div>
								<div class="sheet-char-label">DEX</div>						

								<input type="text" class="sheet-char_values" name="attr_basedex" value="0"/>	
								<input type="text" class="sheet-char_values" name="attr_moddex" value="0"/>									
								<input type="text" class="sheet-char_values" readonly name="attr_curdex" value="0"/>
								<button type="roll" class="sheet-d100_roll"  value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curdex}*5)]]}} {{fumble=[[ceil(95+([[(@{curdex}*5)]])/20))]]}} {{crit=[[round(([[(@{curdex}*5)]])/20)+1]]}} {{special=[[round(([[(@{curdex}*5)]])/5)+1]]}}         {{success=[[(@{curdex}*5)]]}} {{roll=[[1d100]]}} {{skillname=DEX Roll}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curdex}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curdex}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curdex}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curdex}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curdex}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=DEX Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>	
							</div>

							<div>	
								<div class="sheet-char-label">CHR</div>
								<input type="text" class="sheet-char_values" name="attr_basechr" value="0"/>	
								<input type="text" class="sheet-char_values" name="attr_modchr" value="0"/>									
								<input type="text" class="sheet-char_values" readonly name="attr_curchr" value="0"/>

								<button type="roll" class="sheet-d100_roll"  value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curchr}*5)]]}} {{fumble=[[ceil(95+([[(@{curchr}*5)]])/20))]]}} {{crit=[[round(([[(@{curchr}*5)]])/20)+1]]}} {{special=[[round(([[(@{curchr}*5)]])/5)+1]]}}         {{success=[[(@{curchr}*5)]]}} {{roll=[[1d100]]}} {{skillname=chr Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curchr}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curchr}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curchr}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curchr}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curchr}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=chr Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
							</div>
						</div>	
						<div class='sheet-col' style="margin-right:1px;width:30%">
							<div>
								<div class="sheet-attribute_label">Dam. Bonus</div>
								<input style="width:50px;" type="text" readonly name="attr_damagebonus" />
								<input style="display:none" type="text" readonly name="attr_mdamagebonus" />
								<input style="display:none" type="text" readonly name="attr_maxDb" />
								<input style="display:none" type="text" readonly name="attr_mmaxDb" />

							</div>
							<div>
								<div class="sheet-attribute_label">Move Rate</div>
								<input style="width:50px;" type="text"  value="8" name="attr_move_rate" />	
							</div>	
							<div>
								<div class="sheet-attribute_label">Dex SRM</div>
								<input style="width:50px;" value="0" type="text" readonly name="attr_dex_srm" />	
							</div>	
							<div>
								<div class="sheet-attribute_label">Size SRM</div>
								<input style="width:50px;" value="0" type="text" readonly name="attr_siz_srm" />	
							</div>		
							<div>
								<div class="sheet-attribute_label">Melee SRM</div>
								<input style="width:50px;" value="0" type="text" readonly name="attr_melee_srm" />	
							</div>				
							<div>
								<div class="sheet-attribute_label">Heal Rate</div>
								<input style="width:50px;" value="0" type="text" readonly name="attr_heal_rate" />	
							</div>		
						
							</div>
						</div>	
						
						<br />
						<div class="sheet-header">Passions</div>
						<div>
							<div class="sheet-input_label">Honor</div><input type="text" value="0" style="margin-right:5px;" class="sheet-text_input sheet-percentiles" name="attr_honor" /><input type="checkbox"  style="margin-right:5px;" name="attr_honor_check"/><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{honor})]]}} {{fumble=[[ceil(95+([[(@{honor})]])/20))]]}} {{crit=[[round(([[(@{honor})]])/20)+1]]}}  {{special=[[round(([[(@{honor})]])/5)+1]]}}    {{success=[[(@{honor})]]}} {{roll=[[1d100]]}} {{skillname=Honor}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{honor}]]}} {{fumble=[[ceil(95+(@{honor}+?{Mods|0})/20)]]}} {{crit=[[round((@{honor}+?{Mods|0})/20)+1]]}}  {{special=[[round((@{honor}+?{Mods|0})/5)+1]]}}    {{success=[[@{honor}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Honor}}"><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>						
						</div>
						<br />
						<div>
							<fieldset class="repeating_passions">
								<input type="text" class="sheet-text_input" style="width:293px"  name="attr_passion" placeholder="Passion(.............)" />
								<input type="text" class="sheet-text_input sheet-percentiles" name="attr_value" value="0" />
								<button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{value})]]}} {{fumble=[[ceil(95+([[(@{value})]])/20))]]}} {{crit=[[round(([[(@{value})]])/20)+1]]}}  {{special=[[round(([[(@{value})]])/5)+1]]}}    {{success=[[(@{value})]]}} {{roll=[[1d100]]}} {{skillname=@{Passion}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value=""  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								<input type="checkbox" name="attr_passionExp" />
							</fieldset>
						</div>
						<br />

							
							<div style="border:1px solid black;border-radius:5px;padding:5px">
							
								<div style="text-align:center" class="sheet-input_label">Hit Points</div>							
								<div>
									 <div style="display:inline-block">
										<!-- value="[round((@{cursiz}+@{curcon})/2)]" -->
										<label style="font-size:0.5em;text-align:center">Max</label>
										<input style="text-align:center;width:3.5em" type="text" readonly value="0" name="attr_hp_max" />-
									 </div>
									 <div style="display:inline-block">
										<label style="font-size:0.5em;text-align:center">LHP<br />Loss</label>					
										<input style="text-align:center;width:3em;" readonly value="0" type="text" name="attr_lhp_loss"  />-
									 </div>
									 <div style="display:inline-block">
										<label style="font-size:0.5em;text-align:centee">THP<br />Loss</label>
										<input style="text-align:center;width:3.5em;" readonly value="0" type="text" name="attr_thp_loss"  />=
									 </div>
									 <div style="display:inline-block">
										<label style="font-size:0.5em;text-align:center">Cur.<br />HP</label>					
										<input style="text-align:left;width:3em;" value="0" type="text" readonly name="attr_hp_cur"  />
									 </div>
									 <div style="display:inline-block">
										<label style="font-size:0.5em;text-align:center">THP Wounds</label>					
										<input style="text-align:center;width:11em;" value="0+0" type="text" name="attr_thp_wnds"  />
									 </div>	
								</div>	 
							</div><!-- -->
							<br />
							<!-- Start of hit locations and fumbles -->
							<div style="border:1px solid black;padding:5px;border-radius:5px">
								<div style=" margin-left:50px;">
								  <div style="margin-left: 5px;display:inline">
									<div class="sheet-input_label">Dodge</div>
									 <input  class="sheet-section-header sheet-percentiles" readonly type="text" name="attr_dodge"/>
									 <button  class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{dodge})]]}} {{fumble=[[ceil(95+([[(@{dodge})]])/20))]]}} {{crit=[[round(([[(@{dodge})]])/20)+1]]}}  {{special=[[round(([[(@{dodge})]])/5)+1]]}}    {{success=[[(@{dodge})]]}} {{roll=[[1d100]]}} {{skillname=Dodge}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button  class="sheet-d100_roll"  type="roll"  value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{dodge}]]}} {{fumble=[[ceil(95+(@{dodge}+?{Mods|0})/20)]]}} {{crit=[[round((@{dodge}+?{Mods|0})/20)+1]]}}  {{special=[[round((@{dodge}+?{Mods|0})/5)+1]]}}    {{success=[[@{dodge}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Dodge}}"><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								  </div>
								  <div style="margin-left: 5px;display:inline">
									 <div class="sheet-input_label">Fumble</div>
									 <button  class="sheet-d100_roll"  type="roll" value="&{template:RQG-Fumble} {{roll=[[1d100]]}}"><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								  </div>
								</div>
								<div>
									<div style="display:inline;margin-left:21px;">
										<div class="sheet-input_label">Hit Location</div>
										<select name="attr_creature_hit_location" style="margin-top: 7px; height: 24px ; width: 106px">
										   <option value="HL-">Human</option>
										   <option value="FLL-">Four-Legged</option>
										   <option value="NewtL-">Newtling</option>
										   <option value="ScorpL-">Scorpion Man</option>				   
										   <option value="WalkL-">Walktapus</option>			   
										</select>
										<input  name="attr_selected_wpn_type" value="Melee" style="display:none;" />
									</div>
									<div style="margin-left:10px;display:inline">
										<div class="sheet-input_label">Die</div>
										<select name="attr_selected_die_roll" style="margin-top: 7px; height: 24px ; width: 84px">
										   <option value="1d20">1d20</option>
										   <option value="1d10+10">1d10+10</option>
										   <option value="1d8+12">1d8+12</option>
										   <option value="1d10">1d10</option>
										   <option value="1d8">1d8</option>			   			   
										</select>
										<button class="sheet-d100_roll" type="roll" value="&{template:@{creature_hit_location}@{selected_wpn_type}} {{roll=[[@{selected_die_roll}]]}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									</div>
								</div>
							</div>
							<!-- Start of hit locations and fumbles -->						
							
							<br />
							<div class="sheet-header">Combat Notes</div>
							<textarea style="width:95%;min-height:200px" name="attr_combat-notes"></textarea>
							
					</div><!-- endofcolumn-->

					<div class='sheet-col' style="width:45%;margin-right:1px">

						<div class="sheet-header" style="display:inline-block">Cults</div>
						 <div class="sheet-cdiv2" style="display:inline-block">
							<input class="sheet-HideConfig2" type="checkbox" checked="checked" name="attr_is_config2"><span class="sheet-is-config2"><span style="font-family: &quot;pictos&quot;">y</span></span>
							<div class="sheet-config2" style="border-style: dotted ; border-color: gray ; padding: 5px ; background-color: white ; background-image: none">
							
								<input type="checkbox" name="attr_showsorcery" checked="checked">Show Sorcery<br>

							</div>
						</div>	
								
						<fieldset class="repeating_cults3">
							<div class="sheet-info">
								<div class="sheet-input_label">Cult</div><input type="text" style="width:102px;" class="sheet-text_input" name="attr_cult" />
								<div class="sheet-input_label">Rank</div><input type="text" style="width:69px;" class="sheet-text_input" name="attr_rank" />
								<div class="sheet-input_label">Rune Pts</div><input type="text" value="0" style="width:24px" class="sheet-text_input" name="attr_rune_pts" >/<input  style="width:24px" type="text" value="0" class="sheet-text_input sheet-percentiles" name="attr_cur_rune_pts"  />
							</div>
							<div>
								<div class="sheet-input_label">Sub- or Assoc. Cults</div><input type="text"  class="sheet-text_input" name="attr_assoc_cults" >
							
							</div>

						</fieldset>
						<br />
						<div class="sheet-header">Spirit Combat</div>
						<div>
							<div class="sheet-input_label">Spirit Combat</div>
							<input type="text" value="0" style="width:24px;margin-right:5px;" class="sheet-text_input" name="attr_spirit_combat" /><button type="roll" class="sheet-d100_roll"  value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{spirit_combat})]]}} {{fumble=[[ceil(95+([[(@{spirit_combat})]])/20))]]}} {{crit=[[round(([[(@{spirit_combat})]])/20)+1]]}}  {{special=[[round(([[(@{spirit_combat})]])/5)+1]]}}    {{success=[[(@{spirit_combat})]]}} {{roll=[[1d100]]}} {{skillname=Spirit Combat}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" />
							</button><button class="sheet-d100_roll" type="roll" style="margin-right:5px;" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[@{spirit_combat}]]}} {{fumble=[[ceil(95+(@{spirit_combat}+?{Mods|0})/20)]]}} {{crit=[[round((@{spirit_combat}+?{Mods|0})/20)+1]]}}  {{special=[[round((@{spirit_combat}+?{Mods|0})/5)+1]]}}    {{success=[[@{spirit_combat}+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Spirit Combat}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><div class="sheet-input_label">Damage</div><input type="text" value="" style="width:50px" class="sheet-text_input" readonly name="attr_sprt_cmbt_damage" /><button type="roll" class="sheet-d100_roll" value="[[@{sprt_cmbt_damage}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
						</div>
						<br />
						<div class="sheet-header" >Spirit Magic</div>
						<div style="margin-left:210px;display:inline-block">
							<div class="sheet-input_label">CHA Limit</div>
							<input  style="width:24px" type="text" value="0" class="sheet-text_input sheet-percentiles" readonly name="attr_curchr"/>
							 <button type="roll"  class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curpow}*5)]]}} {{fumble=[[ceil(95+([[(@{curpow}*5)]])/20))]]}} {{crit=[[round(([[(@{curpow}*5)]])/20)+1]]}} {{special=[[round(([[(@{curpow}*5)]])/5)+1]]}}         {{success=[[(@{curpow}*5)]]}} {{roll=[[1d100]]}} {{skillname=Spirit Magic}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curpow}*5)]]}} {{fumble=[[ceil(95+([[(@{curpow}*5)+?{Mods|0}]])/20))]]}} {{crit=[[round(([[(@{curpow}*5)+?{Mods|0}]])/20)+1]]}} {{special=[[round(([[(@{curpow}*5)+?{Mods|0}]])/5)+1]]}}         {{success=[[(@{curpow}*5)+?{Mods|0}]]}} {{roll=[[1d100]]}} {{skillname=Spirit Magic}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button> 
						</div>	
						<textarea  name="attr_spirit_magic" class="sheet-magic_notes"></textarea> 
						<br />
						<div class="sheet-header" style="display:inline-block">Rune Magic</div>
						<textarea  name="attr_rune_magic" class="sheet-magic_notes"></textarea> 
						<br />
						<input type="checkbox" class="sheet-showsorcery" name="attr_showsorcery" checked="checked" style="display: none">
						<div class="sheet-sorcery">
							<div class="sheet-header" >Sorcerous Runes and Techniques</div>
							<div style="margin-left:266px;display:inline-block">
								<div class="sheet-input_label">Free INT</div>
								<input  style="width:24px" type="text" value="0" class="sheet-text_input sheet-percentiles" readonly name="attr_curint"/>
								<!--
								 <button type="roll"  class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curpow}*5)]]}} {{fumble=[[ceil(95+([[(@{curpow}*5)]])/20))]]}} {{crit=[[round(([[(@{curpow}*5)]])/20)+1]]}} {{special=[[round(([[(@{curpow}*5)]])/5)+1]]}}         {{success=[[(@{curpow}*5)]]}} {{roll=[[1d100]]}} {{skillname=POW Roll}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{curpow}*?{multiplier|5})]]}} {{fumble=[[ceil(95+([[(@{curpow}*?{multiplier|5})]])/20))]]}} {{crit=[[round(([[(@{curpow}*?{multiplier|5})]])/20)+1]]}} {{special=[[round(([[(@{curpow}*?{multiplier|5})]])/5)+1]]}}         {{success=[[(@{curpow}*?{multiplier|5})]]}} {{roll=[[1d100]]}} {{skillname=POW Roll}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>--> 
							</div>	
							<textarea  name="attr_sorcery_magic" class="sheet-magic_notes"></textarea> 
							<br />
						</div>
						<div class="sheet-header" >Magic Points & Storage</div>	
						<div class="sheet-melee_wpns_labels">
							   <div style="margin-left:3px;">Location</div>
							   <div style="margin-left:250px;">Max.</div>
							   <div style="margin-left:0px;">Cur.</div>
						</div>						
						<div>
							<span>Personal</span>
							<input  style="width:24px;margin-left:246px" type="text" value="0" class="sheet-text_input sheet-percentiles" readonly name="attr_curpow"/>
							<input  style="width:24px" type="text" value="0" class="sheet-text_input sheet-percentiles"  name="attr_curmp"/>
						</div>   
						<fieldset class="repeating_mp_storage">
							<input  style="width:302px" type="text"  class="sheet-text_input" name="attr_mp_location"/>
							<input  style="width:24px" type="text" value="0" class="sheet-text_input sheet-percentiles"  name="attr_maxmp"/>
							<input  style="width:24px" type="text" value="0" class="sheet-text_input sheet-percentiles"  name="attr_curmp"/>
						</fieldset>
						<br />
						<div class="sheet-header" >Magic Notes</div>	
						<textarea  name="attr_magic_notes" style="min-height:200px;"></textarea> 

					</div>				
				</div>			
			<hr class="sheet-hr" />
						<div class="sheet-header">Weapons</div>
						<br />
						<div style="margin-left:194px;margin-bottom:10px;">
							<div>
								<div CLASS="sheet-input_label">Modifiers</div>
								
								<!--<select name="attr_skillReduct" style="width:100px;display:inline-block" >
									<option value="1">Full Skill</option>
									<option value="0.5">Half Skill</option>
								</select>-->
								<input type="text"  style="display:inline-block"  class="sheet-text_input sheet-percentiles" value="0" name="attr_skillMods" />
							</div>
						</div>				  
						   
						<div class="sheet-melee_wpns_labels">
							   <div style="margin-left:3px;">Melee Weapon</div>
							   <div style="margin-left:30px;">Skill Used</div>
							   <div style="margin-left:54px;">Default</div>
							   <div style="margin-left:3px;">WSR</div>
							   <div style="margin-left:15px;">SR</div>
							   <!--<div style="margin-left:14px;">STR/DEX</div>-->	   
							   <div style="margin-left:20px;">%</div>
							   <div style="margin-left:41px;">Damage</div>
							   <div style="margin-left:8px;">*</div>							   							   
							   <div style="margin-left:4px;">Type</div>
							   <div style="margin-left:8px;">Special</div>						   
							   <div style="margin-left:6px;" >HP</div>		
						</div>						
						<fieldset class="repeating_melee2">
						   <div class="sheet-melee_wpns">

					   
							  <input type="text" class="sheet-text_input sheet-skillName" name="attr_weapon_type"  />
							  <input type="text"  class="sheet-text_input sheet-skillName"  name="attr_skillName" />						  	
							  <input type="checkbox" style="margin-left:10px;margin-right:7px" name="attr_skillDefault" />	
							 <input type="text"  style="display:none"  value="1" name="attr_skillReduct" />						  								  
	
							<input type="text"  style="margin-left:1px" class="sheet-text_input sheet-percentiles" value="0"  name="attr_wpn_sr" />
							  <input type="text" class="sheet-text_input sheet-percentiles"  disabled name="attr_total_wpn_sr" value="[@{wpn_sr}+@{melee_srm}]" />
							  
							  <!--<input type="text" class="sheet-text_input sheet-percentiles"   style="width:22px;margin-left:1px" value="9" name="attr_wpnstr" />
							  <input type="text" class="sheet-text_input sheet-percentiles"   style="width:22px" value="9" name="attr_wpndex" />--> 
							  <input type="text"  class="sheet-text_input sheet-percentiles"  readonly style="display:none; width:30px;" value="0" name="attr_minmod" /> 							  
							  <input type="text"  class="sheet-text_input sheet-percentiles" readonly name="attr_skillTotal" />					  
							  <!--
							  <input type="text"  class="sheet-text_input sheet-percentiles"  name="attr_wpn_attk_value" />
							  <input type="text"  class="sheet-text_input sheet-percentiles" disabled name="attr_wpn_attk_total" value="@{wpn_attk_value}+@{manipulation_mod}+@{enc_mod}+@{minmod}+@{gen_mod}" />-->
							  
											<button  type="roll" style="margin-right:0px;margin-left:0px;" class="sheet-d100_roll" value="@{melee_value}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
											
											
											<textarea name="attr_melee_value" style="display:none">&{template:melee-roll2} {{name=@{character_name}}} {{tot=[[@{wpn_damage}+@{damagebonus}]]}}{{skillvalue=(@{skillTotal})}} {{fumble=[[95+ceil(([[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]]/20))]]}} {{crit=[[round([[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]]/20)+1]]}} {{special=[[round(([[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]])/5)+1]]}}   {{spclDam=[[@{spcldamage}+@{damagebonus}]]}}   {{crshDam=[[@{wpn_damage}+@{maxDb}]]}}  {{critCrsh=[[@{critdamage}+@{maxDb}]]}} {{critSI=[[@{critdamage}+@{damagebonus}]]}} {{type="[[@{wpn_spl}"]]}}  {{success=[[ceil(ceil((@{skillTotal}*@{skillReduct})))+@{skillMods}]]}} {{roll=[[1d100]]}} {{skillname=@{weapon_type}}} {{mntTogVal=[[@{mntTogVal}]]}} {{mntTot=[[@{wpn_damage}+@{mountDB}]]}} {{mntSpcl=[[@{spcldamage}+@{mountDB}]]}} {{mntCrit=[[@{critdamage}+@{mountDB}]]}}
										                                
											
											

											&{template:@{creature_hit_location}Melee}} {{roll=[[@{selected_die_roll}]]}}</textarea>
											
																		
							  <input type="text"  class="sheet-text_input" style="width:52px" name="attr_wpn_damage" />
							  <input type="text"  style="display:none" name="attr_spcldamage" />
							  <input type="text"  style="display:none" name="attr_critdamage" />
							  <input type="text"  style="display:none" name="attr_maxdamage" />

							  <input type="checkbox"  name="attr_mntDbToggle" />
								
							  <input type="text" style="display:none"  value="0"  name="attr_mntTogVal" />								

							  <input  type="text" name="attr_wpn_type" title="C,CT,H,I,S"   style="width:35px">

							  <select name="attr_wpn_spl" style="margin-bottom:0px;width:43px">
								<option value="0">I</option>
								<option value="1">S</option>
								<option value="2">C</option>							
							  </select>							   
							  <input type="text"  class="sheet-text_input sheet-percentiles" value="0" style="width:23px" name="attr_wpn_hp" />
							  <input type="text"  class="sheet-text_input sheet-percentiles" value="0" style="width:23px" name="attr_wpn_hpmax" />
							  
							  <input type="checkbox" name="attr_skillcheck" />	
							  
							  
						   </div>


						   
						</fieldset>		
						<div>
							<span class="sheet-input_label">* Use mount's damage bonus</span>
							<input class="sheet-text_input" value="0"	type="text" style="width:50px" title="Mount Damage Bonus" name="attr_mountDB"/>
						</div>
						<!--- end of melee wpns -->
		
						<br >
						<!-- missile wpns -->
						<br />
							<div class="sheet-melee_wpns_labels">
							   <div style="margin-left:3px;">Missile Weapon</div>
							   <div style="margin-left:24px;">Skill Used</div>	
							   <div style="margin-left:54px;">Default</div>							   
							   <!--<div style="margin-left:47px;">STR/DEX</div> -->
							   <div style="margin-left:3px;">%</div>
							   <div style="margin-left:48px;">Dmg.</div>
							   <div style="margin-left:10px;">DB</div>
							   <div style="margin-left:3px;">Special</div>						   
							   <div style="margin-left:8px;">Rng</div>		
							   <div style="margin-left:4px;">Rate</div>		
							   <div style="margin-left:12px;" >HP</div>		
							</div>						
						
						<fieldset class="repeating_missle2">
						   <div class="sheet-melee_wpns">
							  <input type="text" class="sheet-text_input sheet-skillName" name="attr_weapon_type" style="font-size:xx-small" />
							  <!--	
							  <input type="text" class="sheet-text_input sheet-percentiles"   style="width:22px;margin-left:1px" value="9" name="attr_wpnstr" />
							  <input type="text" class="sheet-text_input sheet-percentiles"   style="width:22px" value="9" name="attr_wpndex" />-->
							  <input type="text"  class="sheet-text_input sheet-percentiles"  readonly style="display:none; width:30px;" value="0" name="attr_minmod" /> 	
							  <input type="text"  class="sheet-text_input sheet-skillName" style="font-size:xx-small"  name="attr_skillName" />
							  <input type="checkbox" style="margin-left:10px;margin-right:7px" name="attr_skillDefault" />	
							 <input type="text"  style="display:none"  value="1" name="attr_skillReduct" />							  
							  <input type="text"  class="sheet-text_input sheet-percentiles" readonly name="attr_skillTotal" />						  
							  <!--
							  <input type="text"  class="sheet-text_input sheet-percentiles"  name="attr_wpn_attk_value" />
							  <input type="text"  class="sheet-text_input sheet-percentiles" disabled name="attr_wpn_attk_total" value="@{wpn_attk_value}+@{manipulation_mod}+@{enc_mod}+@{minmod}+@{gen_mod}" />-->
							  

							  
											<button  type="roll" style="margin-right:0px;margin-left:0px;" class="sheet-d100_roll" value="@{melee_value}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><textarea name="attr_melee_value" style="display:none">&{template:melee-roll2} {{name=@{character_name}}} {{tot=[[@{wpn_damage}+@{wpnmdb}]]}}{{skillvalue=(@{skillTotal})}} {{fumble=[[95+ceil(([[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]]/20))]]}} {{crit=[[round([[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]]/20)+1]]}} {{special=[[round(([[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]])/5)+1]]}}   {{spclDam=[[@{spcldamage}+@{wpnmdb}]]}}   {{crshDam=[[@{wpn_damage}+@{maxwpnmdb}]]}}  {{critCrsh=[[@{critdamage}+@{maxwpnmdb}]]}} {{critSI=[[@{critdamage}+@{wpnmdb}]]}} {{type="[[@{wpn_spl}"]]}}  {{success=[[ceil((@{skillTotal}*@{skillReduct}))+@{skillMods}]]}} {{roll=[[1d100]]}} {{skillname=@{weapon_type}}} 

											&{template:@{creature_hit_location}Melee}} {{roll=[[@{selected_die_roll}]]}}</textarea>
											
																		
							  <input type="text"  class="sheet-text_input" style="width:51px" name="attr_wpn_damage" />
							  <input type="checkbox"  name="attr_mdbtoggle" />
							  <input type="text"  style="display:none" name="attr_spcldamage" />
							  <input type="text"  style="display:none" name="attr_critdamage" />
							  <input type="text"  style="display:none" name="attr_maxdamage" />

							  <select name="attr_wpn_spl" style="margin-bottom:0px;width:50px">
								<option value="0">I</option>
								<option value="1">S</option>
								<option value="2">C</option>							
							  </select>								  
							  <input type="text"  class="sheet-text_input" style="width:27px;font-size:xx-small" name="attr_wpn_range" />    
							  <input type="text"  class="sheet-text_input" style="width:30px;font-size:xx-small" name="attr_wpn_rate" />    						  
							  <input type="text"  class="sheet-text_input sheet-percentiles"   name="attr_wpn_hp" />
							  <input type="checkbox" name="attr_skillcheck" />
							  <input type="text" value="0" style="display:none" name="attr_wpnmdb" />	  
							  <input type="text" value="0" style="display:none" name="attr_maxwpnmdb" />	  
										
							  
						   </div>
						</fieldset>				
			
		</div>
		<div class="sheet-tab-content sheet-tab2"><!--- Tab 2 start -->
		<div >
			
			<div>
			<span style="margin-left:171px">Enc Mod</span>
			<input class="sheet-text_input sheet-char_inputs sheet-percentiles"  value="0" type="text" readonly name="attr_enc_mod2"/>	
			
			<span style="margin-left:8px">Dodge Mod</span>
			<input class="sheet-text_input sheet-char_inputs sheet-percentiles"  value="0"  type="text"  readonly  name="attr_dodge_mod2"/>

			<span style="margin-left:8px">Swim Mod</span>
			<input class="sheet-text_input sheet-char_inputs sheet-percentiles"  value="0"  type="text"  readonly  name="attr_swim_mod2"/>
			
			<span style="margin-left:8px">Skill Mod</span>
			<input class="sheet-text_input sheet-char_inputs sheet-percentiles"  value="0"  type="text"   name="attr_skill_mod"/>			
		</div>
			<br />
			<div class='sheet-2colrow'>
				<div style="margin-left:3px;margin-right:3px;width:31%" class='sheet-col'>

					<div> 
						<div class="sheet-skill_category">Agility</div>
						<div style="display:inline-block;margin-left:69px;">
							<span><b>Modifier</b></span>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_agility_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{agility_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
						</div>
						
						<fieldset class="repeating_agilitySkills">
							<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
							<input type="checkbox" name="attr_expCheck" />

							
						</fieldset>
						<br />
						<div class="sheet-skill_category">Communication</div>
						<div style="display:inline-block;margin-left:9px;">
							<span><b>Modifier</b></span>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_communication_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{communication_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
						</div>
						
						<fieldset class="repeating_communicationSkills">
							<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
							<input type="checkbox" name="attr_expCheck" />
						</fieldset>
						<br />					
						<div class="sheet-skill_category">Knowledge</div>
						<div style="display:inline-block;margin-left:40px;">
							<span><b>Modifier</b></span>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_knowledge_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{knowledge_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
						</div>
						
						<fieldset class="repeating_knowledgeSkills">
							<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
							<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
							<input type="checkbox" name="attr_expCheck" />
						</fieldset>
						<br />							
					</div>
					

				</div>
				<!--- ------------------------------------------------------------------ -->
				<div style="margin-left:0px;width:66%" class='sheet-col'>
				
					<div class='sheet-2colrow'>
					
						<div style="margin-right:10px" class='sheet-col'>
								<div class="sheet-skill_category">Magic</div>
								<div style="display:inline-block;margin-left:75px;">
									<span><b>Modifier</b></span>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_magic_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{magic_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								</div>
								
								<fieldset class="repeating_magicSkills">
									<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									<input type="checkbox" name="attr_expCheck" />							
								</fieldset>
								<br />
								<div class="sheet-skill_category">Manipulation</div>
								<div style="display:inline-block;margin-left:29px;">
									<span><b>Modifier</b></span>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_manipulation_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{manipulation_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								</div>
								
								<fieldset class="repeating_manipulationSkills">
									<input type="text"  class="sheet-text_input sheet-skillName" name="attr_skill" />
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									<input type="checkbox" name="attr_expCheck" />							
								</fieldset>
								<br />	
								<div class="sheet-skill_category">Perception</div>
								<div style="display:inline-block;margin-left:43px;">
									<span><b>Modifier</b></span>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_perception_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{preception_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								</div>
								
								<fieldset class="repeating_perceptionSkills">
									<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									<input type="checkbox" name="attr_expCheck" />							
								</fieldset>
								<br />
								<div class="sheet-skill_category">Stealth</div>
								<div style="display:inline-block;margin-left:66px;">
									<span><b>Modifier</b></span>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_stealth_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{stealth_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
								</div>
								
								<fieldset class="repeating_stealthSkills">
									<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
									<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									<input type="checkbox" name="attr_expCheck" />
								</fieldset>
								<br />							
								
						</div><!--- end 2nd col -->	
							<div style="margin-right:10px" class='sheet-col'>
									<div class="sheet-skill_category">Melee Weapons</div>
									<div style="display:inline-block;margin-left:9px;">
										<span><b>Modifier</b></span>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_manipulation_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{manipulation_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									</div>
									
									<fieldset class="repeating_meleeSkills">
										<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
										<input type="checkbox" name="attr_expCheck" />							
									</fieldset>
									<br />
									<div class="sheet-skill_category">Missile Weapons</div>
									<div style="display:inline-block;margin-left:4px;">
										<span><b>Modifier</b></span>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_manipulation_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{manipulation_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									</div>
									
									<fieldset class="repeating_missileSkills">
										<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
										<input type="checkbox" name="attr_expCheck" />
									</fieldset>
									<br />
									<div class="sheet-skill_category">Shields</div>
									<div style="display:inline-block;margin-left:63px;">
										<span><b>Modifier</b></span>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_manipulation_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{manipulation_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
									</div>
									
									<fieldset class="repeating_shieldSkills">
										<input type="text" class="sheet-text_input sheet-skillName" name="attr_skill" />
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
										<input type="checkbox" name="attr_expCheck" />

									</fieldset>
									<br />
									<div class="sheet-skill_category">Natural Weapons</div>
									<div style="display:inline-block;margin-left:-1px;">
										<span><b>Modifier</b></span>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" readonly name="attr_manipulation_mod"/><button type="roll" class="sheet-d100_roll" value="/r [[1d00+@{manipulation_mod}]]"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
										<input type="checkbox" name="attr_expCheck" />

									</div>
									
									<fieldset class="repeating_naturalWpnSkills">
										<input type="text"  class="sheet-text_input sheet-skillName" name="attr_skill" />
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_base"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2"  value="0" style="display:none" name="attr_base2"/>
										<input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" name="attr_skillValue"/><input type="text" value="0" class="sheet-text_input sheet-skill_values2" value="0" readonly name="attr_skillTotal" /><button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[ceil(95+([[(@{skillTotal}+@{skill_mod})]])/20))]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"  ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>
										<input type="checkbox" name="attr_expCheck" />
									</fieldset>
									<br />
							</div>										
					</div>
				
					<br />
					<hr class="sheet-hr">
					<div class="sheet-skill_category">Addtional Magic</div>
					<textarea style="width:95%;min-height:100px;" name="attr_add_magic"></textarea>
					<br />

					<div class="sheet-skill_category">Equipment</div>				
					<div >
		
						<p style="font-weight:bold; display:inline-block">Carried</p>
						<p style="font-weight:bold; width:73%; display:inline-block;margin-left:13px">Item</p>
						<p style="font-weight:bold;text-align:center;width: 10% ;display:inline-block">Wt.</p>
						
						<fieldset class="repeating_equipment2" style="margin-top:-20px;">
							<input  type="checkbox" value="1" style="margin-left:17px" name="attr_carried"/>
							<input class="sheet-text_input sheet-eqpText" style="margin-left:27px;width: 75% ;" type="text" name="attr_equipment_type"/>
							<input class="sheet-text_input sheet-char_inputs sheet-percentiles" type="text" name="attr_equipment_weight"/>
						</fieldset>	
						<br />
						<span>Max Enc</span>
						<input class="sheet-text_input sheet-char_inputs sheet-percentiles"  type="text" name="attr_carry_max2"/>
						<span style="margin-left:8px">Total Enc</span>								
						<input class="sheet-text_input sheet-char_inputs sheet-percentiles"  type="text" name="attr_carry_total2"/>
							
							
						</div>
						

					</div>					
					
				</div>
			</div><!-- end of first 2 col	-->
			<hr class="sheet-hr" />
			
			<!--- animals ------------------------------->
				<div style="font-size:x-small;background-color: white; 5px;border-radius: 6px;" >
					<label style="margin-left:8px" class="sheet-header">Animals/Allies</label>
					<div class='sheet-2colrow'>
						<div style="margin-left:4px" class="sheet-col">
							<div style="margin-bottom:5px;">
								<input class="sheet-value_display" type="text" value="name and type " style="width:244px;" name="attr_animal1_name" />
							</div>
							<div>
								<p class="sheet-spirit_stat">STR</p> <input class="sheet-value_display" value="0" name="attr_animal1a_str" type="number"/> 
								<p class="sheet-spirit_stat">CON</p><input class="sheet-value_display" value="0" name="attr_animal1a_con" type="number" />
								<p class="sheet-spirit_stat">SIZ</p><input class="sheet-value_display" value="0" name="attr_animal1a_siz" type="number"/>
							</div>
							<div>
								<p class="sheet-spirit_stat">INT</p> <input class="sheet-value_display" value="0" name="attr_animal1a_int" type="number"/> 
								<p class="sheet-spirit_stat">POW</p><input class="sheet-value_display" value="0" name="attr_animal1a_pow" type="number" />
								<p class="sheet-spirit_stat">DEX</p><input class="sheet-value_display" value="0" name="attr_animal1a_dex" type="number"/>
			
							</div>
							<br />
							<table>
									<tr>
										<td>HP</td>
										<td>
											<input type="number" class="sheet-value_display" name="attr_animal1a_hp_max" value="0" />
											/
											<input type="number"  class="sheet-value_display" value="" name="attr_animal1a_hp_cur" />
										</td>	

										<td>Move</td>
										<td>
												<input type="number"  class="sheet-value_display"  name="attr_animal1a_move" value="0" />
										</td>
										
									</tr>
									<tr>
									</tr>
									<tr>
										<td>MP</td>
										<td>
											<input type="number" class="sheet-value_display"  name="attr_animal1a_mp_max" value="0" />
											/
											<input type="number"  class="sheet-value_display" value="" name="attr_animal1a_mp_cur" />
										</td>										<td>DSR</td>
										<td>
										<input type="number"  class="sheet-value_display"  name="attr_animal1a_dsr" value="0" />
										</td>
									</tr>
									<tr>
										<td>DB</td>
										<td><input type="text"  class="sheet-value_display"  name="attr_animal1a_db" style="width:105px;" value="0" /></td>
										<td>MSR</td>
										<td><input type="number"  class="sheet-value_display"  name="attr_animal1a_msr" value="0" />
										</td>

									</tr>
							</table>
							</br />
							
							<div style="margin-top:5px;" class="sheet-melee_wpns_labels">
								<br />
							   <label style="width:98px">Weapon</label>
							   <label style="width:34px">SR</label>   
							    <label style="width:74px">Attk</label>   
							   <label style="width:71px">Damage</label>   
							</div>	
							
							<fieldset class="repeating_animal1wpns" >
								<input   class="sheet-value_display"  type="text" name="attr_wpn_name" style="text-align:left;width:100px;" value="weapon" />
								<input   class="sheet-value_display" type="number" name="attr_wpn_sr" value="0" />
								<input  class="sheet-value_display" type="number" name="attr_wpn_attk" value="0" />
								<input  class="sheet-value_display"  type="text" style="width:80px" name="attr_wpn_damage" value="0" />
								<button type="roll"  class="sheet-d100_roll" value="&{template:melee-roll} {{name=@{animal1_name}}} {{tot=[[@{wpn_damage}]]}}  {{skillvalue=[[@{wpn_attk}]]}} {{fumble=[[ceil(95+([[@{wpn_attk}]])/20))]]}} {{crit=[[ceil(([[@{wpn_attk}]])/20)+1]]}} {{special=[[ceil(([[@{wpn_attk}]])/5)+1]]}}         {{success=[[@{wpn_attk}]]}} {{roll=[[1d100]]}} {{skillname=@{wpn_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button class="sheet-d100_roll" type="roll" style="margin:0px;" value="&{template:melee-roll} {{name=@{animal1_name}}} {{tot=[[@{wpn_damage}]]}}  {{skillvalue=[[@{wpn_attk}+?{mods|0}]]}} {{fumble=[[ceil(95+([[@{wpn_attk}+?{mods|0}]])/20))]]}} {{crit=[[ceil(([[@{wpn_attk}+?{mods|0}]])/20)+1]]}} {{special=[[ceil(([[@{wpn_attk}+?{mods|0}]])/5)+1]]}}         {{success=[[@{wpn_attk}+?{mods|0}]]}} {{roll=[[1d100]]}} {{skillname=@{wpn_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>								
								
							</fieldset>
							<br />
							
							<div style="margin-top:5px;" class="sheet-melee_wpns_labels">
								<br />
							   <label style="width:237px">Skill</label>
							   <label style="width:74px">&#37;</label>   
							</div>	
							
							<fieldset class="repeating_animal1skills" >
								<input   class="sheet-value_display"  type="text" name="attr_skill_name" style="text-align:left;width:232px;" value="skill" />
								<input  class="sheet-value_display" type="number" name="attr_skill_value" value="0" />
								<button type="roll" class="sheet-d100_roll" value="&{template:skillRoll} {{name=@{animal1_name}}}  {{skillvalue=[[@{skill_value}]]}} {{fumble=[[ceil(95+([[@{skill_value}]])/20))]]}} {{crit=[[ceil(([[@{skill_value}]])/20)+1]]}} {{special=[[ceil(([[@{skill_value}]])/5)+1]]}}         {{success=[[@{skill_value}]]}} {{roll=[[1d100]]}} {{skillname=@{skill_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button  class="sheet-d100_roll"  type="roll" style="margin:0px;" value="&{template:skillRoll} {{name=@{animal1_name}}}  {{skillvalue=[[@{skill_value}]]}} {{success=[[@{skill_value}+?{mods|0}]]}}  {{fumble=[[ceil(95+([[@{skill_value}+?{mods|0}]])/20))]]}} {{crit=[[ceil(([[@{skill_value}+?{mods|0}]])/20)+1]]}} {{special=[[ceil(([[@{skill_value}+?{mods|0}]])/5)+1]]}}         {{roll=[[1d100]]}} {{skillname=@{skill_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>									


								
							</fieldset>
							
							<p>Hit Locations</p>
							<textarea style="font-family:courier;margin:0px;" name="attr_animal1_hitloc" >
D20	Result         AP/HP
1-2	Right hind-leg	0/0
3-4 	Left hind-leg	0/0
5-7 	Hindquarters	0/0
8-10 	Forequarters 	0/0
11-13 	Right fore-leg	0/0
14-16 	Left fore-leg	0/0
17-20 	Head        	0/0
							</textarea>
							
							<br />							
							<p>Notes</p>
							<textarea style="font-family:courier;margin:0px;" name="attr_animal2_notes" ></textarea>
						</div> <!--  Animal 1 -->
						<!--- Animal 2 -->	
						<div class="sheet-col"> 
							<div style="margin-bottom:5px;">
								<input class="sheet-value_display" type="text" value="name and type " style="width:244px;" name="attr_animal2_name" />
							</div>
							<div>
								<p class="sheet-spirit_stat">STR</p> <input class="sheet-value_display" value="0" name="attr_animal2a_str" type="number"/> 
								<p class="sheet-spirit_stat">CON</p><input class="sheet-value_display" value="0" name="attr_animal2a_con" type="number" />
								<p class="sheet-spirit_stat">SIZ</p><input class="sheet-value_display" value="0" name="attr_animal2a_siz" type="number"/>
							</div>
							<div>
								<p class="sheet-spirit_stat">INT</p> <input class="sheet-value_display" value="0" name="attr_animal2a_int" type="number"/> 
								<p class="sheet-spirit_stat">POW</p><input class="sheet-value_display" value="0" name="attr_animal2a_pow" type="number" />
								<p class="sheet-spirit_stat">DEX</p><input class="sheet-value_display" value="0" name="attr_animal2a_dex" type="number"/>
			
							</div>
							<br />
							<table>
								
									
									<tr>
										<td>HP</td>
										<td>
											<input type="number" class="sheet-value_display" readonly name="attr_animal2a_hp_max" value="0" />
											/
											<input type="number"  class="sheet-value_display" value="" name="attr_animal2a_hp_cur" />
										</td>	
											<td>Move</td>
											<td>
												<input type="number"  class="sheet-value_display"  name="attr_animal2a_move" value="0" />
											</td>
										
									</tr>
									<tr>
									</tr>
									<tr>
										<td>MP</td>
										<td>
											<input type="number" class="sheet-value_display"  name="attr_animal2a_mp_max" value="0" />
											/
											<input type="number"  class="sheet-value_display" value="" name="attr_animal2a_mp_cur" />
										</td>
										<td>DSR</td>
										<td>
										<input type="number"  class="sheet-value_display"  name="attr_animal2a_dsr" value="0" />
										</td>
									</tr>
									<tr>
										<td>DB</td>
										<td><input type="text"  class="sheet-value_display"  name="attr_animal2a_db" style="width:105px;" value="0" /></td>
										<td>MSR</td>
										<td><input type="number"  class="sheet-value_display"  name="attr_animal2a_msr" value="0" />
										</td>

									</tr>
							</table>
							</br />
							
							<div style="margin-top:5px;" class="sheet-melee_wpns_labels">
								<br />
							   <label style="width:98px">Weapon</label>
							   <label style="width:34px">SR</label>   
							   <label style="width:74px">Attk</label>   
							   <label style="width:71px">Damage</label>   
							</div>	
							
							<fieldset class="repeating_animal2wpns" >
								<input   class="sheet-value_display"  type="text" name="attr_wpn_name" style="text-align:left;width:100px;" value="weapon" />
								<input   class="sheet-value_display" type="number" name="attr_wpn_sr" value="0" />
								<input  class="sheet-value_display" type="number" name="attr_wpn_attk" value="0" />
								<input  class="sheet-value_display"  type="text" style="width:80px" name="attr_wpn_damage" value="0" />
								<button type="roll" class="sheet-d100_roll" value="&{template:melee-roll} {{name=@{animal1_name}}} {{tot=[[@{wpn_damage}]]}}  {{skillvalue=[[@{wpn_attk}]]}} {{fumble=[[ceil(95+([[@{wpn_attk}]])/20))]]}} {{crit=[[ceil(([[@{wpn_attk}]])/20)+1]]}} {{special=[[ceil(([[@{wpn_attk}]])/5)+1]]}}         {{success=[[@{wpn_attk}]]}} {{roll=[[1d100]]}} {{skillname=@{wpn_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button  class="sheet-d100_roll"  type="roll" style="margin:0px;" value="&{template:melee-roll} {{name=@{animal1_name}}} {{tot=[[@{wpn_damage}]]}}  {{skillvalue=[[@{wpn_attk}]]}} {{success=[[@{wpn_attk}+?{mods|0}]]}} {{fumble=[[ceil(95+([[@{wpn_attk}+?{mods|0}]])/20))]]}} {{crit=[[ceil(([[@{wpn_attk}+?{mods|0}]])/20)+1]]}} {{special=[[ceil(([[@{wpn_attk}+?{mods|0}]])/5)+1]]}}          {{roll=[[1d100]]}} {{skillname=@{wpn_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>									
								
								
							</fieldset>
							<br />
							
							<div style="margin-top:5px;" class="sheet-melee_wpns_labels">
								<br />
							   <label style="width:237px">Skill</label>
							   <label style="width:74px">&#37;</label>   
							</div>	
							
							<fieldset class="repeating_animal2skills" >
								<input   class="sheet-value_display"  type="text" name="attr_skill_name" style="text-align:left;width:232px;" value="skill" />
								<input  class="sheet-value_display" type="number" name="attr_skill_value" value="0" />
								<button type="roll" class="sheet-d100_roll"  value="&{template:skillRoll} {{name=@{animal2_name}}} {{skillvalue=[[@{skill_value}]]}} {{fumble=[[ceil(95+([[@{skill_value}]])/20))]]}} {{crit=[[ceil(([[@{skill_value}]])/20)+1]]}} {{special=[[ceil(([[@{skill_value}]])/5)+1]]}}         {{success=[[@{skill_value}]]}} {{roll=[[1d100]]}} {{skillname=@{skill_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button><button  class="sheet-d100_roll" type="roll" style="margin:0px;" value="&{template:skillRoll} {{name=@{animal2_name}}} {{success=[[@{skill_value}+?{mods|0}]]}} {{skillvalue=[[@{skill_value}]]}} {{fumble=[[ceil(95+([[@{skill_value}+?{mods|0}]])/20))]]}} {{crit=[[ceil(([[@{skill_value}+?{mods|0}]])/20)+1]]}} {{special=[[ceil(([[@{skill_value}+?{mods|0}]])/5)+1]]}} {{roll=[[1d100]]}} {{skillname=@{skill_name}}}" ><img style="margin-top:3px;width:14px;height:auto" src="https://raw.githubusercontent.com/Lockbox313/roll20-character-sheets/master/RunequestGQS/luck.png" /></button>									
								
							</fieldset>
							
							<p>Hit Locations</p>
							<textarea style="font-family:courier;margin:0px;" name="attr_animal1_hit2oc" >
D20	Result         AP/HP
1-2	Right hind-leg	0/0
3-4 	Left hind-leg	0/0
5-7 	Hindquarters	0/0
8-10 	Forequarters 	0/0
11-13 	Right fore-leg	0/0
14-16 	Left fore-leg	0/0
17-20 	Head        	0/0
					
							</textarea>
							<br />
							<p>Notes</p>
							<textarea style="font-family:courier;margin:0px;" name="attr_animal2_notes" ></textarea>	
						</div><!-- Animal 2 -->
					</div>
				</div>			
			<!--- end animals -------------------------------!>
		</div><!---- End of Tab -->
		
		<script type="text/worker">
		//QS Workers
		
//animal 2 hit points
	on("change:animal2_con change:animal2_siz ", function() {
	   getAttrs(["animal2_con","animal2_siz"], function(values) {
				var x = parseInt(values.animal2_con);
				var y = parseInt(values.animal2_siz);
				var z = Math.round((x+y)/2,0);
				
				setAttrs({animal2_hp_max:z});	

	   });
	});
	
	//Animal 2 fatigue points
		on("change:animal2_con change:animal2_str ", function() {
	   getAttrs(["animal2_con","animal2_str"], function(values) {
				var x = parseInt(values.animal2_str);
				var y = parseInt(values.animal2_con);
				var z = x+y;
				
				setAttrs({animal2_fp_max:z});	

	   });
	});
	
		on("change:enc_totalf", function() {
	   getAttrs(["enc_totalf"], function(values) {
				var fx = parseFloat(values.enc_totalf);
				fx = Math.round(fx,0);
				setAttrs({enc_total:fx});	

	   });
	});


	
	
	//animal 1 hit points
	on("change:animal1_con change:animal1_siz ", function() {
	   getAttrs(["animal1_con","animal1_siz"], function(values) {
				var x = parseInt(values.animal1_con);
				var y = parseInt(values.animal1_siz);
				var z = Math.round((x+y)/2,0);
				
				setAttrs({animal1_hp_max:z});	

	   });
	});
	
	//Animal 1 fatigue points
		on("change:animal1_con change:animal1_str ", function() {
	   getAttrs(["animal1_con","animal1_str"], function(values) {
				var x = parseInt(values.animal1_str);
				var y = parseInt(values.animal1_con);
				var z = x+y;
				
				setAttrs({animal1_fp_max:z});	

	   });
	});
	
		on("change:enc_totalf", function() {
	   getAttrs(["enc_totalf"], function(values) {
				var fx = parseFloat(values.enc_totalf);
				fx = Math.round(fx,0);
				setAttrs({enc_total:fx});	

	   });
	});
			
		
	//SetAnimal 1 Dex SRM and melee srm
		on("change:animal1_dex change:animal1_siz", function() {
			getAttrs(["animal1_dex","animal1_siz"], function(pvalue) {
				console.log("************ Start Animal 1 DEX and  SRM Calculation ************");
				
				var charDex = parseInt(pvalue.animal1_dex);
				var charSiz = parseInt(pvalue.animal1_siz);			
				
				
				var dsrm = 0;
				var ssrm = 0;		
	
				var msrm = 0;
				
				if (charSiz < 7){
					ssrm = 3;
				} else if (charSiz < 15){
					ssrm = 2;				
				} else if (charSiz < 22){
					ssrm = 1;				
				} else {
					ssrm = 0;				
				}				

				
				
				
				if (charDex < 6){
					dsrm = 5;
				} else if (charDex < 9){
					dsrm = 4;			
				} else if (charDex < 13){
					dsrm = 3;								
				} else if (charDex < 16){
					dsrm = 2;				
				} else if (charDex < 19){
					dsrm = 1;								
				} else {
					dsrm = 0;				
				}				
				
				msrm = ssrm+dsrm;
				console.log("msrm");
				console.log(msrm);
				
				setAttrs({ animal1_dsr: dsrm , animal1_msr: msrm});
				                               
			   
				console.log("************ End Animal 1 DEX and melee SRM Calculation ************");
			});
		});			
		
		
	//SetAnimal 2 Dex SRM and melee srm
		on("change:animal2_dex change:animal2_siz", function() {
			getAttrs(["animal2_dex","animal2_siz"], function(pvalue) {
				console.log("************ Start Animal 2 DEX and  SRM Calculation ************");
				
				var charDex = parseInt(pvalue.animal2_dex);
				var charSiz = parseInt(pvalue.animal2_siz);			
				
				
				var dsrm = 0;
				var ssrm = 0;		
	
				var msrm = 0;
				
				if (charSiz < 7){
					ssrm = 3;
				} else if (charSiz < 15){
					ssrm = 2;				
				} else if (charSiz < 22){
					ssrm = 1;				
				} else {
					ssrm = 0;				
				}				

				
				
				
				if (charDex < 6){
					dsrm = 5;
				} else if (charDex < 9){
					dsrm = 4;			
				} else if (charDex < 13){
					dsrm = 3;								
				} else if (charDex < 16){
					dsrm = 2;				
				} else if (charDex < 19){
					dsrm = 1;								
				} else {
					dsrm = 0;				
				}				
				msrm = ssrm+dsrm;
				console.log("msrm");
				console.log(msrm);
				
				setAttrs({ animal2_dsr: dsrm , animal2_msr: msrm});
				                               
			   
				console.log("************ End Animal 2 DEX and melee SRM Calculation ************");
			});
		});					
		
		
		//Set Animal 1 Damage Bonus
		on("change:animal1_str change:animal1_siz", function() {
			getAttrs(["animal1_str", "animal1_siz"], function(pvalue) {
				console.log("************ Start Damage Bonus ************");
				console.log("curstr value: " + pvalue.animal1_str);
				console.log("cursiz value: " + pvalue.animal1_siz);

				var curStrength = parseInt(pvalue.animal1_str);
				var curSize = parseInt(pvalue.animal1_siz);

				var StplusSi = curStrength + curSize;
				console.log("Str+Size value: " + StplusSi);
				var DBonus = "-1d4";
				var mDBonus = "-1d2";
				var DBonusC = 0;
							
				//Determine Bonus
				if (StplusSi < 18) {
					console.log("-- Str+Siz is less than 18 --");
					DBonus = "-1d4";
					mDBonus = "-1d2";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal1_db: DBonus});
				}
				else if (StplusSi < 25) {
					console.log("-- Str+Siz is less than 25 --");
					DBonus = "0";
					mDBonus = "0";
					console.log("DBonus value: " + DBonus);
					setAttrs({animal1_db: DBonus});
				}
				else if (StplusSi < 33) {
					console.log("-- Str+Siz is less than 31 --");
					DBonus = "1d4";
					mDBonus = "1d2";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal1_db: DBonus});
				}
				else if (StplusSi < 41) {
					console.log("-- Str+Siz is less than 31 --");
					DBonus = "1d6";
					mDBonus = "1d3";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal1_db: DBonus});
				}			
				else { //StplusSi is greater than 
					DBonusC = 2+Math.floor(parseFloat((StplusSi - 40) / 16));
					console.log("DBonusC value: " + DBonusC);

					DBonus = DBonusC + "d6";
					mDBonus = DBonusC + "d3";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal1_db: DBonus});
				}            
				console.log("************ Animal 1 End Damage Bonus ************");
			});
		});
		
		
		
			//Set Agility Bonus
			on("change:curstr change:cursiz change:curdex change:curpow", function() {
				getAttrs(["version","curstr", "cursiz", "curdex", "curpow"], function(pvalue) {
					console.log("************ Start Agility Bonus ************");
					console.log("curstr value: " + pvalue.curstr);
					console.log("cursiz value: " + pvalue.cursiz);
					console.log("curdex value: " + pvalue.curdex);
					console.log("curpow value: " + pvalue.curpow);
					console.log("agibonus value: " + pvalue.agility_mod);
					console.log("parrybonus value: " + pvalue.parrybonus);
					var curStrength = parseInt(pvalue.curstr);
					var curSize = parseInt(pvalue.cursiz);
					var curDexterity = parseInt(pvalue.curdex);
					var curPower = parseInt(pvalue.curpow);
					var BonusMod = 0;
					
					
					
					if (curStrength < 5) {
						BonusMod = -5;
					}else if (curStrength >16 && curStrength < 21){
						BonusMod = 5;
					}else if (curStrength >21){
						BonusMod = 5+(ceil((curStrength-20)/4)*5);
					}
					

					if (curSize < 5) {
						BonusMod = BonusMod+5;
					} else if(curSize >16 && curStrength < 21){
						BonusMod = BonusMod-5;
					}else if (curSize >21){
						BonusMod = BonusMod - (5+(ceil((curStrength-20)/4)*5));
					}


					
					if (curDexterity < 5) {
						BonusMod = BonusMod-10;
					}else if(curDexterity >= 5 && curDexterity <= 8){
						BonusMod = BonusMod-5;
					}else if(curDexterity >= 13 && curDexterity <= 16){
						BonusMod = BonusMod+5;
					}else if(curDexterity >= 17 && curDexterity <= 20){
						BonusMod = BonusMod+10;
					}else if (curDexterity >21){
						BonusMod = BonusMod + (5+(ceil((curDexterity-20)/4)*5));
					}
					
					if (curPower < 5) {
						BonusMod = BonusMod-5;
					}else if (curPower >16 && curPower < 21){
						BonusMod = BonusMod+5;
					}else if (curPower >21){
						BonusMod = BonusMod + 5+(ceil((curPower-20)/4)*5);
					}				
				   
					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({agility_mod: BonusMod});
					console.log("************ End Agility Bonus ************");
				});
			});

			//Set Communication
			on("change:curint change:curchr change:curpow", function() {
				getAttrs(["version","curint", "curchr", "curpow"], function(pvalue) {
					console.log("************ Start Communication Bonus ************");
					console.log("curint value: " + pvalue.curint);
					console.log("curchr value: " + pvalue.curchr);
					console.log("curpow value: " + pvalue.curpow);
					
					var curInt = parseInt(pvalue.curint);
					var curPow = parseInt(pvalue.curpow);
					var curChr = parseInt(pvalue.curchr);
					
					var BonusMod = 0;
									
					
					if (curInt < 5) {
						BonusMod = BonusMod + -5;
					}else if (curInt >16 && curInt < 21){
						BonusMod = BonusMod + 5;
					}else if (curInt >21){
						BonusMod = BonusMod + (5+(ceil((curInt-20)/4)*5));
					}
					console.log("BonusMod value1: " + BonusMod);

					if (curPow < 5) {
						BonusMod = BonusMod + -5;
					}else if (curPow >16 && curPow < 21){
						BonusMod = BonusMod + 5;
					}else if (curPow >21){
						BonusMod = BonusMod + (5+(ceil((curPow-20)/4)*5));
					}
					console.log("BonusMod value2: " + BonusMod);

					
					if (curChr < 5) {
						BonusMod = BonusMod-10;
					}else if(curChr >= 5 && curChr <= 8){
						BonusMod = BonusMod-5;
					}else if(curChr >= 13 && curChr <= 16){
						BonusMod = BonusMod+5;
					}else if(curChr >= 17 && curChr <= 20){
						BonusMod = BonusMod+10;
					}else if (curChr >21){
						BonusMod = BonusMod + (5+(ceil((curChr-20)/4)*5));
					}
					console.log("BonusMod value3: " + BonusMod);				

					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({communication_mod: BonusMod});
					console.log("************ End Agility Bonus ************");
				});
			});
			
			
			
			//Set Knowledge
			on("change:curint change:curpow", function() {
				getAttrs(["version","curint", "curpow"], function(pvalue) {
					console.log("************ Start Knowledge Bonus ************");
					console.log("curint value: " + pvalue.curint);
					console.log("curpow value: " + pvalue.curpow);
					
					var curInt = parseInt(pvalue.curint);
					var curPow = parseInt(pvalue.curpow);
					
					var BonusMod = 0;
									
					
					if (curPow < 5) {
						BonusMod = BonusMod + -5;
					}else if (curPow >16 && curPow < 21){
						BonusMod = BonusMod + 5;
					}else if (curPow >21){
						BonusMod = BonusMod + (5+(ceil((curPow-20)/4)*5));
					}
					console.log("BonusMod value1: " + BonusMod);

					
					
					if (curInt < 5) {
						BonusMod = BonusMod-10;
					}else if(curInt >= 5 && curInt <= 8){
						BonusMod = BonusMod-5;
					}else if(curInt >= 13 && curInt <= 16){
						BonusMod = BonusMod+5;
					}else if(curInt >= 17 && curInt <= 20){
						BonusMod = BonusMod+10;
					}else if (curInt >21){
						BonusMod = BonusMod + (5+(ceil((curInt-20)/4)*5));
					}
					console.log("BonusMod value3: " + BonusMod);				

					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({knowledge_mod: BonusMod});
					console.log("************ End Knowledge Bonus ************");
				});
			});			
			/////////////////////////////////////////////////
			//Set Magic
			on("change:curchr change:curpow", function() {
				getAttrs(["version","curchr", "curpow"], function(pvalue) {
					console.log("************ Start Magic Bonus ************");
					console.log("curpow value: " + pvalue.curint);
					console.log("curchr value: " + pvalue.curpow);
					
					var curChr = parseInt(pvalue.curchr);
					var curPow = parseInt(pvalue.curpow);
					
					var BonusMod = 0;
									
					
					if (curChr < 5) {
						BonusMod = BonusMod + -5;
					}else if (curChr >16 && curChr < 21){
						BonusMod = BonusMod + 5;
					}else if (curPow >21){
						BonusMod = BonusMod + (5+(ceil((curChr-20)/4)*5));
					}
					console.log("BonusMod value1: " + BonusMod);

					
					
					if (curPow < 5) {
						BonusMod = BonusMod-10;
					}else if(curPow >= 5 && curPow <= 8){
						BonusMod = BonusMod-5;
					}else if(curPow >= 13 && curPow <= 16){
						BonusMod = BonusMod+5;
					}else if(curPow >= 17 && curPow <= 20){
						BonusMod = BonusMod+10;
					}else if (curPow >21){
						BonusMod = BonusMod + (5+(ceil((curPow-20)/4)*5));
					}
					console.log("BonusMod value3: " + BonusMod);				

					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({magic_mod: BonusMod});
					console.log("************ End Magic Bonus ************");
				});
			});					
			
			//Set Manipulation Bonus
			on("change:curstr change:curint change:curdex change:curpow", function() {
				getAttrs(["version","curint", "curstr", "curdex", "curpow"], function(pvalue) {
					console.log("************ Start Manipulation Bonus ************");
					console.log("curstr value: " + pvalue.curstr);
					console.log("curint value: " + pvalue.curint);
					console.log("curdex value: " + pvalue.curdex);
					console.log("curpow value: " + pvalue.curpow);
					var curStrength = parseInt(pvalue.curstr);
					var curInt = parseInt(pvalue.curint);
					var curDexterity = parseInt(pvalue.curdex);
					var curPower = parseInt(pvalue.curpow);
					var BonusMod = 0;
					
					
					
					if (curStrength < 5) {
						BonusMod = -5;
						console.log("Str B -5");
					}else if (curStrength >16 && curStrength < 21){
						BonusMod = 5;
						console.log("Str B +5");
					}else if (curStrength >21){
						BonusMod = 5+(ceil((curStrength-20)/4)*5);
						console.log("Str B "+BonusMos);
					}
					
                        
					if (curInt < 5) {
						console.log("INT B -10");
						BonusMod = BonusMod-10;
					}else if(curInt >= 5 && curInt <= 8){
						BonusMod = BonusMod-5;
						console.log("INT B -5");					
					}else if(curInt >= 13 && curInt <= 16){
						BonusMod = BonusMod+5;
						console.log("INT B 5");						
					}else if(curInt >= 17 && curInt <= 20){
						BonusMod = BonusMod+10;
						console.log("INT B 10");
						
					}else if (curInt >21){
						BonusMod = BonusMod + (5+(ceil((curInt-20)/4)*5));
					}

					
					if (curDexterity < 5) {
						BonusMod = BonusMod-10;
						console.log("DEX B -10");
						
					}else if(curDexterity >= 5 && curDexterity <= 8){
						BonusMod = BonusMod-5;
						console.log("DEX B -5");						
					}else if(curDexterity >= 13 && curDexterity <= 16){
						BonusMod = BonusMod+5;
						console.log("DEX B +5");						
					}else if(curDexterity >= 17 && curDexterity <= 20){
						BonusMod = BonusMod+10;
						console.log("DEX B +10");						
					}else if (curDexterity >21){
						BonusMod = BonusMod + (5+(ceil((curDexterity-20)/4)*5));
					}
					
					if (curPower < 5) {
						BonusMod = BonusMod-5;
						console.log("pow B -5");						
					}else if (curPower >16 && curPower < 21){
						BonusMod = BonusMod+5;
						console.log("Pow B +5");						
					}else if (curPower >21){
						BonusMod = BonusMod + 5+(ceil((curPower-20)/4)*5);
					}				
				   
					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({manipulation_mod: BonusMod});
					console.log("************ End Manipulation Bonus ************");
				});
			});
			//Set Perception
			on("change:curint change:curpow", function() {
				getAttrs(["version","curint", "curpow"], function(pvalue) {
					console.log("************ Start Perception Bonus ************");
					console.log("curint value: " + pvalue.curint);
					console.log("curpow value: " + pvalue.curpow);
					
					var curInt = parseInt(pvalue.curint);
					var curPow = parseInt(pvalue.curpow);
					
					var BonusMod = 0;
									
					
					if (curPow < 5) {
						BonusMod = BonusMod + -5;
					}else if (curPow >16 && curPow < 21){
						BonusMod = BonusMod + 5;
					}else if (curPow >21){
						BonusMod = BonusMod + (5+(ceil((curPow-20)/4)*5));
					}
					console.log("BonusMod value1: " + BonusMod);

					
					
					if (curInt < 5) {
						BonusMod = BonusMod-10;
					}else if(curInt >= 5 && curInt <= 8){
						BonusMod = BonusMod-5;
					}else if(curInt >= 13 && curInt <= 16){
						BonusMod = BonusMod+5;
					}else if(curInt >= 17 && curInt <= 20){
						BonusMod = BonusMod+10;
					}else if (curInt >21){
						BonusMod = BonusMod + (5+(ceil((curInt-20)/4)*5));
					}
					console.log("BonusMod value3: " + BonusMod);				

					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({perception_mod: BonusMod});
					console.log("************ End Perception  Bonus ************");
				});
			});			
			/////////////////////////////////////////////////

			//Set Stealth Bonus
			on("change:curint change:cursiz change:curdex change:curpow", function() {
				getAttrs(["version","curint", "cursiz", "curdex", "curpow"], function(pvalue) {
					console.log("************ Start Stealth Bonus ************");
					console.log("curint value: " + pvalue.curint);
					console.log("cursiz value: " + pvalue.cursiz);
					console.log("curdex value: " + pvalue.curdex);
					console.log("curpow value: " + pvalue.curpow);
					var curInt = parseInt(pvalue.curint);
					var curSize = parseInt(pvalue.cursiz);
					var curDexterity = parseInt(pvalue.curdex);
					var curPower = parseInt(pvalue.curpow);
					var BonusMod = 0;
					
					
					
					if (curInt < 5) {
						BonusMod = BonusMod-10;
					}else if(curInt >= 5 && curInt <= 8){
						BonusMod = BonusMod-5;
					}else if(curInt >= 13 && curInt <= 16){
						BonusMod = BonusMod+5;
					}else if(curInt >= 17 && curInt <= 20){
						BonusMod = BonusMod+10;
					}else if (curInt >21){
						BonusMod = BonusMod + (5+(ceil((curInt-20)/4)*5));
					}
					

					if (curSize < 5) {
						BonusMod = BonusMod+10;
					}else if(curSize >= 5 && curSize <= 8){
						BonusMod = BonusMod+5;
					}else if(curSize >= 13 && curSize <= 16){
						BonusMod = BonusMod-5;
					}else if(curSize >= 17 && curSize <= 20){
						BonusMod = BonusMod-10;
					}else if (curSize >21){
						BonusMod = BonusMod - (5+(ceil((curSize-20)/4)*5));
					}

					
					if (curDexterity < 5) {
						BonusMod = BonusMod-10;
					}else if(curDexterity >= 5 && curDexterity <= 8){
						BonusMod = BonusMod-5;
					}else if(curDexterity >= 13 && curDexterity <= 16){
						BonusMod = BonusMod+5;
					}else if(curDexterity >= 17 && curDexterity <= 20){
						BonusMod = BonusMod+10;
					}else if (curDexterity >21){
						BonusMod = BonusMod + (5+(ceil((curDexterity-20)/4)*5));
					}
					
					if (curPower < 5) {
						BonusMod = BonusMod-5;
					}else if (curPower >16 && curPower < 21){
						BonusMod = BonusMod+5;
					}else if (curPower >21){
						BonusMod = BonusMod + 5+(ceil((curPower-20)/4)*5);
					}				
				   
					
					console.log("version "+pvalue.version);
					if (parseInt(pvalue.version)===0){
						BonusMod = 0;
					}
					
					console.log("BonusMod value: " + BonusMod);
					setAttrs({stealth_mod: BonusMod});
					console.log("************ End Agility Bonus ************");
				});
			});
			
			
			
				//Set Damage Bonus
			on("change:curstr change:cursiz", function() {
				getAttrs(["curstr", "cursiz", "damagebonus"], function(pvalue) {
					console.log("************ Start Damage Bonus ************");
					console.log("curstr value: " + pvalue.curstr);
					console.log("cursiz value: " + pvalue.cursiz);
					console.log("damagebonus value: " + pvalue.damagebonus);
					var curStrength = parseInt(pvalue.curstr);
					var curSize = parseInt(pvalue.cursiz);
					var curDB = parseInt(pvalue.damagebonus);
					var StplusSi = curStrength + curSize;
					console.log("Str+Size value: " + StplusSi);
					var DBonus = "-1d4";
					var mDBonus = "-1d2";
					var DBonusC = 0;
					var maxDb1 = 0;
					var maxDb2 = 0;
								
					//Determine Bonus
					if (StplusSi < 18) {
						console.log("-- Str+Siz is less than 18 --");
						DBonus = "-1d4";
						mDBonus = "-1d2";					
						console.log("DBonus value: " + DBonus);
						/*setAttrs({ damagebonus: DBonus,mdamagebonus: mDBonus,maxDb:maxDb1});*/
					}
					else if (StplusSi < 25) {
						console.log("-- Str+Siz is less than 25 --");
						DBonus = "0";
						mDBonus = "0";
						console.log("DBonus value: " + DBonus);
						/*setAttrs({ damagebonus: DBonus,mdamagebonus: mDBonus,maxDb:maxDb1});*/
					}
					else if (StplusSi < 33) {
						console.log("-- Str+Siz is less than 31 --");
						DBonus = "1d4";
						mDBonus = "1d2";					
						console.log("DBonus value: " + DBonus);
						maxDb1=4;
						maxDb2=2
						/*setAttrs({ damagebonus: DBonus,mdamagebonus: mDBonus,maxDb:maxDb1  });*/
					}
					else if (StplusSi < 41) {
						console.log("-- Str+Siz is less than 31 --");
						DBonus = "1d6";
						mDBonus = "1d3";					
						console.log("DBonus value: " + DBonus);
						maxDb1=6;
						maxDb2=3
						/*setAttrs({ damagebonus: DBonus,mdamagebonus: mDBonus,maxDb:maxDb1  });*/
					}			
					else { //StplusSi is greater than 
						DBonusC = 2+Math.floor(parseFloat((StplusSi - 40) / 16));
						console.log("DBonusC value: " + DBonusC);

						DBonus = DBonusC + "d6";
						maxDb1 = DBonusC*6;
						maxDb2 = maxDb1/2;
						mDBonus = DBonusC + "d3";					
						console.log("DBonus value: " + DBonus);
						/*setAttrs({ damagebonus: DBonus,mdamagebonus: mDBonus,maxDb:maxDb1,mmaxDb:maxDb2 });*/
					}    

					setAttrs({ damagebonus: DBonus,mdamagebonus: mDBonus,maxDb:maxDb1,mmaxDb:maxDb2 });
					console.log("************ End Damage Bonus ************");
				});
			});
			

			//Set siz SRM
			on("change:cursiz", function() {
				getAttrs(["cursiz","dex_srm"], function(pvalue) {

					
					var charSiz = parseInt(pvalue.cursiz);
					var charSsrm = parseInt(pvalue.dex_srm);			
					
					
					var ssrm = 0;
					var msrm = charSsrm;
					
					if (charSiz < 7){
						ssrm = 3;
					} else if (charSiz < 15){
						ssrm = 2;				
					} else if (charSiz < 22){
						ssrm = 1;				
					} else {
						ssrm = 0;				
					}				
					msrm = msrm+ssrm;
					
					setAttrs({ siz_srm: ssrm , melee_srm: msrm});
				   
					console.log("************ Siz SRM Calculation ************");
				});
			});	


			//Set Dex SRM
			on("change:curdex", function() {
				getAttrs(["curdex","siz_srm"], function(pvalue) {

					
					var charDex = parseInt(pvalue.curdex);
					var charSsrm = parseInt(pvalue.siz_srm);			
					
					
					var dsrm = 0;
					var msrm = charSsrm;
					
					if (charDex < 6){
						dsrm = 5;
					} else if (charDex < 9){
						dsrm = 4;
					} else if (charDex < 13){
						dsrm = 3;				
					} else if (charDex < 16){
						dsrm = 2;	
					} else if (charDex < 19){
						dsrm = 1;						
					} else {
						dsrm = 0;				
					}				
					msrm = msrm+dsrm;
					
					setAttrs({ dex_srm: dsrm , melee_srm: msrm});
				   
					console.log("************ End DEx SRM Calculation ************");
				});
			});	
			
				//Location Hit Points
			//Set Hit Points
			on("change:hp_max ", function() {
				getAttrs(["hp_max"], function(pvalue) {
					console.log("************ Start Location Hit Point Calculation ************");
					var HitPoints = parseInt(pvalue.hp_max);
					console.log("hit points");
					console.log(HitPoints);

					/*
					var charstre= parseInt(pvalue.hpstre);
					var tothP = HitPoints + charstre;
									
					//fix to match hit point tables
					var x = Math.ceil(tothP/3);
					console.log("fixing");
					console.log(x);
					var fixedHP =  x*3;
					console.log("fixed hit points");
					console.log(fixedHP);
					
					
					
					var LocPoints1 = 0; //.33
					var LocPoints2 = 0; //.25
					var LocPoints3 = 0; //.4
					
					LocPoints1 = Math.ceil((fixedHP*0.33),0);
					LocPoints2 = Math.ceil((fixedHP*0.25),0);
					LocPoints3 = Math.ceil((fixedHP*0.4),0);
					*/
					
					var LocPoints1 = 0; // Other
					var LocPoints2 = 0; // Arms
					var LocPoints3 = 0; // Chest
					
					if (HitPoints < 7){
						LocPoints1 = 2;
						LocPoints2 = 1;
						LocPoints3 = 3;					
					}
					else if (HitPoints >= 7 && HitPoints <= 9){
						LocPoints1 = 3;
						LocPoints2 = 2;
						LocPoints3 = 4;					
					}
					else if (HitPoints >= 10 && HitPoints <= 12){
						LocPoints1 = 4;
						LocPoints2 = 3;
						LocPoints3 = 5;					
					}
					else if (HitPoints >= 13 && HitPoints <= 15){
						LocPoints1 = 5;
						LocPoints2 = 4;
						LocPoints3 = 6;					
					}
					else if (HitPoints >= 16 && HitPoints <= 18){
						LocPoints1 = 6;
						LocPoints2 = 5;
						LocPoints3 = 7;					
					}
					else if (HitPoints >= 19 && HitPoints <= 21){
						LocPoints1 = 7;
						LocPoints2 = 6;
						LocPoints3 = 8;					
					}
					else if (HitPoints > 21){
						LocPoints1 = (7 + Math.ceil((HitPoints-21)/3));
						LocPoints2 = (6 + Math.ceil((HitPoints-21)/3));
						LocPoints3 = (8 + Math.ceil((HitPoints-21)/3));
					}
					
					setAttrs({r_leg_max_hp: LocPoints1,l_leg_max_hp: LocPoints1,abd_max_hp: LocPoints1,chst_max_hp: LocPoints3,
					r_arm_max_hp: LocPoints2,l_arm_max_hp: LocPoints2,hd_max_hp: LocPoints1});
				   
					console.log("************ End Location Hit Point Calculation ************");
				});
			});		
			
				//Set Current Hit Points
			on("change:lhp_loss change:thp_loss ", function() {
				getAttrs(["hp_max","lhp_loss","thp_loss"], function(pvalue) {
					console.log("************ Start Current Hit Point Calculation ************");
					var HitPoints = parseInt(pvalue.hp_max);
					
					var CurHitPoints = 0;
					var THpLoss = parseInt(pvalue.lhp_loss);
					var LHpLoss = parseInt(pvalue.thp_loss);				


					CurHitPoints = HitPoints-THpLoss-LHpLoss;
								
					setAttrs({hp_cur: CurHitPoints});
				   
					console.log("************ End Current Hit Point Calculation ************");
				});
			});
			
			
			//Set Hit Points
			on("change:curcon change:curpow change:cursiz ", function() {
				getAttrs(["curcon", "cursiz","curpow","hp","lhp_loss","thp_loss"], function(pvalue) {
					console.log("************ Start Hit Point Calculation ************");
					console.log("curcon value: " + pvalue.curcon);
					console.log("cursiz value: " + pvalue.cursiz);
					console.log("curpow value: " + pvalue.curpow);
					
					var HitPoints = 0;
					var CurHitPoints = 0;
					var THpLoss = parseInt(pvalue.lhp_loss);
					var LHpLoss = parseInt(pvalue.thp_loss);				
					var charSize = parseInt(pvalue.cursiz);
					var charCon = parseInt(pvalue.curcon);
					var charPow = parseInt(pvalue.curpow);

					HitPoints = charCon;
					
					if (charSize < 5){
						HitPoints -= 2;
					}
					else if (charSize >= 5 && charSize <= 8){
						HitPoints -= 1;
					}
					else if (charSize >= 13 && charSize <= 16){
						HitPoints += 1;
					}
					else if (charSize >= 17 && charSize <= 20){
						HitPoints += 2;
					}
					else if (charSize > 20){
						HitPoints += (2 + Math.ceil((charSize-20)/4))
					}

		
					if (charPow < 5){
						HitPoints -= 1;
					}
					else if (charPow >= 17 && charPow <= 20){
						HitPoints += 1;
					}

					else if (charPow >= 21 && charPow <= 24){
						HitPoints += 2;
					}
					else if (charPow >= 25 && charPow <= 28){
						HitPoints += 2;
					}				
									
					else if (charPow > 28){
						HitPoints += (2 + Math.ceil((charPow-20)/4));
					}


					
					
					CurHitPoints = HitPoints-THpLoss-LHpLoss;
								
					setAttrs({ hp_max: HitPoints, hp_cur: CurHitPoints});
				   
					console.log("************ End Hit Point Calculation ************");
				});
			});		
			
			
			on("change:r_leg_damage change:r_leg_max_hp ", function() {
		   getAttrs(["r_leg_damage","r_leg_max_hp"], function(values) {
					console.log("Start add right leg location damage");
					console.log(values);		
					var lochp =  parseInt(values.r_leg_max_hp);
					//var locstre = parseInt(values.r_leg_stre);
					var damage = values.r_leg_damage;
					var tot=0;
					tot =  lochp-eval(damage); 
					
					setAttrs({r_leg_cur_hp:tot});	




		   });
		});	
		

				on("change:l_leg_damage change:r_leg_max_hp ", function() {
		   getAttrs(["l_leg_damage","l_leg_max_hp"], function(values) {
					console.log("Start add left leg location damage");
					console.log(values);		
					var lochp =  parseInt(values.l_leg_max_hp);
					//var locstre = parseInt(values.l_leg_stre);
					var damage = values.l_leg_damage;
					var tot=0;
					tot =  lochp-eval(damage);
					
					setAttrs({l_leg_cur_hp:tot});	




		   });
		});	

				on("change:abd_damage change:abd_max_hp ", function() {
		   getAttrs(["abd_damage","abd_max_hp"], function(values) {
					console.log("Start add abd location damage");
					console.log(values);		
					var lochp =  parseInt(values.abd_max_hp);
					//var locstre = parseInt(values.abd_stre);
					var damage = values.abd_damage;
					var tot=0;
					tot =  lochp-eval(damage);
					
					setAttrs({abd_cur_hp:tot});	




		   });
		});	

				on("change:chst_damage change:chst_max_hp ", function() {
		   getAttrs(["chst_damage","chst_max_hp"], function(values) {
					console.log("Start add chst location damage");
					console.log(values);		
					var lochp =  parseInt(values.chst_max_hp);
					//var locstre = parseInt(values.chst_stre);				
					var damage = values.chst_damage;
					var tot=0;
					tot =  lochp-eval(damage);
					console.log("!!!!!!!!!!!!!! lochp"+lochp);

					setAttrs({chst_cur_hp:tot});	




		   });
		});		
		
		
				on("change:r_arm_damage change:r_arm_max_hp ", function() {
		   getAttrs(["r_arm_damage","r_arm_max_hp"], function(values) {
					console.log("Start add right arm location damage");
					console.log(values);		
					var lochp =  parseInt(values.r_arm_max_hp);
					//var locstre = parseInt(values.r_arm_stre);								
					var damage = values.r_arm_damage;
					var tot=0;
					tot =  lochp-eval(damage);
					
					setAttrs({r_arm_cur_hp:tot});	




		   });
		});	
		

				on("change:l_arm_damage change:l_arm_max_hp ", function() {
		   getAttrs(["l_arm_damage","l_arm_max_hp"], function(values) {
					console.log("Start add left arm location damage");
					console.log(values);		
					var lochp =  parseInt(values.l_arm_max_hp);
					//var locstre = parseInt(values.l_arm_stre);												
					var damage = values.l_arm_damage;
					var tot=0;
					tot =  lochp-eval(damage);
					
					setAttrs({l_arm_cur_hp:tot});	




		   });
		});	
		

				on("change:hd_damage change:hd_max_hp ", function() {
		   getAttrs(["hd_damage","hd_max_hp"], function(values) {
					console.log("Start add head location damage");
					console.log(values);		
					var lochp =  parseInt(values.hd_max_hp);
					var damage = values.hd_damage;
					var tot = lochp-eval(damage);
					setAttrs({hd_cur_hp:tot});	
		   });
		});		
		
		
		
				on("change:r_leg_damage change:l_leg_damage change:abd_damage change:abd_damage change:chst_damage change:r_arm_damage change:l_arm_damage change:hd_damage", function() {
		   getAttrs(["r_leg_damage","l_leg_damage","abd_damage","abd_damage","chst_damage","r_arm_damage","l_arm_damage","hd_damage"], function(values) {
					console.log("Start add up location damage");
					console.log(values);				
					var tot=0;
					var evalStr = "";
					for (const key of Object.keys(values)) {
						tot = tot + eval(values[key]);
						console.log(tot);
					}
					setAttrs({lhp_loss:tot});	
					/*var test = eval(values.total_blood_loss_tt);*/



		   });
		});			
			
		  on("change:repeating_missle:mdbtoggle", function() {
		   getAttrs(["repeating_missle_mdbtoggle","mdamagebonus","attr_mmaxDb"], function(values) {
					console.log("Start set missle damage bonus");
					console.log(values);
					console.log(values.repeating_missle_mdbtoggle);				
					var mdb =  values.repeating_missle_mdbtoggle;
					var mdbStr = "0";
					var maxmdbStr = "0";
					if (mdb=="on"){
						
						mdbStr = values.mdamagebonus;
						maxmdbStr = values.mmaxDb;
					}
					
					
					setAttrs({repeating_missle_wpnmdb:mdbStr,maxwpnmdb: maxmdbStr});	




		   });
		});	
		
		
		
			//reset weapon str/ def penalties if str changes

			on("change:curstr change:curdex change:cursiz", function() {
			
					console.log("start weapon str/dex min checks ");
					
					
					/* Start melee Section */
					getSectionIDs("repeating_melee", function(idArray) {
						if (idArray.length > 0) {
							_.each(idArray, function(currentID, i) {
								getAttrs(["repeating_melee_" + currentID + "_wpnstr","repeating_melee_" + currentID + "_wpndex","curstr","curdex" ], function(values) {
									console.log("what have we here");
									var wStr = parseInt(values["repeating_melee_" + idArray[i] + "_wpnstr"]);
									var wDex = parseInt(values["repeating_melee_" + idArray[i] + "_wpndex"]);
									var cStr = parseInt(values.curstr);
									var cDex = parseInt(values.curdex);
									var minMod = 0;
									var strMod = cStr-wStr;
									var dexMod = cDex-wDex;
									var totmod = 0;
									var attrsToSet = {};
									if (strMod < 0){
										console.log("Below min str");
										console.log(strMod*5);
										totmod += strMod*5;
									}
									if (dexMod < 0){
										console.log("Below min dex");
										console.log(dexMod*5);
										totmod += dexMod*5;
									}
									//mimmod
									var missleModId = "repeating_melee_" + idArray[i] + "_minmod";
									attrsToSet[missleModId] = totmod;
									console.log("attrsToSet");
									console.log(attrsToSet);		
									setAttrs(attrsToSet);
									
									
									/*
									console.log("wStr");
									console.log(wStr);
									console.log("wDex");
									console.log(wDex);
									console.log("Str");
									console.log(cStr);
									console.log("Dex");
									console.log(cDex);
									*/
									
									
								});
							});
						}
					});
					/* End melee section  */				
					
					
					
					
					
					
					
					
					/* Start missle Section */
					getSectionIDs("repeating_missle", function(idArray) {
						if (idArray.length > 0) {
							_.each(idArray, function(currentID, i) {
								getAttrs(["repeating_missle_" + currentID + "_mdbtoggle","repeating_missle_" + currentID + "_wpnstr","repeating_missle_" + currentID + "_wpndex","curstr","curdex","mdamagebonus" ], function(values) {
									console.log("what have we here");
									var wStr = parseInt(values["repeating_missle_" + idArray[i] + "_wpnstr"]);
									var wDex = parseInt(values["repeating_missle_" + idArray[i] + "_wpndex"]);
									var mdb = values["repeating_missle_" + idArray[i] + "_mdbtoggle"]
									var cStr = parseInt(values.curstr);
									var cDex = parseInt(values.curdex);
									var minMod = 0;
									var strMod = cStr-wStr;
									var dexMod = cDex-wDex;
									var totmod = 0;
									var mdbStr = "0";
									var attrsToSet = {};
									if (strMod < 0){
										console.log("Below min str");
										console.log(strMod*5);
										totmod += strMod*5;
									}
									if (dexMod < 0){
										console.log("Below min dex");
										console.log(dexMod*5);
										totmod += dexMod*5;
									}
									//mimmod
									var missleModId = "repeating_missle_" + idArray[i] + "_minmod";
									attrsToSet[missleModId] = totmod;
									console.log("attrsToSet");
									console.log(attrsToSet);		
									setAttrs(attrsToSet);
									
									//set missle damage bonus
									var missletoggleId = "repeating_missle_" + idArray[i] + "_wpnmdb";
									if (mdb=="on"){
										
										mdbStr = values.mdamagebonus;
									}

									attrsToSet[missletoggleId] = mdbStr;
									console.log("new missle bonus");
									console.log(attrsToSet);		
									setAttrs(attrsToSet);								
									
									/*
									console.log("wStr");
									console.log(wStr);
									console.log("wDex");
									console.log(wDex);
									console.log("Str");
									console.log(cStr);
									console.log("Dex");
									console.log(cDex);
									*/
									
									
								});
							});
						}
					});
					/* End missle section  */
			});


		
		
		
		/*attr_missle_db*/
		
		on("change:repeating_missle:mdbtoggle", function() {
		   getAttrs(["repeating_missle_mdbtoggle","mdamagebonus"], function(values) {
					console.log("Start set missle damage bonus");
					console.log(values);
					console.log(values.repeating_missle_mdbtoggle);				
					var mdb =  values.repeating_missle_mdbtoggle;
					var mdbStr = "0";
					if (mdb=="on"){
						
						mdbStr = values.mdamagebonus;
					}
					setAttrs({repeating_missle_wpnmdb:mdbStr});	




		   });
		});
		/* ---- BEGIN: TheAaronSheet.js ---- */
		// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
		// By:       The Aaron, Arcane Scriptomancer
		// Contact:  https://app.roll20.net/users/104025/the-aaron

		var TAS = TAS || (function(){
			'use strict';

			var version = '0.2.4',
				lastUpdate = 1457098091,

				loggingSettings = {
					debug: {
						key:     'debug',
						title:   'DEBUG',
						color: {
							bgLabel: '#7732A2',
							label:   '#F2EF40',
							bgText:  '#FFFEB7',
							text:    '#7732A2'
						}
					},
					error: {
						key:     'error',
						title:   'Error',
						color: {
							bgLabel: '#C11713',
							label:   'white',
							bgText:  '#C11713',
							text:    'white'
						}
					},
					warn: {
						key:     'warn',
						title:   'Warning',
						color: {
							bgLabel: '#F29140',
							label:   'white',
							bgText:  '#FFD8B7',
							text:    'black'
						}
					},
					info: {
						key:     'info',
						title:   'Info',
						color: {
							bgLabel: '#413FA9',
							label:   'white',
							bgText:  '#B3B2EB',
							text:    'black'
						}
					},
					notice: {
						key:     'notice',
						title:   'Notice',
						color: {
							bgLabel: '#33C133',
							label:   'white',
							bgText:  '#ADF1AD',
							text:    'black'
						}
					},
					log: {
						key:     'log',
						title:   'Log',
						color: {
							bgLabel: '#f2f240',
							label:   'black',
							bgText:  '#ffff90',
							text:    'black'
						}
					},
					callstack: {
						key:     'TAS',
						title:   'function',
						color: {
							bgLabel: '#413FA9',
							label:   'white',
							bgText:  '#B3B2EB',
							text:    'black'
						}
					},
					callstack_async: {
						key:     'TAS',
						title:   'ASYNC CALL',
						color: {
							bgLabel: '#413FA9',
							label:   'white',
							bgText:  '#413FA9',
							text:    'white'
						}
					},
					TAS: {
						key:     'TAS',
						title:   'TAS',
						color: {
							bgLabel: 'grey',
							label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
							bgText:  'grey',
							text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
						}
					}
				},


				config = {
					debugMode: false,
					logging: {
						log: true,
						notice: true,
						info: true,
						warn: true,
						error: true,
						debug: false
					}
				},

				callstackRegistry = [],
				queuedUpdates = {}, //< Used for delaying saves till the last momment.

			complexType = function(o){
				switch(typeof o){
					case 'string':
						return 'string';
					case 'boolean':
						return 'boolean';
					case 'number':
						return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
					case 'function':
						return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
					case 'object':
						return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
					default:
						return typeof o;
				}
			},

			dataLogger = function(primaryLogger,secondaryLogger,data){
				_.each(data,function(m){
					var type = complexType(m);
					switch(type){
						case 'string':
							primaryLogger(m);
							break;
						case 'undefined':
						case 'null':
						case 'NaN':
							primaryLogger('['+type+']');
							break;
						case 'number':
						case 'not a number':
						case 'integer':
						case 'decimal':
						case 'boolean':
							primaryLogger('['+type+']: '+m);
							break;
						default:
							primaryLogger('['+type+']:=========================================');
							secondaryLogger(m);
							primaryLogger('=========================================================');
							break;
					}
				});
			},


			colorLog = function(options){
				var coloredLoggerFunction,
					key = options.key,
					label = options.title || 'TAS',
					lBGColor = (options.color && options.color.bgLabel) || 'blue',
					lTxtColor = (options.color && options.color.label) || 'white',
					mBGColor = (options.color && options.color.bgText) || 'blue',
					mTxtColor = (options.color && options.color.text) || 'white';

				coloredLoggerFunction = function(message){
					console.log(
						'%c '+label+': %c '+message + ' ',
						'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
						'background-color: '+mBGColor+';color: '+mTxtColor+';'
					); 
				};
				return function(){
					if('TAS'===key || config.logging[key]){
					   dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
					}
				};
			},

			logDebug  = colorLog(loggingSettings.debug),
			logError  = colorLog(loggingSettings.error),
			logWarn   = colorLog(loggingSettings.warn),
			logInfo   = colorLog(loggingSettings.info),
			logNotice = colorLog(loggingSettings.notice),
			logLog    = colorLog(loggingSettings.log),
			log       = colorLog(loggingSettings.TAS),
			logCS     = colorLog(loggingSettings.callstack),
			logCSA    = colorLog(loggingSettings.callstack_async),

			registerCallstack = function(callstack,label){
				var idx=_.findIndex(callstackRegistry,function(o){
					return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
						_.difference(o.stack,callstack).length === 0 &&
						o.label === label;
				});
				if(-1 === idx){
					idx=callstackRegistry.length;
					callstackRegistry.push({
						stack: callstack,
						label: label
					});
				}
				return idx;
			},

			setConfigOption = function(options){
				var newconf =_.defaults(options,config);
				newconf.logging=_.defaults(
					(options && options.logging)||{},
					config.logging
				);
				config=newconf;
			},
			
			debugMode = function(){
				config.logging.debug=true;
				config.debugMode = true;
			},

			getCallstack = function(){
				var e = new Error('dummy'),
					stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
					.replace(/^\s+at\s+/gm, '')
					.replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
					.split('\n')),function(l){
						return l.replace(/\s+.*$/,'');
					});
				return stack;
			},
			logCallstackSub = function(cs){
				var matches, csa;
				_.find(cs,function(line){
					matches = line.match(/TAS_CALLSTACK_(\d+)/);
					if(matches){
					   csa=callstackRegistry[matches[1]];
					   logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
					   logCallstackSub(csa.stack);
					   return true;
					} 
					logCS(line);
					return false;
				});
			},
			logCallstack = function(){
				var cs;
				if(config.debugMode){
					cs = getCallstack();
					cs.shift();
					log('==============================> CALLSTACK <==============================');
					logCallstackSub(cs);
					log('=========================================================================');
				}
			},


			wrapCallback = function (label, callback, context){
				var callstack;
				if('function' === typeof label){
					context=callback;
					callback=label;
					label=undefined;
				}
				if(!config.debugMode){
					return (function(cb,ctx){
						return function(){
							cb.apply(ctx||{},arguments);
						};
					}(callback,context));
				}
				
				callstack = getCallstack();
				callstack.shift();
				
				return (function(cb,ctx,cs,lbl){
					var ctxref=registerCallstack(cs,lbl);

					/*jshint -W054 */
					return new Function('cb','ctx','TASlog',
						"return function TAS_CALLSTACK_"+ctxref+"(){"+
							"TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
							"cb.apply(ctx||{},arguments);"+
							"TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
						"};")(cb,ctx,log);
					/*jshint +W054 */
				}(callback,context,callstack,label));
			},


			prepareUpdate = function( attribute, value ){
				queuedUpdates[attribute]=value;
			},

			applyQueuedUpdates = function() {
			  setAttrs(queuedUpdates);
			  queuedUpdates = {};
			},

			namesFromArgs = function(args,base){
				return _.chain(args)
					.reduce(function(memo,attr){
						if('string' === typeof attr) {
							memo.push(attr);
						} else if(_.isArray(args) || _.isArguments(args)){
							memo = namesFromArgs(attr,memo);
						}
						return memo;
					},(_.isArray(base) && base) || [])
					.uniq()
					.value();
			},

			addId = function(obj,value){
				Object.defineProperty(obj,'id',{
					value: value,
					writeable: false,
					enumerable: false
				});
			},

			addProp = function(obj,prop,value,fullname){
				(function(){
					var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
						full_pname = fullname || prop,
						pvalue=value;

					_.each(['S','I','F'],function(p){
						if( !_.has(obj,p)){
							Object.defineProperty(obj, p, {
								value: {},
								enumerable: false,
								readonly: true
							});
						}
					});
					if( !_.has(obj,'D')){
						Object.defineProperty(obj, 'D', {
							value: _.reduce(_.range(10),function(m,d){
									Object.defineProperty(m, d, {
										value: {},
										enumerable: true,
										readonly: true
									});
									return m;
								},{}),
							enumerable: false,
							readonly: true
						});
					}


					// Raw value
					Object.defineProperty(obj, pname, {
						enumerable: true,
						set: function(v){
							if(v!==pvalue) {
								pvalue=v;
								prepareUpdate(full_pname,v);
							}
						},
						get: function(){
							return pvalue;
						}
					});
					
					// string value
					Object.defineProperty(obj.S, pname, {
						enumerable: true,
						set: function(v){
							var val=v.toString();
							if(val !== pvalue) {
								pvalue=val;
								prepareUpdate(full_pname,val);
							}
						},
						get: function(){
							return pvalue.toString();
						}
					});

					// int value
					Object.defineProperty(obj.I, pname, {
						enumerable: true,
						set: function(v){
							var val=parseInt(v,10) || 0;
							if(val !== pvalue){
								pvalue=val;
								prepareUpdate(full_pname,val);
							}
						},
						get: function(){
							return parseInt(pvalue,10) || 0;
						}
					});

					// float value
					Object.defineProperty(obj.F, pname, {
						enumerable: true,
						set: function(v){
							var val=parseFloat(v) || 0;
							if(val !== pvalue) {
								pvalue=val;
								prepareUpdate(full_pname,val);
							}
						},
						get: function(){
							return parseFloat(pvalue) || 0;
						}
					});
					_.each(_.range(10),function(d){
						Object.defineProperty(obj.D[d], pname, {
							enumerable: true,
							set: function(v){
								var val=(parseFloat(v) || 0).toFixed(d);
								if(val !== pvalue){
									pvalue=val;
									prepareUpdate(full_pname,val);
								}
							},
							get: function(){
								return (parseFloat(pvalue) || 0).toFixed(d);
							}
						});
					});

				}());
			},
			
			repeating = function( section ) {
				return (function(s){
					var sectionName = s,
						attrNames = [],
						fieldNames = [],
						operations = [],
						after = [],
					
					repAttrs = function TAS_Repeating_Attrs(){
						attrNames = namesFromArgs(arguments,attrNames);
						return this;
					},
					repFields = function TAS_Repeating_Fields(){
						fieldNames = namesFromArgs(arguments,fieldNames);
						return this;
					},
					repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
						operations.push({
							type: 'reduce',
							func: (func && _.isFunction(func) && func) || _.noop,
							memo: (_.isUndefined(initial) && 0) || initial,
							final: (final && _.isFunction(final) && final) || _.noop,
							context: context || {}
						});
						return this;
					},
					repMap = function TAS_Repeating_Map(func, final, context) {
						operations.push({
							type: 'map',
							func: (func && _.isFunction(func) && func) || _.noop,
							final: (final && _.isFunction(final) && final) || _.noop,
							context: context || {}
						});
						return this;
					},
					repEach = function TAS_Repeating_Each(func, final, context) {
						operations.push({
							type: 'each',
							func: (func && _.isFunction(func) && func) || _.noop,
							final: (final && _.isFunction(final) && final) || _.noop,
							context: context || {}
						});
						return this;
					},
					repTap = function TAS_Repeating_Tap(final, context) {
						operations.push({
							type: 'tap',
							final: (final && _.isFunction(final) && final) || _.noop,
							context: context || {}
						});
						return this;
					},
					repAfter = function TAS_Repeating_After(callback,context) {
						after.push({
							callback: (callback && _.isFunction(callback) && callback) || _.noop,
							context: context || {}
						});
						return this;
					},
					repExecute = function TAS_Repeating_Execute(callback,context){
						var rowSet = {},
							attrSet = {},
							fieldIds = [],
							fullFieldNames = [];

						repAfter(callback,context);

						// call each operation per row.
						// call each operation's final
						getSectionIDs("repeating_"+sectionName,function(ids){
							fieldIds = ids;
							fullFieldNames = _.reduce(fieldIds,function(memo,id){
								return memo.concat(_.map(fieldNames,function(name){
									return 'repeating_'+sectionName+'_'+id+'_'+name;  
								}));
							},[]);
							getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
								_.each(attrNames,function(aname){
									if(values.hasOwnProperty(aname)){
										addProp(attrSet,aname,values[aname]);
									}
								});

								rowSet = _.reduce(fieldIds,function(memo,id){
									var r={};
									addId(r,id);
									_.each(fieldNames,function(name){
										var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
										addProp(r,name,values[fn],fn);
									});

									memo[id]=r;

									return memo;
								},{});

								_.each(operations,function(op){
									var res;
									switch(op.type){
										case 'tap':
											_.bind(op.final,op.context,rowSet,attrSet)();
											break;

										case 'each':
											_.each(rowSet,function(r){
												_.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
											});
											_.bind(op.final,op.context,rowSet,attrSet)();
											break;

										case 'map':
											res = _.map(rowSet,function(r){
												return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
											});
											_.bind(op.final,op.context,res,rowSet,attrSet)();
											break;

										case 'reduce':
											res = op.memo;
											_.each(rowSet,function(r){
												res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
											});
											_.bind(op.final,op.context,res,rowSet,attrSet)();
											break;
									}
								});

								// finalize attrs
								applyQueuedUpdates();
								_.each(after,function(op){
									_.bind(op.callback,op.context)();
								});
							});
						});
					};
						
					return {
						attrs: repAttrs,
						attr: repAttrs,

						column: repFields,
						columns: repFields,
						field: repFields,
						fields: repFields,

						reduce: repReduce,
						inject: repReduce,
						foldl: repReduce,

						map: repMap,
						collect: repMap,

						each: repEach,
						forEach: repEach,

						tap: repTap,
						'do': repTap,

						after: repAfter,
						last: repAfter,
						done: repAfter,

						execute: repExecute,
						go: repExecute,
						run: repExecute
					};
				}(section));
			},


			repeatingSimpleSum = function(section, field, destination){
				repeating(section)
					.attr(destination)
					.field(field)
					.reduce(function(m,r){
						return m + (r.F[field]);
					},0,function(t,r,a){
						a.S[destination]=t;
					})
					.execute();
			};



			return {
				/* Repeating Sections */
				repeatingSimpleSum: repeatingSimpleSum,
				repeating: repeating,

				/* Configuration */
				config: setConfigOption,

				/* Debugging */
				callback: wrapCallback,
				callstack: logCallstack,
				debugMode: debugMode,
				_fn: wrapCallback,

				/* Logging */
				debug: logDebug,
				error: logError,
				warn: logWarn,
				info: logInfo,
				notice: logNotice,
				log: logLog
			};
		}());

			on('change:repeating_equipment remove:repeating_equipment',function(){
				TAS.repeatingSimpleSum('equipment','equipment_weight','enc_totalf');
			});

			on('change:repeating_spiritspells remove:repeating_spiritspells',function(){
				TAS.repeatingSimpleSum('spiritspells','mpcost','spiritint');
			});

		/* ---- END: TheAaronSheet.js ---- */	
			on('change:repeating_equipment2 remove:repeating_equipment2',function(){
				//TAS.repeatingSimpleSum('equipment','equipment_weight','carry_total2');
				TAS.repeating("equipment2")
					.attr("carry_total2")
					.field("equipment_weight","carried")
					.reduce(function(m,r){
							
							console.log("carried "+(r.F["carried"]));
							if ( (r.F["carried"]) == 1){
								return m + (r.F["equipment_weight"]);
							} else{
								return m;
							}
								
					
					},0,function(t,r,a){
						a.S["carry_total2"]=t;
					})
					.execute();
			});					

		//////QS sheet workers end///////////////////////////
		/// end of qs workers
		/// qs workers end ////
		/// new workers ////
		
		
		
		//Set Current enc mod
		on("change:carry_total2 change:carry_max2", function() {
			getAttrs(["carry_total2","carry_max2"], function(pvalue) {
				console.log("************ Start Current enc mod************");

				var new_mod = 0;
				var carry_total = Math.floor(parseInt(pvalue.carry_total2));
				
				var carry_max  = Math.ceil(parseInt(pvalue.carry_max2));
				
				var swim_mod = (Math.ceil(carry_max/2) - carry_total)*5;
				
console.log("111111111 swim_mod "+swim_mod);
				
				var dodge_mod = 0-carry_total;
				if (carry_total > carry_max){
					dodge_mod = 0-carry_max;
				}
					
				if (carry_total > carry_max){
					new_mod = (carry_max-carry_total)*5;
					swim_mod = swim_mod - new_mod;
					console.log("new_mod" + new_mod);
				}
console.log("111111111 swim_mod2 "+swim_mod);							
				setAttrs({enc_mod2:new_mod,dodge_mod2:dodge_mod,swim_mod2:swim_mod});
			   
				console.log("************ End Current enc mod Calculation ************");
			});
		});	
		

			on("remove:repeating_agilitySkills", function(eventinfo){
				getAttrs(["agility_mod","curdex"], function(pvalue) {		
					


							var skill = Object.values(eventinfo.removedInfo)[0];
							skill = skill.toLowerCase();
							skill = skill.trim();			
							if (skill === "dodge"){
									var mod = parseInt(pvalue.agility_mod);
									console.log("!!!!!!! agility_mod "+mod);
									var base = (parseInt(pvalue.curdex))*2
									console.log("!!!!!!! base "+base);
									
									setAttrs({dodge:mod+base});							
							}					
				});	
			});


		
		
		//Set Animal 2 Damage Bonus
		on("change:animal2_str change:animal2_siz", function() {
			getAttrs(["animal2_str", "animal2_siz"], function(pvalue) {
				console.log("************ Start Damage Bonus ************");
				console.log("curstr value: " + pvalue.animal2_str);
				console.log("cursiz value: " + pvalue.animal2_siz);

				var curStrength = parseInt(pvalue.animal2_str);
				var curSize = parseInt(pvalue.animal2_siz);

				var StplusSi = curStrength + curSize;
				console.log("Str+Size value: " + StplusSi);
				var DBonus = "-1d4";
				var mDBonus = "-1d2";
				var DBonusC = 0;
							
				//Determine Bonus
				if (StplusSi < 18) {
					console.log("-- Str+Siz is less than 18 --");
					DBonus = "-1d4";
					mDBonus = "-1d2";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal2_db: DBonus});
				}
				else if (StplusSi < 25) {
					console.log("-- Str+Siz is less than 25 --");
					DBonus = "0";
					mDBonus = "0";
					console.log("DBonus value: " + DBonus);
					setAttrs({animal2_db: DBonus});
				}
				else if (StplusSi < 33) {
					console.log("-- Str+Siz is less than 31 --");
					DBonus = "1d4";
					mDBonus = "1d2";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal2_db: DBonus});
				}
				else if (StplusSi < 41) {
					console.log("-- Str+Siz is less than 31 --");
					DBonus = "1d6";
					mDBonus = "1d3";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal2_db: DBonus});
				}			
				else { //StplusSi is greater than 
					DBonusC = 2+Math.floor(parseFloat((StplusSi - 40) / 16));
					console.log("DBonusC value: " + DBonusC);

					DBonus = DBonusC + "d6";
					mDBonus = DBonusC + "d3";					
					console.log("DBonus value: " + DBonus);
					setAttrs({animal2_db: DBonus});
				}            
				console.log("************ Animal 2 End Damage Bonus ************");
			});
		})		

			on("change:curstr change:curcon", function() {
				getAttrs(["curstr","curcon"], function(pvalue) {		
					
					var cStr = parseInt(pvalue.curstr);
					var cCon = parseInt(pvalue.curcon);
					
					var enc = Math.ceil((cStr+cCon)/2);
					if (enc > cStr){
						enc = cStr;
					}
					
					
					setAttrs({carry_max2:enc});			   
				});
			});		
		
						
		
			on("change:repeating_melee2:skillName", function(eventInfo) {
				getAttrs(["repeating_melee2_skillName"], function(pvalue) {		
						console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
						let sourceA = eventInfo.sourceAttribute
						let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
						var wpnSkill = pvalue.repeating_melee2_skillName;
						console.log("changed weapon skill to "+wpnSkill);
						getSkillValues(wpnSkill,"repeating_meleeskills",repeatRow);
						getSkillValues(wpnSkill,"repeating_shieldskills",repeatRow);
						getSkillValues(wpnSkill,"repeating_naturalwpnskills",repeatRow);
						
						
				});
			});	
			
			
			on("change:repeating_missle2:skillName", function(eventInfo) {
				getAttrs(["repeating_missle2_skillName"], function(pvalue) {		
						console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
						let sourceA = eventInfo.sourceAttribute
						let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
						var wpnSkill = pvalue.repeating_missle2_skillName;
						console.log("changed weapon skill to "+wpnSkill);
						var skillVal=getSkillValues(wpnSkill,"repeating_missileskills",repeatRow);
				});
			});				
				
			on("change:repeating_meleeskills:skillTotal", function(eventInfo) {
				getAttrs(["repeating_meleeskills_skill","repeating_meleeskills_skillTotal"], function(pvalue) {		
						console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
						let sourceA = eventInfo.sourceAttribute
						let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
						var wpnSkill = pvalue.repeating_meleeskills_skill;
						var skillTotal = pvalue.repeating_meleeskills_skillTotal;
						console.log("changed weapon skill to "+wpnSkill);
						var skillVal=getSkillValues2(wpnSkill,"repeating_melee2",repeatRow,skillTotal);
				});
			});				


			on("change:repeating_shieldSkills:skillTotal", function(eventInfo) {
				getAttrs(["repeating_shieldSkills_skill","repeating_shieldSkills_skillTotal"], function(pvalue) {		
						console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
						let sourceA = eventInfo.sourceAttribute
						let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
						var wpnSkill = pvalue.repeating_shieldSkills_skill;
						var skillTotal = pvalue.repeating_shieldSkills_skillTotal;
						console.log("changed weapon skill to "+wpnSkill);
						var skillVal=getSkillValues2(wpnSkill,"repeating_melee2",repeatRow,skillTotal);
				});
			})



			on("change:repeating_naturalWpnSkills:skillTotal", function(eventInfo) {
				getAttrs(["repeating_naturalWpnSkills_skill","repeating_naturalWpnSkills_skillTotal"], function(pvalue) {		
						console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
						let sourceA = eventInfo.sourceAttribute
						let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
						var wpnSkill = pvalue.repeating_naturalWpnSkills_skill;
						var skillTotal = pvalue.repeating_naturalWpnSkills_skillTotal;
						console.log("changed weapon skill to "+wpnSkill);
						var skillVal=getSkillValues2(wpnSkill,"repeating_melee2",repeatRow,skillTotal);
				});
			})			
			
			function getSkillValues2(wpnSkill,section,section2,skillTotal){
				 getSectionIDs(section, function(idArray) {
					if (idArray.length > 0) {
			
						_.each(idArray, function(currentID, i) {
							getAttrs([section+"_" + currentID + "_skillName",section+"_" + currentID + "_skillTotal"], function(values) {
																															
								console.log("!!!!!! stuff3  "+JSON.stringify(values));

								let skillname = values[section+"_" + idArray[i] + "_skillName"];
								console.log("!!!!!! wpnSkill "+wpnSkill+" skillname "+skillname);

								if (skillname == wpnSkill){	
									console.log("!!!!!!!!!!!! found2 "+wpnSkill);
									let attrsToSet = {[section+"_" + idArray[i] +'_skillTotal']: skillTotal};								
									console.log("attrs to set "+JSON.stringify(attrsToSet));

									setAttrs(attrsToSet);
								}								

									
							});
						});
					}
					
				});	
			}	
			
			
			
		function getSkillValues(wpnSkill,section,section2){
				 getSectionIDs(section, function(idArray) {
					if (idArray.length > 0) {
			
						_.each(idArray, function(currentID, i) {
							getAttrs([section+"_" + currentID + "_skill",section+"_" + currentID + "_skillTotal"], function(values) {
																															
								console.log("!!!!!! stuff2  "+JSON.stringify(values));

								/*let wStr = values[section+"_" + idArray[i] + "_skill"];*/
								/*console.log("!!!!!! Look for skill "+wStr);*/
								let skillname = values[section+"_" + idArray[i] + "_skill"];
								var skillTotal =0 ;

								if (skillname == wpnSkill){	
									console.log("!!!!!!!!!!!! found "+wpnSkill);
									skillTotal = values[section+"_" + idArray[i] + "_skillTotal"];
									console.log("!!!!!! Skilltotal "+skillTotal);
									let attrsToSet = {[section2 + '_skillTotal']: skillTotal};								
									setAttrs(attrsToSet);
								}								

									
							});
						});
					}
					
				});						
		}
		
		
			on("change:repeating_agilitySkills:skillValue", function() {
				getAttrs(["repeating_agilitySkills_skillValue"], function(pvalue) {		
					
					 var checkVal = 0;
					 if (parseInt(pvalue.repeating_agilitySkills_skillValue) > 0){
						checkVal=1;
					 }
					
					setAttrs({repeating_agilitySkills_check_exp_toggle:checkVal});			   
				});
			});		
		
		
			on('sheet:opened',function(){
					getAttrs(["setupDone2"], function(pvalue) {

							var SetupDone2=parseInt(pvalue.setupDone2);
							if (SetupDone2==0){

								addSkill("repeating_agilityskills","Boat","5","0");
								addSkill("repeating_agilityskills","Climb","40","0");
								addSkill("repeating_agilityskills","Dodge","DEX*2","1");	
								addSkill("repeating_agilityskills","Drive","5","0");								
								addSkill("repeating_agilityskills","Jump","DEX*3","1");									
								addSkill("repeating_agilityskills","Ride (.......)","5","0");									
								addSkill("repeating_agilityskills","Swim","15","0");									
								
								addSkill("repeating_communicationskills","Act","5","0");									
								addSkill("repeating_communicationskills","Art","5","0");
								addSkill("repeating_communicationskills","Bargain","5","0");											
								addSkill("repeating_communicationskills","Charm","15","0");											
								addSkill("repeating_communicationskills","Dance","10","0");											
								addSkill("repeating_communicationskills","Disguise","15","0");
								addSkill("repeating_communicationskills","Fast Talk","5","0");
								addSkill("repeating_communicationskills","Intimidate","15","0");
								addSkill("repeating_communicationskills","Intrigue","5","0")				
								addSkill("repeating_communicationskills","Orate","10","0")
								addSkill("repeating_communicationskills","Sing","10","0")												
								addSkill("repeating_communicationskills","Speak (Other Language)","0","0")								
								addSkill("repeating_communicationskills","Speak (Own Language)","50","0")

								addSkill("repeating_knowledgeskills","Animal Lore","5","0");									
								addSkill("repeating_knowledgeskills","Battle","10","0");									
								addSkill("repeating_knowledgeskills","Celestial Lore","5","0");
								addSkill("repeating_knowledgeskills","Cult Lore (Cult)","5","0");
								addSkill("repeating_knowledgeskills","Customs (Local)","5","0");								
								addSkill("repeating_knowledgeskills","Customs (Other)","0","0");
								addSkill("repeating_knowledgeskills","Elder Race Lore","5","0");
								addSkill("repeating_knowledgeskills","Evaluate","10","0");
								addSkill("repeating_knowledgeskills","Farm","10","0");
								addSkill("repeating_knowledgeskills","First Aid","10","0");													addSkill("repeating_knowledgeskills","Game","10","0");
								addSkill("repeating_knowledgeskills","Herd","5","0");
								addSkill("repeating_knowledgeskills","Homeland Lore (Own)","30","0");
								addSkill("repeating_knowledgeskills","Homeland Lore (...)","0","0");
								addSkill("repeating_knowledgeskills","Manage Household","10","0");
								addSkill("repeating_knowledgeskills","Mineral Lore","5","0");								
								addSkill("repeating_knowledgeskills","Peacefull Cut","10","0");
								addSkill("repeating_knowledgeskills","Plant Lore","5","0");
								addSkill("repeating_knowledgeskills","Read/Write (....)","0","0");
								addSkill("repeating_knowledgeskills","Survival","5","0");
								addSkill("repeating_knowledgeskills","Treat Disease","5","0");								
								addSkill("repeating_knowledgeskills","Treat Poison","5","0");

								addSkill("repeating_magicskills","Meditate","0","0");
								addSkill("repeating_magicskills","Prepare Corpse","10","0");
								addSkill("repeating_magicskills","Spirit Combat","20","0");
								addSkill("repeating_magicskills","Spirit Travel","10","0");
								addSkill("repeating_magicskills","Worship (...)","5","0");
								
								addSkill("repeating_manipulationskills","Conceal","5","0");
								addSkill("repeating_manipulationskills","Craft (...)","10","0");
								addSkill("repeating_manipulationskills","Devise","5","0");
								addSkill("repeating_manipulationskills","Play Instrument (...)","5","0");
								addSkill("repeating_manipulationskills","Sleight","5","0");
								
								addSkill("repeating_perceptionskills","Insight (own species)","20","0");
								addSkill("repeating_perceptionskills","Listen","25","0");
								addSkill("repeating_perceptionskills","Scan","25","0");								
								addSkill("repeating_perceptionskills","Search","25","0");								
								addSkill("repeating_perceptionskills","Track","25","0");								
								
								
								addSkill("repeating_stealthskills","Hide","10","0");								
								addSkill("repeating_stealthskills","Move Quietly","10","0");
								
								addSkill("repeating_meleeSkills","1H Axe","10","0");
								addSkill("repeating_meleeSkills","2H Axe","5","0");
								addSkill("repeating_meleeSkills","Broadsword","10","0");
								addSkill("repeating_meleeSkills","Dagger","15","0");								
								addSkill("repeating_meleeSkills","Kopis","10","0");								
								addSkill("repeating_meleeSkills","1H Mace","15","0");
								addSkill("repeating_meleeSkills","Pike","15","0");
								addSkill("repeating_meleeSkills","Rapier","10","0");
								addSkill("repeating_meleeSkills","Shortsword","10","0");
								addSkill("repeating_meleeSkills","1 H Spear","5","0");
								addSkill("repeating_meleeSkills","2 H Spear","15","0");	
								
								addSkill("repeating_missileSkills","Composite Bow","5","0");								
								addSkill("repeating_missileSkills","Javelin","10","0");
								addSkill("repeating_missileSkills","Self Bow","5","0");
								addSkill("repeating_missileSkills","Sling","5","0");
								addSkill("repeating_missileSkills","Throwing Dagger","5","0");
								addSkill("repeating_missileSkills","Thrown Axe","10","0");								
								
								addSkill("repeating_shieldSkills","Small Shield","15","0");								
								addSkill("repeating_shieldSkills","Medium Shield","15","0");
								addSkill("repeating_shieldSkills","Large Shield","15","0");																
								
								addSkill("repeating_naturalWpnSkills","Fist","25","0");
								addSkill("repeating_naturalWpnSkills","Grapple","25","0");
								addSkill("repeating_naturalWpnSkills","Kick","15","0");

/*addMeleeWpn(section,wpnType,wsr,skill,damage,type,special)*/

								addMeleeWpn("repeating_melee2","Fist","Fist","3","1D3","1D3","3","H","2");
								addMeleeWpn("repeating_melee2","Grapple","Grapple","3","1D6","1d6","6","H","2");
								addMeleeWpn("repeating_melee2","Kick","Kick","3","1D6","1d6","6","H","2");

								
								setAttrs({setupDone2:"1"});
							}		
					});	

			});
			function addSkill(section,skill,base,vbase){
					var id=getId();
					var setObj = {};
					setObj[section+"_"+id+'_skill']=skill;
					setObj[section+"_"+id+'_base']=base;
					if (vbase==0){
						setObj[section+"_"+id+'_base2']=base;
					}
					else{
						setObj[section+"_"+id+'_base2']=base;
					}
					setAttrs(setObj);	
			}
			
			function addMeleeWpn(section,wpnType,skill,wsr,damage,spclDamage,critDamage,type,special){
					var id=getId();
					var setObj = {};
					setObj[section+"_"+id+'_weapon_type']=wpnType;
					setObj[section+"_"+id+'_skillName']=wpnType;					
					setObj[section+"_"+id+'_wpn_sr']=wsr;
					setObj[section+"_"+id+'_wpn_damage']=damage;
					setObj[section+"_"+id+'_spcldamage']=spclDamage;
					setObj[section+"_"+id+'_critdamage']=critDamage;
					setObj[section+"_"+id+'_wpn_type']=type;
					setObj[section+"_"+id+'_wpn_spl']=special;					
					
					setAttrs(setObj);	
			}			
			
			function getId(){
				const sattrs = {};
				const createdIDs = [];
				var retId = 0;
				if (createdIDs.length==0){
					retId = generateRowID();
					createdIDs.push(retId);
				} 
				var checkit = true;	
				  while (checkit==true) {
					let newID = generateRowID();
					console.log("Newid "+newID);	
					if (!createdIDs.includes(newID)) {
					  newrowid = newID;
					  console.log("newrowid "+newID);			  
					  createdIDs.push(newrowid);
					  checkit=false;
					}
				  }
					  retId = newrowid;

				
				return retId;
			}
				
				
			
			function resetSkills(section,category_mod,enc){
				console.log("reset skills "+section+" "+category_mod);
				 getSectionIDs(section, function(idArray) {
					if (idArray.length > 0) {
			
						_.each(idArray, function(currentID, i) {
							getAttrs([section+"_" + currentID + "_base",section+"_" + currentID + "_skillValue",category_mod,"dodge_mod2","swim_mod2","enc_mod2","curdex",section+"_" + currentID + "_skill"], function(values){
							console.log("!!!! reset "+section+" row");
	
							var base = values[section+"_" + idArray[i] + "_base"];
							var skill = values[section+"_" + idArray[i] + "_skill"];
							if (parseInt(enc)==1){
								var enc_mod = parseInt(values.enc_mod2);
							} else {
								enc_mod = 0;
							}							
							var curdex = parseInt(values.curdex);
							base=base.toUpperCase();
							if (base.includes("DEX")){
							
									var multiplier = base.split("*");
									console.log("!!!!!!multiplier "+multiplier);									
									var multival = parseInt(multiplier[1]);
									console.log("!!!!!!!!!!!multival "+multival);															
									console.log("zzzzz");
									base = curdex*multival;
							}else{
								base=parseInt(base);
							}
							
							
							var skillValue = parseInt(values[section+"_" + idArray[i] + "_skillValue"]);
							var mod = parseInt(values[category_mod]);
								
							console.log("$$$$$$$ base"+base);	
							console.log("$$$$$$$ skillValue"+skillValue);									
							console.log("$$$$$$$ mod"+mod);									
							
							var tot = 0;
							if ((base+skillValue)>0){
								tot=base+skillValue+mod+enc_mod;
								if (skill.toUpperCase()=="DODGE"){
									tot = tot+parseInt(values.dodge_mod2)
								}else if (skill.toUpperCase()=="SWIM"){
									tot = tot+parseInt(values.swim_mod2)
								}
							}
							 setAttrs({[section+"_"+currentID+"_base2"]:base});	
							 setAttrs({[section+"_"+currentID+"_skillTotal"]:tot});
									
							});
						});
					}
					
				});		
					
			}			
		
			on("change:repeating_agilitySkills:base", function() {
				getAttrs(["repeating_agilitySkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_agilitySkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					
					setAttrs({repeating_agilitySkills_base2:tot});			   
				});
			});		
			

		
			
			on("change:repeating_agilitySkills:base2 change:repeating_agilitySkills:skillValue change:repeating_agilitySkills:skill", function() {
				getAttrs(["repeating_agilitySkills_base2","repeating_agilitySkills_skillValue","agility_mod","repeating_agilitySkills_skill","dodge_mod2","swim_mod2","enc_mod2"], function(pvalue) {
					var base2 = parseInt(pvalue.repeating_agilitySkills_base2);
					var enc_mod2 = parseInt(pvalue.enc_mod2);
					var skill = pvalue.repeating_agilitySkills_skill;
					var skillValue= parseInt(pvalue.repeating_agilitySkills_skillValue);
					var tot = 0;
						if (base2+skillValue > 0){
						
							tot=base2+skillValue+parseInt(pvalue.agility_mod)+enc_mod2;
							if (skill.toUpperCase()=="DODGE"){
								tot = tot+parseInt(pvalue.dodge_mod2)
							}else if (skill.toUpperCase()=="SWIM"){
								tot = tot+parseInt(pvalue.swim_mod2)
							}								
						}
					setAttrs({repeating_agilitySkills_skillTotal:tot});
					
				});
			});				


			on("change:repeating_agilitySkills:skillTotal", function() {
				getAttrs(["repeating_agilitySkills_skillTotal","repeating_agilitySkills_skill","curDex"], function(pvalue) {
				console.log("!!!!!!!!!!!!! Check for dodge !!!!!!!!!");
					var skill=pvalue.repeating_agilitySkills_skill;
					skill = skill.toUpperCase();
				                     
					console.log("!!!!!!!!!!!!!"+skill);
					
					if (skill=="DODGE"){
						console.log("!!!!!!!!found skill name");
						var skillTotal = parseInt(pvalue.repeating_agilitySkills_skillTotal);
						setAttrs({dodge:skillTotal});						
					}
				});
			});

			
			
			on("change:agility_mod", function() {
				 resetSkills("repeating_agilitySkills","agility_mod","1");
			});	

			
			
			
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_communicationSkills:base", function() {
				getAttrs(["repeating_communicationSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_communicationSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_communicationSkills_base2:tot});			   
				});
			});		
			
			/*
			on("change:repeating_communicationSkills:base2 change:repeating_communicationSkills:skillValue", function() {
				getAttrs(["repeating_communicationSkills_base2","repeating_communicationSkills_skillValue","communication_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_communicationSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_communicationSkills_skillValue);
					console.log("!!!!!!!!!!communication mod "+pvalue.communication_mod);
					
					
					var tot = parseInt(pvalue.repeating_communicationSkills_base2)+parseInt(pvalue.repeating_communicationSkills_skillValue)+parseInt(pvalue.communication_mod)
				
					setAttrs({repeating_communicationSkills_skillTotal:tot});			   
				});
			});				
			*/
			on("change:repeating_communicationSkills:base2 change:repeating_communicationSkills:skillValue", function() {
				getAttrs(["repeating_communicationSkills_base2","repeating_communicationSkills_skillValue","communication_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_communicationSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_communicationSkills_skillValue);
					console.log("!!!!!!!!!!communication mod "+pvalue.communication_mod);
					
					var base2 = parseInt(pvalue.repeating_communicationSkills_base2);
					var skillValue= parseInt(pvalue.repeating_communicationSkills_skillValue);
					var tot = 0;
						if (base2+skillValue > 0){
							tot=base2+skillValue+parseInt(pvalue.communication_mod);
						}
					setAttrs({repeating_communicationSkills_skillTotal:tot});			   
				});
			});				
			
			
			
			
			on("change:communication_mod", function() {
				 resetSkills("repeating_communicationSkills","communication_mod","0");
			});	
			///////////////////////////////////////////////////////////////////////////////////////
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_knowledgeSkills:base", function() {
				getAttrs(["repeating_knowledgeSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_knowledgeSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_knowledgeSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_knowledgeSkills:base2 change:repeating_knowledgeSkills:skillValue", function() {
				getAttrs(["repeating_knowledgeSkills_base2","repeating_knowledgeSkills_skillValue","knowledge_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_knowledgeSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_knowledgeSkills_skillValue);
					console.log("!!!!!!!!!!knowledge mod "+pvalue.knowledge_mod);
					
					
					var base2 = parseInt(pvalue.repeating_knowledgeSkills_base2);
					var skillValue= parseInt(pvalue.repeating_knowledgeSkills_skillValue);
					
					tot = 0;
					
					if ((base2+skillValue)>0){
						var tot = base2+skillValue+parseInt(pvalue.knowledge_mod);
					}
						
				
					setAttrs({repeating_knowledgeSkills_skillTotal:tot});			   
				});
			});			
			
			on("change:knowledge_mod", function() {
				 resetSkills("repeating_knowledgeSkills","knowledge_mod","0");
			});	
			///////////////////////////////////////////////////////////////////////////////////////			
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_magicSkills:base", function() {
				getAttrs(["repeating_magicSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_magicSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_magicSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_magicSkills:base2 change:repeating_magicSkills:skillValue", function() {
				getAttrs(["repeating_magicSkills_base2","repeating_magicSkills_skillValue","magic_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_magicSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_magicSkills_skillValue);
					console.log("!!!!!!!!!!magic mod "+pvalue.magic_mod);
					
					var base2 = parseInt(pvalue.repeating_magicSkills_base2);
					var skillValue = parseInt(pvalue.repeating_magicSkills_skillValue);
					
					var tot = base2+skillValue+parseInt(pvalue.magic_mod);
				
					setAttrs({repeating_magicSkills_skillTotal:tot});			   
				});
			});				
			
			on("change:magic_mod", function() {
				 resetSkills("repeating_magicSkills","magic_mod","0");
			});	
			///////////////////////////////////////////////////////////////////////////////////////				
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_manipulationSkills:base", function() {
				getAttrs(["repeating_manipulationSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_manipulationSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_manipulationSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_manipulationSkills:base2 change:repeating_manipulationSkills:skillValue", function() {
				getAttrs(["repeating_manipulationSkills_base2","repeating_manipulationSkills_skillValue","manipulation_mod","enc_mod2"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_manipulationSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_manipulationSkills_skillValue);
					console.log("!!!!!!!!!!manipulation mod "+pvalue.manipulation_mod);
					
					var base2 = parseInt(pvalue.repeating_manipulationSkills_base2);
					var skillValue = parseInt(pvalue.repeating_manipulationSkills_skillValue);
					
					var tot = base2+skillValue+parseInt(pvalue.manipulation_mod)+parseInt(pvalue.enc_mod2);
				
					setAttrs({repeating_manipulationSkills_skillTotal:tot});			   
				});
			});				
			
			on("change:manipulation_mod", function() {
				resetSkills("repeating_manipulationSkills","manipulation_mod","1");
				resetSkills("repeating_meleeSkills","manipulation_mod","1");
				resetSkills("repeating_missileSkills","manipulation_mod","1");
				resetSkills("repeating_shieldSkills","manipulation_mod","1");
				resetSkills("repeating_naturalWpnSkills","manipulation_mod","1");								
			});	
			
			
			on("change:enc_mod2", function() {
				resetSkills("repeating_agilitySkills","agility_mod","1");
				resetSkills("repeating_manipulationSkills","manipulation_mod","1");
				resetSkills("repeating_meleeSkills","manipulation_mod","1");
				resetSkills("repeating_missileSkills","manipulation_mod","1");
				resetSkills("repeating_shieldSkills","manipulation_mod","1");
				resetSkills("repeating_naturalWpnSkills","manipulation_mod","1");								
			});
			
			///////////////////////////////////////////////////////////////////////////////////////	
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_perceptionSkills:base", function() {
				getAttrs(["repeating_perceptionSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_perceptionSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_perceptionSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_perceptionSkills:base2 change:repeating_perceptionSkills:skillValue", function() {
				getAttrs(["repeating_perceptionSkills_base2","repeating_perceptionSkills_skillValue","perception_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_perceptionSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_perceptionSkills_skillValue);
					console.log("!!!!!!!!!!perception mod "+pvalue.perception_mod);
					
					var base2 = parseInt(pvalue.repeating_perceptionSkills_base2);
					var skillValue = parseInt(pvalue.repeating_perceptionSkills_skillValue);
					
					var tot = 0;
					if (base2+skillValue>0){
						var tot = base2+skillValue+parseInt(pvalue.perception_mod);
					}	
					
				
					setAttrs({repeating_perceptionSkills_skillTotal:tot});			   
				});
			});				
			
			on("change:perception_mod", function() {
				 resetSkills("repeating_perceptionSkills","perception_mod","0");
			});	
			///////////////////////////////////////////////////////////////////////////////////////	
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_stealthSkills:base", function() {
				getAttrs(["repeating_stealthSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_stealthSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_stealthSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_stealthSkills:base2 change:repeating_stealthSkills:skillValue", function() {
				getAttrs(["repeating_stealthSkills_base2","repeating_stealthSkills_skillValue","stealth_mod","enc_mod2"], function(pvalue) {		
					console.log ("stealth skills");
					console.log("!!!!!!!base2 "+pvalue.repeating_stealthSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_stealthSkills_skillValue);
					console.log("!!!!!!!!!!stealth mod "+pvalue.stealth_mod);
					
					var base2 = parseInt(pvalue.repeating_stealthSkills_base2);
					var skillValue = parseInt(pvalue.repeating_stealthSkills_skillValue);
					
					var tot = 0;
					if (base2+skillValue>0){
						var tot = base2+skillValue+parseInt(pvalue.stealth_mod)+parseInt(pvalue.enc_mod2);
					}
				
					setAttrs({repeating_stealthSkills_skillTotal:tot});			   
				});
			});				
			
			on("change:stealth_mod", function() {
				 resetSkills("repeating_stealthSkills","stealth_mod","1");
			});	
			///////////////////////////////////////////////////////////////////////////////////////				
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_meleeSkills:base", function() {
				getAttrs(["repeating_meleeSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_meleeSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_meleeSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_meleeSkills:base2 change:repeating_meleeSkills:skillValue", function() {
				getAttrs(["repeating_meleeSkills_base2","repeating_meleeSkills_skillValue","manipulation_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_meleeSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_meleeSkills_skillValue);
					console.log("!!!!!!!!!!melee mod "+pvalue.manipulation_mod);
					
					var base2 = parseInt(pvalue.repeating_meleeSkills_base2);
					var skillValue = parseInt(pvalue.repeating_meleeSkills_skillValue);
					
					var tot = 0;
					if (base2+skillValue>0){
						var tot = base2+skillValue+parseInt(pvalue.manipulation_mod);
					}
				
					setAttrs({repeating_meleeSkills_skillTotal:tot});			   
				});
			});				
			///////////////////////////////////////////////////////////////////////////////////////				
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_missileSkills:base", function() {
				getAttrs(["repeating_missileSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_missileSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_missileSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_missileSkills:base2 change:repeating_missileSkills:skillValue", function() {
				getAttrs(["repeating_missileSkills_base2","repeating_missileSkills_skillValue","manipulation_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_missileSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_missileSkills_skillValue);
					console.log("!!!!!!!!!!missile mod "+pvalue.manipulation_mod);
					
					var base2 = parseInt(pvalue.repeating_missileSkills_base2);
					var skillValue = parseInt(pvalue.repeating_missileSkills_skillValue);
					
					var tot = 0;
					if (base2+skillValue>0){
						var tot = base2+skillValue+parseInt(pvalue.manipulation_mod);
					}
				
					setAttrs({repeating_missileSkills_skillTotal:tot});			   
				});
			});				
			///////////////////////////////////////////////////////////////////////////////////////	
			////////////////////////////////////////////////////////////////////////
			on("change:repeating_shieldSkills:base", function() {
				getAttrs(["repeating_shieldSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_shieldSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					setAttrs({repeating_shieldSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_shieldSkills:base2 change:repeating_shieldSkills:skillValue", function() {
				getAttrs(["repeating_shieldSkills_base2","repeating_shieldSkills_skillValue","manipulation_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_shieldSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_shieldSkills_skillValue);
					console.log("!!!!!!!!!!shield mod "+pvalue.manipulation_mod);
					
					var base2 = parseInt(pvalue.repeating_shieldSkills_base2);
					var skillValue = parseInt(pvalue.repeating_shieldSkills_skillValue);
					
					var tot = 0;
					if (base2+skillValue>0){
						var tot = base2+skillValue+parseInt(pvalue.manipulation_mod);
					}
				
					setAttrs({repeating_shieldSkills_skillTotal:tot});			   
				});
			});				
			///////////////////////////////////////////////////////////////////////////////////////	
//			////////////////////////////////////////////////////////////////////////
                                 
			on("change:repeating_naturalWpnSkills:base", function() {
				getAttrs(["repeating_naturalWpnSkills_base","curstr","curcon","cursiz","curint","curpow","curdex","curchr"], function(pvalue) {		
					var baseStr = pvalue.repeating_naturalWpnSkills_base;
					baseStr = baseStr.toUpperCase();
					var tot = 0;
					if (baseStr.includes("*")){
						//get multiplier
						var multiplier = baseStr.split("*");
						console.log("!!!!!!multiplier "+multiplier);
						
						var multival = parseInt(multiplier[1]);
						console.log("!!!!!!!!!!!multival "+multival);
						
						if (baseStr.includes("STR")){
							tot = parseInt(pvalue.curstr)*multival;
						} else if (baseStr.includes("CON")){
							tot = parseInt(pvalue.curcon)*multival;						
						} else if (baseStr.includes("SIZ")){
							tot = parseInt(pvalue.cursiz)*multival;											
						} else if (baseStr.includes("INT")){
							tot = parseInt(pvalue.curint)*multival;											
						} else if (baseStr.includes("POW")){
							tot = parseInt(pvalue.curpow)*multival;											
						} else if (baseStr.includes("DEX")){
							tot = parseInt(pvalue.curdex)*multival;											
						} else if (baseStr.includes("CHR")){
							tot = parseInt(pvalue.curchr)*multival;											
						}
						console.log("tot "+tot);
					} 
					else{
						tot=parseInt(baseStr);
					}
					                    
					setAttrs({repeating_naturalWpnSkills_base2:tot});			   
				});
			});		
			
			
			on("change:repeating_naturalWpnSkills:base2 change:repeating_naturalWpnSkills:skillValue", function() {
				getAttrs(["repeating_naturalWpnSkills_base2","repeating_naturalWpnSkills_skillValue","manipulation_mod"], function(pvalue) {		
				
					console.log("!!!!!!!base2 "+pvalue.repeating_naturalWpnSkills_base2);
					console.log("!!!!!!skill value "+pvalue.repeating_naturalWpnSkills_skillValue);
					console.log("!!!!!!!!!!naturalWpnsSkills mod "+pvalue.manipulation_mod);
					
					var base2 = parseInt(pvalue.repeating_naturalWpnSkills_base2);
					var skillValue = parseInt(pvalue.repeating_naturalWpnSkills_skillValue);
					
					var tot = 0;
					if (base2+skillValue>0){
						var tot = base2+skillValue+parseInt(pvalue.manipulation_mod);
					}
				
					setAttrs({repeating_naturalWpnSkills_skillTotal:tot});			   
				});
			});				
			///////////////////////////////////////////////////////////////////////////////////////	


			
			on("change:fertility_rune", function() {
				getAttrs(["fertility_rune"], function(pvalue) {				
					setAttrs({death_rune:100-pvalue.fertility_rune});			   
				});
			});	
		

			on("change:death_rune", function() {
				getAttrs(["death_rune"], function(pvalue) {		
					setAttrs({fertility_rune:100-pvalue.death_rune});			   
				});
			});	
			
			on("change:harmony_rune", function() {
				getAttrs(["harmony_rune"], function(pvalue) {		
					setAttrs({disorder_rune:100-pvalue.harmony_rune});			   
				});
			});	
			
			on("change:disorder_rune", function() {
				getAttrs(["disorder_rune"], function(pvalue) {		
					setAttrs({harmony_rune:100-pvalue.disorder_rune});			   
				});
			});	
			
			on("change:truth_rune", function() {
				getAttrs(["truth_rune"], function(pvalue) {		
					setAttrs({illusion_rune:100-pvalue.truth_rune});			   
				});
			});			
			
			on("change:illusion_rune", function() {
				getAttrs(["illusion_rune"], function(pvalue) {		
					setAttrs({truth_rune:100-pvalue.illusion_rune});			   
				});
			});			
			
			on("change:stasis_rune", function() {
				getAttrs(["stasis_rune"], function(pvalue) {		
					setAttrs({movement_rune:100-pvalue.stasis_rune});			   
				});
			});			
		
			on("change:movement_rune", function() {
				getAttrs(["movement_rune"], function(pvalue) {		
					setAttrs({stasis_rune:100-pvalue.movement_rune});			   
				});
			});				
			
			
			on("change:man_rune", function() {
				getAttrs(["man_rune"], function(pvalue) {		
					setAttrs({beast_rune:100-pvalue.man_rune});			   
				});
			});			
			
			on("change:beast_rune", function() {
				getAttrs(["beast_rune"], function(pvalue) {		
					setAttrs({man_rune:100-pvalue.beast_rune});			   
				});
			});					
			
			on("change:basestr change:modstr", function() {
				getAttrs(["basestr","modstr"], function(pvalue) {		
					setAttrs({curstr:parseInt(pvalue.basestr)+parseInt(pvalue.modstr)});			   
				});
			});					
			
			on("change:basecon change:modcon", function() {
				getAttrs(["basecon","modcon"], function(pvalue) {		
					setAttrs({curcon:parseInt(pvalue.basecon)+parseInt(pvalue.modcon)});			   
				});
			});			
			
			on("change:basesiz change:modsiz", function() {
				getAttrs(["basesiz","modsiz"], function(pvalue) {		
					setAttrs({cursiz:parseInt(pvalue.basesiz)+parseInt(pvalue.modsiz)});			   
				});
			});

			on("change:baseint change:modint", function() {
				getAttrs(["baseint","modint"], function(pvalue) {		
					setAttrs({curint:parseInt(pvalue.baseint)+parseInt(pvalue.modint)});			   
				});
			});					
			
			on("change:basepow change:modpow", function() {
				getAttrs(["basepow","modpow"], function(pvalue) {		
					setAttrs({curpow:parseInt(pvalue.basepow)+parseInt(pvalue.modpow)});			   
				});
			});					
			
			on("change:basechr change:modchr", function() {
				getAttrs(["basechr","modchr"], function(pvalue) {		
					setAttrs({curchr:parseInt(pvalue.basechr)+parseInt(pvalue.modchr)});			   
				});
			});			
			
			on("change:basedex change:moddex", function() {
				getAttrs(["basedex","moddex"], function(pvalue) {		
					setAttrs({curdex:parseInt(pvalue.basedex)+parseInt(pvalue.moddex)});			   
				});
			});					
		
				//Set heal rate
			on("change:curcon", function() {
				getAttrs(["curcon"], function(pvalue) {

					
					var charCon = parseInt(pvalue.curcon);
					var hr = 0;
					
					if (charCon < 7){
						hr = 1;
					} else if (charCon < 13){
						hr = 2;				
					} else if (charCon < 18){
						hr = 3;				
					} else {
						hr += (3 + Math.ceil((charCon-18)/6));				
					}				
									
					setAttrs({heal_rate:hr});
				   
					console.log("************ Siz SRM Calculation ************");
				});
			});	
			
			//spirit combat damage
			on("change:curpow change:curchr", function() {
				getAttrs(["curpow","curchr"], function(pvalue) {

					
					var charPow = parseInt(pvalue.curpow);
					var charChr = parseInt(pvalue.curchr);	
					var hr = 0;
					var sprtCbtDam = "";
					console.log("!!!!!!!!!!! "+(charPow+charChr));
					if (charPow+charChr < 13){
						sprtCbtDam = "1D3"; <!-- 2-12-->
					} else if (charPow+charChr < 25){
						sprtCbtDam = "1D6"; <!-- 13-24 -->
					} else if (charPow+charChr < 33){
						sprtCbtDam = "1D6+1"; <!-- 25-32-->
					} else if (charPow+charChr < 41){
						sprtCbtDam = "1D6+3"; <!-- 33-40-->					
					} else if (charPow+charChr < 57){
						sprtCbtDam = "2D6+3"; <!-- 41- 56 -->					
					} else {
					
						var val = (2 + Math.ceil(((charPow+charChr)-56)/16));
						sprtCbtDam = val+"D6+"+(val+2);				
					}				
									
					setAttrs({sprt_cmbt_damage:sprtCbtDam});
				   

				});
			});			
			
			
			on("change:thp_wnds", function() {
				getAttrs(["thp_wnds"], function(values) {
						var wnds =  parseInt(values.thp_wnds);
						//var locstre = parseInt(values.l_leg_stre);
										
						var damage = eval(wnds);
						
						setAttrs({thp_loss:damage});	

			   });
			});	
			


		//reset weapon str/ def penalties if str changes

			on("change:curstr change:curdex change:cursiz", function() {
			
					console.log("start weapon str/dex min checks ");
					
					
					/* Start melee Section */
					getSectionIDs("repeating_melee2", function(idArray) {
						if (idArray.length > 0) {
							_.each(idArray, function(currentID, i) {
								getAttrs(["repeating_melee2_" + currentID + "_wpnstr","repeating_melee2_" + currentID + "_wpndex","curstr","curdex" ], function(values) {
									console.log("melee section");
									var wStr = parseInt(values["repeating_melee2_" + idArray[i] + "_wpnstr"]);
									var wDex = parseInt(values["repeating_melee2_" + idArray[i] + "_wpndex"]);
									var cStr = parseInt(values.curstr);
									var cDex = parseInt(values.curdex);
									var mod =1;
									var attrsToSet = {};
									var strBonus = 0;
									
									
									
									if (wStr > 0 && wDex >0){
										if (cStr > wStr){
											strBonus = Math.floor((cStr-wStr)/2);									
										}
										
										if (cStr < wStr && cDex+strBonus < wDex){
											mod =0.5;
										}
									}
									else if (wStr > 0  && cStr < wStr){
											mod=0.5
									}
									else if (wDex >0){
										if (cDex < wDex){
											mod=0.5
										}																	
									}								 

									var meleeModId = "repeating_melee2_" + idArray[i] + "_minmod";
									attrsToSet[meleeModId] = mod;
									console.log("attrsToSet");
									console.log(attrsToSet);		
									setAttrs(attrsToSet);
									
									
									/*
									console.log("wStr");
									console.log(wStr);
									console.log("wDex");
									console.log(wDex);
									console.log("Str");
									console.log(cStr);
									console.log("Dex");
									console.log(cDex);
									*/
									
									
								});
							});
						}
					});
					/* End melee section  */				
					
					
					
					
					
					
					
					
					/* Start missle Section */
					getSectionIDs("repeating_missle2", function(idArray) {
						if (idArray.length > 0) {
							_.each(idArray, function(currentID, i) {
								getAttrs(["repeating_missle2_" + currentID + "_mdbtoggle","repeating_missle2_" + currentID + "_wpnstr","repeating_missle2_" + currentID + "_wpndex","curstr","curdex","mdamagebonus","mmaxDb" ], function(values) {
									console.log("missle section");
									var wStr = parseInt(values["repeating_missle2_" + idArray[i] + "_wpnstr"]);
									var wDex = parseInt(values["repeating_missle2_" + idArray[i] + "_wpndex"]);
									var mdb = values["repeating_missle2_" + idArray[i] + "_mdbtoggle"]
									var cStr = parseInt(values.curstr);
									var cDex = parseInt(values.curdex);
									var mod = 1;

									var strBonus = 0;
									var mdbStr = "0";
									var mdbStr2 = "0";
									
									var attrsToSet = {};
									
									
									if (wStr > 0 && wDex >0){
										if (cStr > wStr){
											strBonus = Math.floor((cStr-wStr)/2);									
										}
										
										if (cStr < wStr && cDex+strBonus < wDex){
											mod =0.5;
										}
									}
									else if (wStr >0 && cStr < wStr){
											mod=0.5;
									}
									else if (wDex >0){
										if (cDex < wDex){
											mod=0.5;
										}																	
									}							
									
									var missleModId = "repeating_missle2_" + idArray[i] + "_minmod";
									attrsToSet[missleModId] = mod;
									console.log("attrsToSet");
									console.log(attrsToSet);		
									setAttrs(attrsToSet);
									
									//set missle damage bonus
									var missledbId = "repeating_missle2_" + idArray[i] + "_wpnmdb";
									var misslemaxdbId = "repeating_missle2_" + idArray[i] + "_maxwpnmdb";
									if (mdb=="on"){
										
										mdbStr = values.mdamagebonus;
										mdbStr2 = values.mmaxDb;

									}

									attrsToSet[missledbId] = mdbStr;
									attrsToSet[misslemaxdbId] = mdbStr2;
									console.log("new missle bonus");
									console.log(attrsToSet);		
									setAttrs(attrsToSet);								
									
									/*
									console.log("wStr");
									console.log(wStr);
									console.log("wDex");
									console.log(wDex);
									console.log("Str");
									console.log(cStr);
									console.log("Dex");
									console.log(cDex);
									*/
									
									
								});
							});
						}
					});
					/* End missle section  */
			});


		
		
		
		/*attr_missle_db*/
		

		on("change:repeating_melee2:skillDefault", function() {
		   getAttrs(["repeating_melee2_skillDefault"], function(values) {
					console.log("Start skill default");
										
	
					var val = 1;
					if (values.repeating_melee2_skillDefault=="on"){
						
						val= 0.5;		
						
					}
					
					console.log("!!!!1 WHAT IS FUCKING VAL "+val);
					setAttrs({repeating_melee2_skillReduct:val});	




		   });
		});

		
		on("change:repeating_missle2:skillDefault", function() {
		   getAttrs(["repeating_missle2_skillDefault"], function(values) {
					console.log("Start skill default");
										
	
					var val = 1;
					if (values.repeating_missle2_skillDefault=="on"){
						
						val= 0.5;		
						
					}
					
					console.log("!!!!1 WHAT IS FUCKING VAL "+val);
					setAttrs({repeating_missle2_skillReduct:val});	




		   });
		});
		


		on("change:repeating_melee2:mntDbToggle", function() {
		   getAttrs(["repeating_melee2_mntDbToggle"], function(values) {
					console.log("Start set mounted damage bonus");
										
					var mdb =  values.repeating_melee2_mntDbToggle;
					var val = 0;
					if (mdb=="on"){
						
						val= 1;		
						
					}
					
					console.log("!!!!1 WHAT IS FUCKING VAL "+val);
					setAttrs({repeating_melee2_mntDb:val});	




		   });
		});
		
		
		on("change:repeating_missle2:mdbtoggle", function() {
		   getAttrs(["repeating_missle2_mdbtoggle","mdamagebonus"], function(values) {
					console.log("Start set missle damage bonus");
					console.log(values);
					console.log(values.repeating_missle2_mdbtoggle);
										
					var mdb =  values.repeating_missle2_mdbtoggle;
					var mdbStr = "0";
					var maxmdbStr = "0";

					if (mdb=="on"){
						
						mdbStr = values.mdamagebonus;
						mdbStr = mdbStr.toUpperCase();
						var splitMdb = mdbStr.split("D");
						maxmdbStr = splitMdb[0]*splitMdb[1];
						
						
					}
					setAttrs({repeating_missle2_wpnmdb:mdbStr,repeating_missle2_maxwpnmdb:maxmdbStr});	




		   });
		});	
		
		  on("change:repeating_missle2:wpndex change:repeating_missle2:wpnstr", function() {
		   getAttrs(["repeating_missle2_wpnstr","repeating_missle2_wpndex","curdex","curstr"], function(values) {

									var wStr =  parseInt(values.repeating_missle2_wpnstr);
									var wDex =  parseInt(values.repeating_missle2_wpndex);
									var cStr = parseInt(values.curstr);
									var cDex = parseInt(values.curdex);
									var mod = 1;

									var strBonus = 0;
									
									var attrsToSet = {};
									
									if (wStr > 0 && wDex >0){
										if (cStr > wStr){
											strBonus = Math.floor((cStr-wStr)/2);									
										}

										if (cStr < wStr && cDex+strBonus < wDex){
											mod =0.5;
										}
									}
									else if (wStr >0 && cStr < wStr){
											mod=0.5;
									}
									else if (wDex >0){
										if (cDex < wDex){
											mod=0.5;
										}																	
									}	
									
									setAttrs({repeating_missle2_minmod:mod});	



		   });
		});	
		
		
			  on("change:repeating_melee2:wpndex change:repeating_melee2:wpnstr", function() {
		   getAttrs(["repeating_melee2_wpnstr","repeating_melee2_wpndex","curdex","curstr"], function(values) {

									var wStr =  parseInt(values.repeating_melee2_wpnstr);
									var wDex =  parseInt(values.repeating_melee2_wpndex);
									var cStr = parseInt(values.curstr);
									var cDex = parseInt(values.curdex);
									var mod = 1;

									var strBonus = 0;
									
									var attrsToSet = {};
									
									if (wStr > 0 && wDex >0){
										if (cStr > wStr){
											strBonus = Math.floor((cStr-wStr)/2);									
										}

										if (cStr < wStr && cDex+strBonus < wDex){
											mod =0.5;
										}
									}
									else if (wStr >0 && cStr < wStr){
											mod=0.5;
									}
									else if (wDex >0){
										if (cDex < wDex){
											mod=0.5;
										}																	
									}	
									
									setAttrs({repeating_melee2_minmod:mod});	



		   });
		});
		
		//wpn_damage
		//calculate melee spcecial and critical damage
		on("change:repeating_melee2:wpn_damage change:repeating_melee2:wpn_spl", function() {
		   getAttrs(["repeating_melee2_wpn_damage","repeating_melee2_wpn_spl"], function(values) {

				var spcl = parseInt(values.repeating_melee2_wpn_spl);
				var wDmg =  values.repeating_melee2_wpn_damage;
				
				
				console.log("spcl "+spcl);
				wDmg = wDmg.toUpperCase();
				console.log("dmg "+wDmg);	
				var dmgSplit = wDmg.split(/[\D+]+/);
				var newStr = "";
				var newAdd = 0;
				
				var cDamage = (parseInt(dmgSplit[0])*parseInt(dmgSplit[1]))+parseInt(dmgSplit[2]);
				console.log("dmgSplit" +dmgSplit);
				var newDice = parseInt(dmgSplit[0])*2;
				
				
				if (spcl !==2){
					if (dmgSplit.length===3){
						cDamage = (newDice*parseInt(dmgSplit[1]))+parseInt(dmgSplit[2]*2);
					}else{
						cDamage = newDice*parseInt(dmgSplit[1]);
					}				
				}
				else{
				
					if (dmgSplit.length===3){
						cDamage =  parseInt(dmgSplit[0])*parseInt(dmgSplit[1]);
						cDamage = cDamage+parseInt(dmgSplit[2]);
						
					}else{
						cDamage =  (parseInt((dmgSplit[0])*parseInt(dmgSplit[1])));
					}					
				}
				console.log("cDamage "+cDamage);
				console.log("newDice "+newDice);
				 
				
				
				if (spcl !==2){			
					if (dmgSplit.length===3){
						newAdd =  parseInt(dmgSplit[2])*2
						newStr = newDice+"D"+dmgSplit[1]+"+"+newAdd;
					}
					else{
						
						newStr = newDice+"D"+dmgSplit[1];
					}			
				}
				else{
					newStr = wDmg;
				}
				
				
				
				console.log("newStr "+newStr)
									
				setAttrs({repeating_melee2_spcldamage:newStr,repeating_melee2_critdamage:cDamage});	



		   });
		});	

		
		
		//wpn_damage
		//calculate missle spcecial and critical damage
		on("change:repeating_missle2:wpn_damage change:repeating_missle2:wpn_spl", function() {
		   getAttrs(["repeating_missle2_wpn_damage","repeating_missle2_wpn_spl"], function(values) {

				var spcl = parseInt(values.repeating_missle2_wpn_spl);
				var wDmg =  values.repeating_missle2_wpn_damage;
				
				
				console.log("spcl "+spcl);
				wDmg = wDmg.toUpperCase();
				console.log("dmg "+wDmg);	
				var dmgSplit = wDmg.split(/[\D+]+/);
				var newStr = "";
				var newAdd = 0;
				
				var cDamage = (parseInt(dmgSplit[0])*parseInt(dmgSplit[1]))+parseInt(dmgSplit[2]);
				console.log("dmgSplit" +dmgSplit);
				var newDice = parseInt(dmgSplit[0])*2;
				
				
				if (spcl !==2){
					if (dmgSplit.length===3){
						cDamage = (newDice*parseInt(dmgSplit[1]))+parseInt(dmgSplit[2]*2);
					}else{
						cDamage = newDice*parseInt(dmgSplit[1]);
					}				
				}
				else{
				
					if (dmgSplit.length===3){
						cDamage =  parseInt(dmgSplit[0])*parseInt(dmgSplit[1]);
						cDamage = cDamage+parseInt(dmgSplit[2]);
						
					}else{
						cDamage =  (parseInt((dmgSplit[0])*parseInt(dmgSplit[1])));
					}					
				}
				console.log("cDamage "+cDamage);
				console.log("newDice "+newDice);
				 
				
				
				if (spcl !==2){			
					if (dmgSplit.length===3){
						newAdd =  parseInt(dmgSplit[2])*2
						newStr = newDice+"D"+dmgSplit[1]+"+"+newAdd;
					}
					else{
						newStr = newDice+"D"+dmgSplit[1];
					}			
				}
				else{
					newStr = wDmg;
				}
				
				
				
				console.log("newStr "+newStr)
									
				setAttrs({repeating_missle_spcldamage:newStr,repeating_missle2_critdamage:cDamage});	



		   });
		})	
		
		
		</script>
		<!-- new Roll templates -->
		<rolltemplate class="sheet-rolltemplate-melee-roll2">
		<!--awaqsdasd {{mntTogVal}}</br/>
		Mount damage {{mntTot}}</br/>
		mount spcl {{mntSpcl}}</br/>
		mount crit {{mntCrit}}</br/>-->
		
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">{{name}}</th></tr>
			
			<tr><th colspan="2">Weapon Roll</th></tr>
			 <!--<tr><td>{{crit}}/{{special}}/{{fumble}}</td></tr>-->

				<tr>
					<td class="template_label">{{skillname}} {{skillvalue}}% </td> 
					<td class="template_value"> ({{success}}%)</td>
				</tr>
				
			<!--<tr>
				Fumble {{fumble}}
			</tr>
			<tr>
				crit {{crit}}
			</tr>
			<tr>
				special {{special}}
			</tr>
			<tr>
				success {{success}}
			</tr>-->
			
			<tr>
				<td class="template_label"><b>Rolled:</b></td>
				<td class="template_value">&nbsp;{{roll}}</td>
			</tr>
			<tr>
			 <td class="template_label"><b>Result:</b></td>
			 
			{{#rollBetween() roll fumble 100}} 
					<td class="template_value">Fumble</td>
			{{/rollBetween() roll fumble 100}} 
			
			{{#^rollBetween() roll fumble 100}}
			
				{{#rollGreater() success 99}}
					{{#rollLess() roll crit}}<td class="template_value">Critical!!!!!!</td>{{/rollLess() roll crit}}
					{{#^rollLess() roll crit}}
						{{#rollLess() roll special}}<td class="template_value">Special!!!</td>{{/rollLess() roll special}}
						{{#^rollLess() roll special}}<td class="template_value">Success</td>{{/^rollLess() roll special}}
					{{/^rollLess() roll crit}}

				{{/rollGreater() success 99}}
				
				{{#^rollGreater() success 99}}
					{{#rollLess() roll crit}}<td class="template_value">Critical!!!!!!</td>{{/rollLess() roll crit}}
					{{#^rollLess() roll crit}}
						{{#rollLess() roll special}}<td class="template_value">Special!!!</td>{{/rollLess() roll special}}
						{{#^rollLess() roll special}}
							{{#rollBetween() roll special success}}<td class="template_value">Success</td>{{/rollBetween() roll special success}}
							{{#^rollBetween() roll special success}}
								{{#rollLess() roll fumble}}
									<td class="template_value">Failure</td>
								{{/rollLess() roll fumble}}
								{{#^rollLess() roll fumble}}
									<td class="template_value">fumble</td>
								{{/^rollLess() roll fumble}}							
							{{/^rollBetween() roll special success}}											
						{{/^rollLess() roll special}}
					{{/^rollLess() roll crit}}
				{{/^rollGreater() success 99}}
			{{/^rollBetween() roll fumble 100}}
			
			
			{{#rollLess() roll success}}
			
		
				
				
				{{#rollLess() roll crit}}
					{{#rollTotal() type 2}}
						<tr> 
							<td class="template_label"><b>Damage:</b></td>
							<td style="text-align: right"; class="template_value">{{critCrsh}}<td>					
						</tr>	
					{{/rollTotal() type 2}}	
					{{#^rollTotal() type 2}}
						<tr>
							<td class="template_label"><b>Damage:</b></td>
							<td style="text-align: right"; class="template_value">{{critSI}}<td>					
						</tr>	
					{{/^rollTotal() type 2}}
				{{/rollLess() roll crit}}
			
				{{#^rollLess() roll crit}}

					{{#rollLess() roll special}}						

						{{#rollTotal() type 2}}
						
							<tr>
								<td class="template_label"><b>Damage:</b></td>
								<td style="text-align: right"; class="template_value">{{crshDam}}<td>					
							</tr>
						{{/rollTotal() type 2}}	
						{{#^rollTotal() type 2}}
						
							<tr>
								<td class="template_label"><b>Damage:</b></td>
								<td style="text-align: right"; class="template_value">{{spclDam}}<td>					
							</tr>
						{{/^rollTotal() type 2}}
					{{/rollLess() roll special}}
				{{/^rollLess() roll crit}}
			
			
			
				{{#^rollLess() roll special}}
					<tr>
						<td class="template_label"><b>Damage:</b></td>
						<td style="text-align: right"; class="template_value">{{tot}}<td>
					</tr>
				{{/^rollLess() roll special}}
			{{/rollLess() roll success}}
		</table>
	</rolltemplate>
	<rolltemplate class="sheet-rolltemplate-RQG-Fumble">
		<table style="background-color: #ffffff;" class="sheet-rolltemplate-skillRoll">
		<th>Fumble </th>
		<tr>
		{{#rollBetween() roll 1 5}}<td>Lose next parry</td>{{/rollBetween() roll 1 5}}
		{{#rollBetween() roll 6 10}}<td>Lose next attack</td>{{/rollBetween() roll 6 10}}
		{{#rollBetween() roll 11 15}}<td>Lose next attack and parry</td>{{/rollBetween() roll 11 15}}
		{{#rollBetween() roll 16 20}}<td>Lose next attack, parry, and any Dodge.</td>{{/rollBetween() roll 16 20}}
		{{#rollBetween() roll 21 25}}<td>Lose next 1D3 attacks.</td>{{/rollBetween() roll 21 25}}
		{{#rollBetween() roll 26 30}}<td>Lose next 1D3 attacks and parries.</td>{{/rollBetween() roll 26 30}}
		{{#rollBetween() roll 31 35}}<td>Shield strap breaks; lose shield immediately.</td>{{/rollBetween() roll 31 35}}
		{{#rollBetween() roll 36 40}}<td>Shield strap breaks; as above, and lose next attack.</td>{{/rollBetween() roll 36 40}}
		{{#rollBetween() roll 41 45}}<td>Armor strap breaks and armor comes lose (roll for hit location to determine which piece of armor is lost).</td>{{/rollBetween() roll 41 45}}
		{{#rollBetween() roll 46 50}}<td>Armor strap breaks, as above, and lose next attack and parry.</td>{{/rollBetween() roll 46 50}}
		{{#rollBetween() roll 51 55}}<td>Fall and lose parry this round (takes 1D3 rounds to get up).</td>{{/rollBetween() roll 51 55}}
		{{#rollBetween() roll 56 60}}<td>Twist ankle; lose half movement rate for 5D10 rounds.</td>{{/rollBetween() roll 56 60}}
		{{#rollBetween() roll 61 63}}<td>Twist ankle and fall; apply the effects of 51–55 and 56–60.</td>{{/rollBetween() roll 61 63}}
		{{#rollBetween() roll 64 67}}<td>Vision impaired; lose 25% effectiveness on attacks and parries (takes 1D3 rounds unengaged to clear vision).</td>{{/rollBetween() roll 64 67}}
		{{#rollBetween() roll 68 70}}<td>Vision impaired; lose 50% effectiveness on attacks and parries (takes 1D6 rounds unengaged to clear vision).</td>{{/rollBetween() roll 68 70}}
		{{#rollBetween() roll 71 72}}<td>Vision blocked; lose all attacks and parries (takes 1D6 rounds unengaged to clear vision).</td>{{/rollBetween() roll 71 72}}
		{{#rollBetween() roll 73 74}}<td>Distracted; foes attack at +25% effectiveness for next round.</td>{{/rollBetween() roll 73 74}}
		{{#rollBetween() roll 75 78}}<td><b>Attack:</b> Weapon used in attack dropped (takes 1D3 rounds to recover).
	<br/><b>Parry:</b> Parrying weapon or shield dropped (takes 1D3 rounds to recover).</td>{{/rollBetween() roll 75 78}}
		{{#rollBetween() roll 79 82}}<td><b>Attack:</b> Weapon knocked away (roll 1D6 for number of meters it travels, and roll 1D8 for compass direction it goes;
	with 1=north, 2=northeast, 3=east, 4=southeast, 5=south, 6=southwest, 7=west, 8=northwest).
	<br><b>Parry:</b> Parrying weapon or shield knocked away (roll 1D6 for number of meters it travels and 1D8 for compass
	direction it goes, as above).</td>{{/rollBetween() roll 79 82}}
		{{#rollBetween() roll 83 86}}<td><b>Attack:</b> Weapon shattered (100% chance if unenchanted; 10% less for each point of battle magic spell on weapon,
	and 20% less for each point of Rune magic spell on weapon).
	Parry: Parrying weapon or shield shattered (100% if unenchanted; 10% less for each point of battle magic on object,
	and 20% less for each point of Rune magic.)</td>{{/rollBetween() roll 83 86}}
		{{#rollBetween() roll 87 89}}<td><b>Attack:</b> Hit nearest friend (hit self if no friend near); do rolled damage.
	<br><b>Parry:</b> Wide open; foe automatically hits with normal damage.</td>{{/rollBetween() roll 87 89}}
		{{#rollBetween() roll 90 91}}<td><b>Attack:</b> Hit nearest friend (hit self if no friend near); do full possible damage.
	<br><b>Parry:</b> Wide open; foe automatically hits with normal damage.</td>{{/rollBetween() roll 90 91}}
		{{#rollTotal() roll 92}}<td><b>Attack:</b> Hit nearest friend (hit self if no friend near); do critical hit.
	<br><b>Parry:</b> Wide open; foe automatically hits with normal damage.</td>{{/rollTotal() roll 92}}
		{{#rollBetween() roll 93 95}}<td><b>Attack:</b> Hit self; do rolled damage.
	<br><b>Parry:</b> Wide open; foe automatically hits with full possible damage.</td>{{/rollBetween() roll 93 95}}
		{{#rollBetween() roll 96 97}}<td><b>Attack:</b> Hit self; do full possible damage.
	<br><b>Parry:</b> Wide open; foe automatically critical hits.</td>{{/rollBetween() roll 96 97}}
		{{#rollTotal() roll 98}}<td><b>Attack:</b> Hit self; do critical hit.
	<br><b>Parry:</b> Wide open; foe automatically critical hits.</td>{{/rollTotal() roll 98}}
		{{#rollTotal() roll 99}}<td>Blow it; roll twice on this table, and apply both results. If this result is rolled again, continue rolling until two other
	results are achieved.</td>{{/rollTotal() roll 99}}
		{{#rollTotal() roll 100}}<td>Blow it badly; roll three times on this table, and apply all three results. If this result is rolled again, continue rolling
	until three other results are achieved.</td>{{/rollTotal() roll 100}}
		</tr>
		</table>
	</rolltemplate>


		<!--end new rolltemplates -->
		
		<!--old templates -->
		
	<rolltemplate class="sheet-rolltemplate-melee-roll">
    <table class="skillRoll" style="border 1px black">
        <tr><th colspan="2">{{name}}</th></tr>
		
		<tr><th colspan="2">Weapon Roll</th></tr>
		 <!--<tr><td>{{crit}}/{{special}}/{{fumble}}</td></tr>-->

			<tr>
				<td class="template_label">{{skillname}} {{skillvalue}}% </td> 
				<td class="template_value"> ({{success}}%)</td>
			</tr>
			
		<!--<tr>
			Fumble {{fumble}}
		</tr>
		<tr>
			crit {{crit}}
		</tr>
		<tr>
			special {{special}}
		</tr>
		<tr>
			success {{success}}
		</tr>-->
		
        <tr>
            <td class="template_label"><b>Rolled:</b></td>
            <td class="template_value">&nbsp;{{roll}}</td>
        </tr>
		<tr>
		 <td class="template_label"><b>Result:</b></td>
		 
		{{#rollBetween() roll fumble 100}} 
				<td class="template_value">Fumble</td>
		{{/rollBetween() roll fumble 100}} 
		
		{{#^rollBetween() roll fumble 100}}
		
			{{#rollGreater() success 99}}
				{{#rollLess() roll crit}}<td class="template_value">Critical!!!!!!</td>{{/rollLess() roll crit}}
				{{#^rollLess() roll crit}}
					{{#rollLess() roll special}}<td class="template_value">Special!!!</td>{{/rollLess() roll special}}
					{{#^rollLess() roll special}}<td class="template_value">Success</td>{{/^rollLess() roll special}}
				{{/^rollLess() roll crit}}

			{{/rollGreater() success 99}}
			
			{{#^rollGreater() success 99}}
				{{#rollLess() roll crit}}<td class="template_value">Critical!!!!!!</td>{{/rollLess() roll crit}}
				{{#^rollLess() roll crit}}
					{{#rollLess() roll special}}<td class="template_value">Special!!!</td>{{/rollLess() roll special}}
					{{#^rollLess() roll special}}
						{{#rollBetween() roll special success}}<td class="template_value">Success</td>{{/rollBetween() roll special success}}
						{{#^rollBetween() roll special success}}
							{{#rollLess() roll fumble}}
								<td class="template_value">Failure</td>
							{{/rollLess() roll fumble}}
							{{#^rollLess() roll fumble}}
								<td class="template_value">fumble</td>
							{{/^rollLess() roll fumble}}							
						{{/^rollBetween() roll special success}}											
					{{/^rollLess() roll special}}
				{{/^rollLess() roll crit}}
			{{/^rollGreater() success 99}}
		{{/^rollBetween() roll fumble 100}}
		
		
		{{#rollLess() roll success}}
			<tr>
				<td class="template_label"><b>Damage:</b></td>
				<td style="text-align: right"; class="template_value">{{tot}}<td>
			</tr>
		{{/rollLess() roll success}}
    </table>
</rolltemplate>		
		
		<rolltemplate class="sheet-rolltemplate-HL-Melee">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Human Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollBetween() roll 1 4}}<td class="template_label">Hit on the Left Leg</td>{{/rollBetween() roll 1 4}}
			{{#rollBetween() roll 5 8}}<td class="template_label">Hit on the Right Leg</td>{{/rollBetween() roll 5 8}}
			{{#rollBetween() roll 9 11}}<td class="template_label">Hit on the  Abdomen</td>{{/rollBetween() roll 9 11}}
					{{#rollTotal() roll 12}}
						<td class="template_value">Hit on the Chest</td>
					{{/rollTotal() roll 12}}
			{{#rollBetween() roll 13 15}}<td class="template_label">Hit on the Right Arm</td>{{/rollBetween() roll 13 15}}
			{{#rollBetween() roll 16 18}}<td class="template_label">Hit on the Left Arm</td>{{/rollBetween() roll 16 18}}
			{{#rollBetween() roll 19 20}}<td class="template_label">Hit on the Head</td>{{/rollBetween() roll 19 20}}
			</tr>
		</table>
	</rolltemplate>



	<rolltemplate class="sheet-rolltemplate-HL-Missle">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Human Missle Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollBetween() roll 1 3}}<td class="template_label">Hit on the Left Leg</td>{{/rollBetween() roll 1 3}}
			{{#rollBetween() roll 4 6}}<td class="template_label">Hit on the Right Leg</td>{{/rollBetween() roll 4 6}}
			{{#rollBetween() roll 7 10}}<td class="template_label">Hit on the  Abdomen</td>{{/rollBetween() roll 7 10}}
			{{#rollBetween() roll 11 15}}<td class="template_label">Hit on the Chest</td>{{/rollBetween() roll 11 15}}
			{{#rollBetween() roll 16 17}}<td class="template_label">Hit on the Right Arm</td>{{/rollBetween() roll 16 17}}
			{{#rollBetween() roll 18 19}}<td class="template_label">Hit on the Left Arm</td>{{/rollBetween() roll 18 19}}
			{{#rollTotal() roll 20}}
				<td class="template_value">Hit on the Head</td>
			{{/rollTotal() roll 20}}		
			</tr>
		</table>
	</rolltemplate>


	<rolltemplate class="sheet-rolltemplate-FLL-Missle">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Four-legged Missle Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>		
			{{#rollBetween() roll 1 2}}<td class="template_label">Hit on the RH Leg</td>{{/rollBetween() roll 1 2}}
			{{#rollBetween() roll 3 4}}<td class="template_label">Hit on the LH Leg</td>{{/rollBetween() roll 3 4}}
			{{#rollBetween() roll 5 9}}<td class="template_label">Hit on the  Hind Q</td>{{/rollBetween() roll 5 9}}
			{{#rollBetween() roll 10 14}}<td class="template_label">Hit on the Fore Q</td>{{/rollBetween() roll 10 14}}
			{{#rollBetween() roll 15 16}}<td class="template_label">Hit on the RF Leg</td>{{/rollBetween() roll 15 16}}
			{{#rollBetween() roll 17 18}}<td class="template_label">Hit on the LF Leg</td>{{/rollBetween() roll 17 18}}
			{{#rollBetween() roll 19 20}}<td class="template_label">Hit on the Head</td>{{/rollBetween() roll 19 20}}		
			</tr>
		</table>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-FLL-Melee">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Four-legged Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>		
			{{#rollBetween() roll 1 2}}<td class="template_label">Hit on the RH Leg</td>{{/rollBetween() roll 1 2}}
			{{#rollBetween() roll 3 4}}<td class="template_label">Hit on the LH Leg</td>{{/rollBetween() roll 3 4}}
			{{#rollBetween() roll 5 7}}<td class="template_label">Hit on the  Hind Q</td>{{/rollBetween() roll 5 7}}
			{{#rollBetween() roll 8 10}}<td class="template_label">Hit on the Fore Q</td>{{/rollBetween() roll 8 10}}
			{{#rollBetween() roll 11 13}}<td class="template_label">Hit on the RF Leg</td>{{/rollBetween() roll 11 13}}
			{{#rollBetween() roll 14 16}}<td class="template_label">Hit on the LF Leg</td>{{/rollBetween() roll 14 16}}
			{{#rollBetween() roll 17 20}}<td class="template_label">Hit on the Head</td>{{/rollBetween() roll 17 20}}		
			</tr>
		</table>
	</rolltemplate>


	<rolltemplate class="sheet-rolltemplate-NewtL-Missle">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Newtling Missle Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollTotal() roll 1}}<td class="template_label">Hit on the Tail</td>{{/rollTotal() roll 1}}		
			{{#rollBetween() roll 2 4}}<td class="template_label">Hit on the R Leg</td>{{/rollBetween() roll 2 4}}
			{{#rollBetween() roll 5 7}}<td class="template_label">Hit on the L Leg</td>{{/rollBetween() roll 5 7}}
			{{#rollBetween() roll 8 11}}<td class="template_label">Hit on the  Abdomen</td>{{/rollBetween() roll 8 11}}
			{{#rollBetween() roll 12 15}}<td class="template_label">Hit on the Chest</td>{{/rollBetween() roll 12 15}}
			{{#rollBetween() roll 16 17}}<td class="template_label">Hit on the R Arm</td>{{/rollBetween() roll 16 17}}
			{{#rollBetween() roll 18 19}}<td class="template_label">Hit on the L Arm</td>{{/rollBetween() roll 18 19}}
			{{#rollTotal() roll 20}}<td class="template_label">Hit on the Head</td>{{/rollTotal() roll 20}}		
			</tr>
		</table>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-NewtL-Melee">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Newtling Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollBetween() roll 1 2}}<td class="template_label">Hit on the Tail</td>{{/rollBetween() roll 1 2}}		
			{{#rollBetween() roll 3 5}}<td class="template_label">Hit on the R Leg</td>{{/rollBetween() roll 3 5}}
			{{#rollBetween() roll 6 8}}<td class="template_label">Hit on the L Leg</td>{{/rollBetween() roll 6 8}}
			{{#rollBetween() roll 9 11}}<td class="template_label">Hit on the  Abdomen</td>{{/rollBetween() roll 9 11}}
			{{#rollTotal() roll 12}}<td class="template_label">Hit on the Chest</td>{{/rollTotal() roll 12}}
			{{#rollBetween() roll 13 15}}<td class="template_label">Hit on the R Arm</td>{{/rollBetween() roll 13 15}}
			{{#rollBetween() roll 16 18}}<td class="template_label">Hit on the L Arm</td>{{/rollBetween() roll 16 18}}
			{{#rollBetween() roll 19 20}}<td class="template_label">Hit on the Head</td>{{/rollBetween() roll 19 20}}		
			</tr>
		</table>
	</rolltemplate>



	<rolltemplate class="sheet-rolltemplate-WalkL-Melee">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Walktapus Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollBetween() roll 1 2}}<td class="template_label">Hit on the R Leg</td>{{/rollBetween() roll 1 2}}
			{{#rollBetween() roll 3 4}}<td class="template_label">Hit on the L Leg</td>{{/rollBetween() roll 3 4}}
			{{#rollTotal() roll 5}}<td class="template_label">Hit on the  Abdomen</td>{{/rollTotal() roll 5}}
			{{#rollTotal() roll 6}}<td class="template_label">Hit on the  Chest</td>{{/rollTotal() roll 6}}		
			{{#rollBetween() roll 7 8}}<td class="template_label">Hit on the R Arm</td>{{/rollBetween() roll 7 8}}
			{{#rollBetween() roll 9 10}}<td class="template_label">Hit on the L Arm</td>{{/rollBetween() roll 9 10}}
			{{#rollTotal() roll 11}}<td class="template_label">Hit on the  Tentacle 1</td>{{/rollTotal() roll 11}}
			{{#rollTotal() roll 12}}<td class="template_label">Hit on the  Tentacle 2</td>{{/rollTotal() roll 12}}				
			{{#rollTotal() roll 13}}<td class="template_label">Hit on the  Tentacle 3</td>{{/rollTotal() roll 13}}				
			{{#rollTotal() roll 14}}<td class="template_label">Hit on the  Tentacle 4</td>{{/rollTotal() roll 14}}
			{{#rollTotal() roll 15}}<td class="template_label">Hit on the  Tentacle 5</td>{{/rollTotal() roll 15}}
			{{#rollTotal() roll 16}}<td class="template_label">Hit on the  Tentacle 6</td>{{/rollTotal() roll 16}}				
			{{#rollTotal() roll 17}}<td class="template_label">Hit on the  Tentacle 7</td>{{/rollTotal() roll 17}}				
			{{#rollTotal() roll 18}}<td class="template_label">Hit on the  Tentacle 8</td>{{/rollTotal() roll 18}}				
			{{#rollBetween() roll 19 20}}<td class="template_label">Hit on Head</td>{{/rollBetween() roll 19 20}}		
			</tr>
		</table>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-WalkL-Missle">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Walktapus Missle Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollTotal() roll 1}}<td class="template_label">Hit on the  R Leg</td>{{/rollTotal() roll 1}}		
			{{#rollTotal() roll 2}}<td class="template_label">Hit on the  L Leg</td>{{/rollTotal() roll 2}}
			{{#rollBetween() roll 3 4}}<td class="template_label">Hit on Abdomen</td>{{/rollBetween() roll 3 4}}
			{{#rollBetween() roll 5 7}}<td class="template_label">Hit on chest</td>{{/rollBetween() roll 5 7}}
			{{#rollTotal() roll 8}}<td class="template_label">Hit on the  R Arm</td>{{/rollTotal() roll 8}}		
			{{#rollTotal() roll 9}}<td class="template_label">Hit on the  L Arm</td>{{/rollTotal() roll 9}}		
			{{#rollTotal() roll 10}}<td class="template_label">Hit on the  Tentacle 1</td>{{/rollTotal() roll 10}}
			{{#rollTotal() roll 11}}<td class="template_label">Hit on the  Tentacle 2</td>{{/rollTotal() roll 11}}				
			{{#rollTotal() roll 12}}<td class="template_label">Hit on the  Tentacle 3</td>{{/rollTotal() roll 12}}				
			{{#rollTotal() roll 13}}<td class="template_label">Hit on the  Tentacle 4</td>{{/rollTotal() roll 13}}
			{{#rollTotal() roll 14}}<td class="template_label">Hit on the  Tentacle 5</td>{{/rollTotal() roll 14}}
			{{#rollTotal() roll 15}}<td class="template_label">Hit on the  Tentacle 6</td>{{/rollTotal() roll 15}}				
			{{#rollTotal() roll 16}}<td class="template_label">Hit on the  Tentacle 7</td>{{/rollTotal() roll 16}}				
			{{#rollTotal() roll 17}}<td class="template_label">Hit on the  Tentacle 8</td>{{/rollTotal() roll 17}}				
			{{#rollBetween() roll 18 20}}<td class="template_label">Hit on Head</td>{{/rollBetween() roll 18 20}}		

			</tr>
		</table>
	</rolltemplate>



	<rolltemplate class="sheet-rolltemplate-ScorpL-Missle">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Scorpion Man Missle Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollTotal() roll 1}}<td class="template_label">Hit on the  RH Leg</td>{{/rollTotal() roll 1}}		
			{{#rollTotal() roll 2}}<td class="template_label">Hit on the  RC Leg</td>{{/rollTotal() roll 2}}
			{{#rollTotal() roll 3}}<td class="template_label">Hit on the  RF Leg</td>{{/rollTotal() roll 3}}
			{{#rollTotal() roll 4}}<td class="template_label">Hit on the  LH Leg</td>{{/rollTotal() roll 4}}
			{{#rollTotal() roll 5}}<td class="template_label">Hit on the  LC Leg</td>{{/rollTotal() roll 5}}
			{{#rollTotal() roll 6}}<td class="template_label">Hit on the  LF Leg</td>{{/rollTotal() roll 6}}
			{{#rollTotal() roll 7}}<td class="template_label">Hit on the  Tail</td>{{/rollTotal() roll 7}}						
			{{#rollBetween() roll 8 10}}<td class="template_label">Hit on the  Thorax</td>{{/rollBetween() roll 8 10}}		
			{{#rollBetween() roll 11 15}}<td class="template_label">Hit on the  Chest</td>{{/rollBetween() roll 11 15}}		
			{{#rollBetween() roll 16 17}}<td class="template_label">Hit on the  R Arm</td>{{/rollBetween() roll 16 17}}		
			{{#rollBetween() roll 18 19}}<td class="template_label">Hit on the  L Arm</td>{{/rollBetween() roll 18 19}}		
			{{#rollTotal() roll 20}}<td class="template_label">Hit on the  Head</td>{{/rollTotal() roll 20}}		

			</tr>
		</table>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-ScorpL-Melee">
		<table class="skillRoll" style="border 1px black">
			<tr><th colspan="2">Scorpion Man Hit location roll</th></tr>
			<tr>
			<td>{{roll}}&nbsp;</td>
			{{#rollTotal() roll 1}}<td class="template_label">Hit on the  RH Leg</td>{{/rollTotal() roll 1}}		
			{{#rollTotal() roll 2}}<td class="template_label">Hit on the  RC Leg</td>{{/rollTotal() roll 2}}
			{{#rollBetween() roll 3 4}}<td class="template_label">Hit on the  RF Leg</td>{{/rollBetween() roll 3 4}}
			{{#rollTotal() roll 5}}<td class="template_label">Hit on the  LH Leg</td>{{/rollTotal() roll 5}}
			{{#rollTotal() roll 6}}<td class="template_label">Hit on the  LC Leg</td>{{/rollTotal() roll 6}}		
			{{#rollBetween() roll 7 8}}<td class="template_label">Hit on the  LF Leg</td>{{/rollBetween() roll 7 8}}		
			{{#rollBetween() roll 9 10}}<td class="template_label">Hit on the  Tail</td>{{/rollBetween() roll 9 10}}		
			{{#rollBetween() roll 11 12}}<td class="template_label">Hit on the  Thorax</td>{{/rollBetween() roll 11 12}}		
			{{#rollBetween() roll 13 14}}<td class="template_label">Hit on the  Chest</td>{{/rollBetween() roll 13 14}}		
			{{#rollBetween() roll 15 16}}<td class="template_label">Hit on the  R Arm</td>{{/rollBetween() roll 15 16}}		
			{{#rollBetween() roll 17 18}}<td class="template_label">Hit on the  L Arm</td>{{/rollBetween() roll 17 18}}		
			{{#rollBetween() roll 19 20}}<td class="template_label">Hit on the  Head</td>{{/rollBetween() roll 19 20}}		

			</tr>
		</table>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-skillRoll">

		<table class="skillRoll" style="width: 100%; border 1px black">
			<!--<tr><th>{{name}}</th></tr>-->
			<tr><th colspan="2">{{name}}</th></tr>
			<tr><th colspan="2">Rolls</th></tr>
			<!--<tr><td>{{crit}}/{{special}}/{{fumble}} </td></tr>-->
			<tr>
				<td>&nbsp;<td>
			</tr>
			<tr>
				<td class="template_label">{{skillname}} {{skillvalue}}% </td> 
				<td class="template_value"> ({{success}}%)</td>
			</tr>
				

			<tr>
				<td class="template_label"><b>Rolled:</b></td>
				<td class="template_value">&nbsp;{{roll}}</td>
			</tr>
			<tr>
			 <td class="template_label"><b>Result:</b></td>

			{{#rollBetween() roll fumble 100}} 
					<td class="template_value">Fumble (-50%)</td>
			{{/rollBetween() roll fumble 100}} 
			
			{{#^rollBetween() roll fumble 100}}
			
				{{#rollGreater() success 99}}
					{{#rollLess() roll crit}}<td class="template_value">Critical (+50%)</td>{{/rollLess() roll crit}}
					{{#^rollLess() roll crit}}
						{{#rollLess() roll special}}<td class="template_value">Special (+30%)</td>{{/rollLess() roll special}}
						{{#^rollLess() roll special}}<td class="template_value">Success (+20%)</td>{{/^rollLess() roll special}}
					{{/^rollLess() roll crit}}

				{{/rollGreater() success 99}}
				
				{{#^rollGreater() success 99}}
					{{#rollLess() roll crit}}<td class="template_value">Critical (+50%)</td>{{/rollLess() roll crit}}
					{{#^rollLess() roll crit}}
						{{#rollLess() roll special}}<td class="template_value">Special (+30%)</td>{{/rollLess() roll special}}
						{{#^rollLess() roll special}}
							{{#rollBetween() roll special success}}<td class="template_value">Success (+20%)</td>{{/rollBetween() roll special success}}
							{{#^rollBetween() roll special success}}
								{{#rollLess() roll fumble}}
									<td class="template_value">Failure (-20%)</td>
								{{/rollLess() roll fumble}}
								{{#^rollLess() roll fumble}}
									<td class="template_value">Fumble (-50%)</td>
								{{/^rollLess() roll fumble}}							
							{{/^rollBetween() roll special success}}						
						
						{{/^rollLess() roll special}}
					{{/^rollLess() roll crit}}
				
				
				
				{{/^rollGreater() success 99}}

				
			{{/^rollBetween() roll fumble 100}}
			</tr>
		</table>
	</rolltemplate>

		<!--end old templates -->